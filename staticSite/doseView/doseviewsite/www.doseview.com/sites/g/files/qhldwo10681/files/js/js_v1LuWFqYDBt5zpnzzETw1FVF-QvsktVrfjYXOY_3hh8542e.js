/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery);})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return "area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t);}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return "hidden"===e.css(this,"visibility");}).length;}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent();}return 0;}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"));}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover");}).delegate(i,"mouseover",o);}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"));}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t;}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change");};}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"));}).eq(0);return "fixed"!==i&&a.length?a:e(this[0].ownerDocument||document);},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e);});};}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id");});}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return !!e.data(i,t);};}):function(t,i,s){return !!e.data(t,s[3]);},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")));},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return (n||s>=0)&&t(i,!n);}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0);}),i;}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px");});},e.fn["outer"+i]=function(t,n){return "number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px");});};}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e));}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this);};}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return "number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t);},i);}):t.apply(this,arguments);};}(e.fn.focus),disableSelection:function(){var e="onselectstart" in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault();});};}(),enableSelection:function(){return this.unbind(".ui-disableSelection");},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent();}return 0;}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]]);},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i);}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove");}catch(o){}t(i);};}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return !!e.data(t,n);},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t);},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i(),r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments);},n=function(e){return i.prototype[t].apply(this,e);};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t;};}(),void 0):(h[t]=s,void 0);}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto);}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o;},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t;},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return n=!a&&o.length?e.widget.extend.apply(null,[n].concat(o)):n,a?this.each(function(){var i,a=e.data(this,s);return "instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'");}):this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this));}),r;};},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy();}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init();},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus");},_destroy:e.noop,widget:function(){return this.element;},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i;}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i;}return this._setOptions(o),this;},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this;},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this;},enable:function(){return this._setOptions({disabled:!1});},disable:function(){return this._setOptions({disabled:!0});},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0;}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r);});},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get());},_delay:function(e,t){function i(){return ("string"==typeof e?s[e]:e).apply(s,arguments);}var s=this;return setTimeout(i,t||0);},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover");},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover");}});},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus");},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus");}});},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented());}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i();});};}),e.widget;var d=!1;e(document).mouseup(function(){d=!1;}),e.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e);}).bind("click."+this.widgetName,function(i){return !0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0;}),this.started=!1;},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);},_mouseDown:function(t){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0;},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e);},this._mouseUpDelegate=function(e){return i._mouseUp(e);},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0;}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t);}return (t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted);},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1;},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance;},_mouseDelayMet:function(){return this.mouseDelayMet;},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return !0;}}),function(){function t(e,t,i){return [parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)];}function i(t,i){return parseInt(e.css(t,i),10)||0;}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()};}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i;},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return {width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0};},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return {element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()};}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]];}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,M=e.extend({},y),C=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?M.left-=d:"center"===n.my[0]&&(M.left-=d/2),"bottom"===n.my[1]?M.top-=c:"center"===n.my[1]&&(M.top-=c/2),M.left+=C[0],M.top+=C[1],a||(M.left=h(M.left),M.top=h(M.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](M,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:n.my,at:n.at,within:x,elem:u});}),n.using&&(l=function(e){var t=v.left-M.left,i=t+m-d,s=v.top-M.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:M.left,top:M.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h);}),u.offset(e.extend(M,{using:l}));});},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left);},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top);}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f));},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>u&&(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>d&&(i>0||d>r(i))&&(e.top+=p+f+m));}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments);},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments);}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t);}();}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit();},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName());},_destroy:function(){return (this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0);},_mouseCapture:function(t){var i=this.options;return this._blurActiveElement(t),this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1);},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0];});},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks);},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur();}catch(s){}},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return "fixed"===e(this).css("position");}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0);},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top};},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position;}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1;},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear();}):this._trigger("stop",t)!==!1&&this._clear(),!1;},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t);},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this;},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0;},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle");},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle");},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper),n=s?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n;},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left" in t&&(this.offset.click.left=t.left+this.margins.left),"right" in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top" in t&&(this.offset.click.top=t.top+this.margins.top),"bottom" in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top);},_isRootNode:function(e){return /(html|body)/i.test(e.tagName)||e===this.document[0];},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return "absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return {top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return {top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())};},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0);},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return {top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i};},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)};},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy();},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"));},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,s);},plugins:{},_uiHash:function(){return {helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=e.extend({},i,{item:s.element});s.sortables=[],e(s.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,n));});},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,e.each(s.sortables,function(){var e=this;e.isOver?(e.isOver=0,s.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n));});},drag:function(t,i,s){e.each(s.sortables,function(){var n=!1,a=this;a.positionAbs=s.positionAbs,a.helperProportions=s.helperProportions,a.offset.click=s.offset.click,a._intersectsWith(a.containerCache)&&(n=!0,e.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(n=!1),n;})),n?(a.isOver||(a.isOver=1,a.currentItem=i.helper.appendTo(a.element).data("ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return i.helper[0];},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=s.offset.click.top,a.offset.click.left=s.offset.click.left,a.offset.parent.left-=s.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=s.offset.parent.top-a.offset.parent.top,s._trigger("toSortable",t),s.dropped=a.element,e.each(s.sortables,function(){this.refreshPositions();}),s.currentItem=s.element,a.fromOutside=s),a.currentItem&&(a._mouseDrag(t),i.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),s._refreshOffsets(t),i.position=s._generatePosition(t,!0),s._trigger("fromSortable",t),s.dropped=!1,e.each(s.sortables,function(){this.refreshPositions();}));});}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor);},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor);}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity);},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity);}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset());},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t);}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left});});},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left-s.margins.left,l=h+s.snapElements[c].width,u=s.snapElements[c].top-s.margins.top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p);}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return (parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0);});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t);}),this.css("zIndex",n+o.length));}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex);},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex);}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s);},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable");},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this);},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1);},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled");},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i);};else{if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i);}}this._super(t,i);},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i));},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i));},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)));},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)));},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0;}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1;},ui:function(e){return {draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs};}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e;}return function(t,i,s,n){if(!i.offset)return !1;var a=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case "fit":return a>=l&&d>=r&&o>=u&&c>=h;case "intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case "pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case "touch":return (o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return !1;}};}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e;}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}));}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)));}),s;},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i);});},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n;}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)));}});},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i);}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0;},_isNumber:function(e){return !isNaN(parseInt(e,10));},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return !1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n);},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length;},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se");}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show());}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide());})),this._mouseInit();},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove();};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this;},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return !this.options.disabled&&n;},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0;},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1;},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1;},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height};},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e;},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a;},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width);},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e;},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e;},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return {height:i[0]+i[2],width:i[1]+i[3]};},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0});},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element;},_change:{e:function(e,t){return {width:this.originalSize.width+t};},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return {left:s.left+t,width:i.width-t};},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return {top:n.top+i,height:s.height-i};},s:function(e,t,i){return {height:this.originalSize.height+i};},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]));},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]));},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]));},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]));}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui());},plugins:{},ui:function(){return {originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t);}});}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s));}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}));},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height);},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l});}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)});});};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e);});},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null);}),t.css(a);});};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t);});},stop:function(){e(this).removeData("resizable-alsoresize");}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper);},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width});},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0));}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=u-t.height,i.size.width=p,i.position.left=o.left+a.width-p));}}),e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")});});},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>");},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy();},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}));}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0;}));},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))));}),!1;}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element});}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element});}),this._trigger("stop",t),this.helper.remove(),!1;}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e;},_isFloating:function(e){return /left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"));},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0;},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName();},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle");});},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this;},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0;}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0);}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1);},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0;},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break;}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1;},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t);});}else this._clear(t,i);return !1;}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0);}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this;},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]));}),!s.length&&t.key&&s.push(t.key+"="),s.join("&");},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"");}),s;},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return "pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2;},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1;},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t);},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up");},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left");},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this;},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith;},_getItemsAsjQuery:function(t){function i(){r.push(this);}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r);},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return !1;return !0;});},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0});},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this;},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return "tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n);}):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n;},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)));}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder);},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i;}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1;}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s;},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left" in t&&(this.offset.click.left=t.left+this.margins.left),"right" in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top" in t&&(this.offset.click.top=t.top+this.margins.top),"bottom" in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top);},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return "absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return {top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}return {top:0,left:0};},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]);},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return {top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s};},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return "relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())};},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s);});},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t));};}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside));}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash());}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash());}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this));};}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this));};}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash());}return this.fromOutside=!1,!this.cancelHelperRemoval;},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel();},_uiHash:function(t){var i=t||this;return {helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null};}}),e.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh();},_getCreateEventData:function(){return {header:this.active,panel:this.active.length?this.active.next():e()};},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"));},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove();},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","");},_setOption:function(e,t){return "active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0);},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1];}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault());}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus();},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh();},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)));},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i);}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0));}),this.headers.each(function(){t-=e(this).outerHeight(!0);}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()));}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height());}).height(t));},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}));},_findActive:function(t){return "number"==typeof t?this.headers.eq(t):e();},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler";}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers);},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")));},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex");}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"});},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},u=h&&l.down||l,d=function(){o._toggleComplete(i);};return "number"==typeof u&&(a=u),"string"==typeof u&&(n=u),n=n||u.easing||l.easing,a=a||u.duration||l.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e);}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:d,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?r+=i.now:"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0);}}),void 0):t.animate(this.hideProps,a,n,d):e.animate(this.showProps,a,n,d);},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e);}}),e.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault();},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)));},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i);}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i);},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t);});},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1;}});},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove();}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content");},_keydown:function(t){var i,s,n,a,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,s=this.previousFilter||"",n=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),n===s?a=!0:n=s+n,i=this._filterMenuItems(n),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(n=String.fromCharCode(t.keyCode),i=this._filterMenuItems(n)),i.length?(this.focus(t,i),this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter;},1e3)):delete this.previousFilter;}o&&t.preventDefault();},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e));},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"));}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider");}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur();},_itemRole:function(){return {menu:"menuitem",listbox:"option"}[this.options.role];},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t);},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close();},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t});},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r));},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}));},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e);},this.delay));},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i);},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s;},this.delay);},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active");},_closeOnDocumentClick:function(t){return !e(t.target).closest(".ui-menu").length;},_isDivider:function(e){return !/[^\-\u2014\u2013\s]/.test(e.text());},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t));},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t);}));},next:function(e){this._move("next","first",e);},previous:function(e){this._move("prev","last",e);},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s);},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n;}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0);},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0;}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0);},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight");},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i);},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),s=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return s.test(e.trim(e(this).text()));});}}),e.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n);}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s);}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0);},focus:function(){this.selectedItem=null,this.previous=this._value();},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0);}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur;});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close();});});},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent);}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0);},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i;})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i;}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove();},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort();},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t;},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term));}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e);},error:function(){n([]);}});}):this.source=this.options.source;},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e));},this.options.delay);},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0;},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response());},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading");},this);},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close();},close:function(e){this.cancelSearch=!0,this._close(e);},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e));},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem});},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return "string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label});});},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next();},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()));},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i);});},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t);},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t);},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0);},widget:function(){return this.menu.element;},_value:function(){return this.valueMethod.apply(this.element,arguments);},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault());}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e);});}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate.";}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion));}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh");},1);},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return !this.form;})),n;};e.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active");}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n);}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation());}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus");},blur:function(){this.buttonElement.removeClass("ui-state-focus");}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh();}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0;}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return !1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null;}),void 0);}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0);}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0);}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active");}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click();})),this._setOption("disabled",i.disabled),this._resetButton();},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element;},widget:function(){return this.buttonElement;},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title");},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0);},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"));},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "));}}),e.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t);},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end();},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.2"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv;},setDefaults:function(e){return r(this._defaults,e||{}),this;},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a);},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return {id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv};},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t));},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1;}));},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s;},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length);}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"));},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this;},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty());},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1;}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e;}));},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0;}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e;}),this._disabledInputs[this._disabledInputs.length]=t);},_isDisabledDatepicker:function(e){if(!e)return !1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return !0;return !1;},_getInst:function(t){try{return e.data(t,"datepicker");}catch(i){throw "Missing instance data for this datepicker";}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled" in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0);},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i);},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t);},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i));},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null;},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1;}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation());},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0;},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s));}catch(n){}return !0;},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o;}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i));}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null;},0));},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus");},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i;},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top];},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o);},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1);},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker();}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a));},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date(),n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s);},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n);},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)));},_clearDate:function(t){var i=e(t);this._selectDate(i,"");},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null);},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n);}));},noWeekends:function(e){var t=e.getDay();return [t>0&&6>t,""];},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1;},parseDate:function(t,i,s){if(null==t||null==i)throw "Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date()).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i;},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw "Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10);},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return [[t,e]];}).sort(function(e,t){return -(e[1].length-t[1].length);});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0;}),-1!==a)return a+1;throw "Unknown name at position "+h;},k=function(){if(i.charAt(h)!==t.charAt(n))throw "Unexpected literal at position "+h;h++;};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case "d":v=x("d");break;case "D":w("D",d,c);break;case "o":y=x("o");break;case "m":g=x("m");break;case "M":g=w("M",p,f);break;case "y":m=x("y");break;case "@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case "!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case "'":_("'")?k():b=!0;break;default:k();}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw "Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date()).getFullYear():100>m&&(m+=(new Date()).getFullYear()-(new Date()).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a;}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw "Invalid date";return r;},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return "";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i;},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s;},u=function(e,t,i,s){return h(e)?s[t]:i[t];},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case "d":d+=l("d",t.getDate(),2);break;case "D":d+=u("D",t.getDay(),n,a);break;case "o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case "m":d+=l("m",t.getMonth()+1,2);break;case "M":d+=u("M",t.getMonth(),o,r);break;case "y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case "@":d+=t.getTime();break;case "!":d+=1e4*t.getTime()+this._ticksTo1970;break;case "'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s);}return d;},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s;};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case "d":case "m":case "y":case "@":i+="0123456789";break;case "D":case "M":return null;case "'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t);}return i;},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t];},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n;}catch(r){s=t?"":s;}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e);}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date()));},_determineDate:function(t,i,s){var n=function(e){var t=new Date();return t.setDate(t.getDate()+e),t;},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t));}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date(),a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case "d":case "D":r+=parseInt(l[1],10);break;case "w":case "W":r+=7*parseInt(l[1],10);break;case "m":case "M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case "y":case "Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));}l=h.exec(i);}return new Date(a,o,r);},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o);},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null;},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date()));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e));},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t;},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M");},next:function(){e.datepicker._adjustDate(s,+i,"M");},hide:function(){e.datepicker._hideDatepicker();},today:function(){e.datepicker._gotoToday(s);},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1;},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1;},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1;}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")]);});},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,M,C,N,A,P,I,z,H,F,E,O,j,W,L=new Date(),R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),Y=this._get(e,"isRTL"),B=this._get(e,"showButtonPanel"),J=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),U=this._get(e,"stepMonths"),Q=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-K[0]*K[1]+1,$.getDate())),t=X&&X>t?X:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-U,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":J?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+U,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":J?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?G:R,o=q?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;K[0]>w;w++){for(k="",this.maxRows=4,T=0;K[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",M="",Q){if(M+="<div class='ui-datepicker-group",K[1]>1)switch(T){case 0:M+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case K[1]-1:M+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:M+=" ui-datepicker-group-middle",S="";}M+="'>";}for(M+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,X,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",C=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)N=(x+u)%7,C+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[N]+"'>"+p[N]+"</span></th>";for(M+=C+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),z=Q?this.maxRows>I?this.maxRows:I:I,this.maxRows=z,H=this._daylightSavingAdjust(new Date(et,Z,1-P)),F=0;z>F;F++){for(M+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)O=g?g.apply(e.input?e.input[0]:null,[H]):[!0,""],j=H.getMonth()!==Z,W=j&&!y||!O[0]||X&&X>H||$&&H>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(j?" ui-datepicker-other-month":"")+(H.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===H.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(W?" "+this._unselectableClass+" ui-state-disabled":"")+(j&&!v?"":" "+O[1]+(H.getTime()===G.getTime()?" "+this._currentClass:"")+(H.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(j&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(W?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(j&&!v?"&#xa0;":W?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===R.getTime()?" ui-state-highlight":"")+(H.getTime()===G.getTime()?" ui-state-active":"")+(j?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);M+=E+"</tr>";}Z++,Z>11&&(Z=0,et++),M+="</tbody></table>"+(Q?"</div>"+(K[0]>0&&T===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=M;}_+=k;}return _+=l,e._keyEvent=!1,_;},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>";}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date()).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t;},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null;}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>";},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e);},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n;},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e]);},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t;},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null);},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate();},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay();},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a);},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date()).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear());},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date()).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")};},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e));}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return "string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t);}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i));},e.datepicker=new n(),e.datepicker.initialized=!1,e.datepicker.uuid=(new Date()).getTime(),e.datepicker.version="1.11.2",e.datepicker,e.widget("ui.dialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i);}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus();},_init:function(){this.options.autoOpen&&this.open();},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0);},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element);},widget:function(){return this.uiDialog;},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur();}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t);});}},isOpen:function(){return this._isOpen;},moveToTop:function(){this._moveToTop();},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return +e(this).css("z-index");}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s;},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus");}),this._makeFocusTarget(),this._trigger("open"),void 0);},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus();},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable();}t.preventDefault(),i.call(this),this._delay(i);},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus();}),t.preventDefault()):(this._delay(function(){s.focus();}),t.preventDefault());}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable();}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")});},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus();}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e);}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")});},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title);},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons();},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments);},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet);}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0);},_makeDraggable:function(){function t(e){return {position:e.position,offset:e.offset};}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n));},drag:function(e,s){i._trigger("drag",e,t(s));},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a));}});},_makeResizable:function(){function t(e){return {originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size};}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n));},resize:function(e,s){i._trigger("resize",e,t(s));},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a));}}).css("position",a);},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target);}});},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this);},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1);},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e;},_minHeight:function(){var e=this.options;return "auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height);},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide();},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t);}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n);},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")));},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight());},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0];});},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks);},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length;},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1;}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable());}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1);}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null;}}}),e.widget("ui.progressbar",{version:"1.11.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue();},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove();},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0);},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e));},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue();},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t);},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min);},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete");}}),e.widget("ui.selectmenu",{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable();},_drawButton:function(){var t=this,i=this.element.attr("tabindex");this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault();}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:i||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu();}),this._hoverable(this.button),this._focusable(this.button);},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,i){e.preventDefault(),t._setSelection(),t._select(i.item.data("ui-selectmenu-item"),e);},focus:function(e,i){var s=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&s.index!==t.focusIndex&&(t._trigger("focus",e,{item:s}),t.isOpen||t._select(s,e)),t.focusIndex=s.index,t.button.attr("aria-activedescendant",t.menuItems.eq(s.index).attr("id"));}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return !1;},this.menuInstance._isDivider=function(){return !1;};},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton();},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")));},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e));},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position));},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e));},widget:function(){return this.button;},menuWidget:function(){return this.menu;},_renderMenu:function(t,i){var s=this,n="";e.each(i,function(i,a){a.optgroup!==n&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(a.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:a.optgroup}).appendTo(t),n=a.optgroup),s._renderItemData(t,a);});},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t);},_renderItem:function(t,i){var s=e("<li>");return i.disabled&&s.addClass("ui-state-disabled"),this._setText(s,i.label),s.appendTo(t);},_setText:function(e,t){t?e.text(t):e.html("&#160;");},_move:function(e,t){var i,s,n=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),n+=":not(.ui-state-disabled)"),s="first"===e||"last"===e?i["first"===e?"prevAll":"nextAll"](n).eq(-1):i[e+"All"](n).eq(0),s.length&&this.menuInstance.focus(t,s);},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex);},_toggle:function(e){this[this.isOpen?"close":"open"](e);},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus());},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t));}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange();},click:function(e){this._setSelection(),this._toggle(e);},keydown:function(t){var i=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),i=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),i=!1;}i&&t.preventDefault();}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e);},_select:function(e,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==i&&this._trigger("change",t,{item:e}),this.close(t);},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t);},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton();},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t;},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen);},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e);},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1));},_getCreateOptions:function(){return {disabled:this.element.prop("disabled")};},_parseOptions:function(t){var i=[];t.each(function(t,s){var n=e(s),a=n.parent("optgroup");i.push({element:n,index:t,value:n.attr("value"),label:n.text(),optgroup:a.attr("label")||"",disabled:a.prop("disabled")||n.prop("disabled")});}),this.items=i;},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element);}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1;},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue();},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t);});},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null);},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles);},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy();},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t);}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0));},_mouseStart:function(){return !0;},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1;},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1;},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal";},_normValueFromMouse:function(e){var t,i,s,n,a;return "horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a);},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i);},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i));},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i);},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i);}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value();},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue();},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case "orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case "value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case "values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case "step":case "min":case "max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=!1;}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e);},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i;}return [];},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5));},_calculateNewMax:function(){var e=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-e;},_valueMin:function(){return this.options.min;},_valueMax:function(){return this.max;},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i;}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}));},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return;}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a);}this._slide(t,o,n);},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"));}}}),e.widget("ui.spinner",{version:"1.11.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete");}});},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n);}),t;},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault();},keyup:"_stop",focus:function(){this.previous=this.element.val();},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0);},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return !1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e);},100),e.preventDefault();}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s;}));}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this);}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t);},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0;},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable();},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0;}return !1;},_uiSpinnerHtml:function(){return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>";},_buttonHtml:function(){return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>";},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1;},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i);},e),this._spin(t*this.options.step,i);},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++);},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1;},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e;},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return -1===i?0:t.length-i-1;},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e;},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e));},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0;}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"));},_setOptions:h(function(e){this._super(e);}),_parse:function(e){return "string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e;},_format:function(e){return ""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e;},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())});},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e);},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh();},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element);},stepUp:h(function(e){this._stepUp(e);}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop());},stepDown:h(function(e){this._stepDown(e);}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop());},pageUp:h(function(e){this._stepUp((e||1)*this.options.page);}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page);}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val());},widget:function(){return this.uiSpinner;}}),e.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var i,s;t=t.cloneNode(!1),i=t.href.replace(e,""),s=location.href.replace(e,"");try{i=decodeURIComponent(i);}catch(n){}try{s=decodeURIComponent(s);}catch(n){}return t.hash.length>1&&i===s;};}(),_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e);}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active);},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){return e(n).attr("aria-controls")===s?(t=i,!1):void 0;}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t;},_getCreateEventData:function(){return {tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()};},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(s),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(s===this.options.active?!1:s),void 0;default:return;}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s);},this.delay));}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus());},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0;},_findNextTab:function(t,i){function s(){return t>n&&(t=0),0>t&&(t=n),t;}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t;},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e;},_setOption:function(e,t){return "active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0);},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):"";},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e);}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh();},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0);},_processTabs:function(){var t=this,i=this.tabs,s=this.anchors,n=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault();}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur();}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0];}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,s){var n,a,o,r=e(s).uniqueId().attr("id"),h=e(s).closest("li"),l=h.attr("aria-controls");t._isLocal(s)?(n=s.hash,o=n.substring(1),a=t.element.find(t._sanitizeSelector(n))):(o=h.attr("aria-controls")||e({}).uniqueId()[0].id,n="#"+o,a=t.element.find(n),a.length||(a=t._createPanel(o),a.insertAfter(t.panels[i-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),l&&h.data("ui-tabs-aria-controls",l),h.attr({"aria-controls":o,"aria-labelledby":r}),a.attr("aria-labelledby",r);}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),i&&(this._off(i.not(this.tabs)),this._off(s.not(this.anchors)),this._off(n.not(this.panels)));},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0);},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0);},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t;},_setupEvents:function(t){var i={};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler";}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault();}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs);},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0));}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0);}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()));}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height());}).height(i));},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?e():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:r?e():a,newPanel:h};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),t),this._toggle(t,u));},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i);}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s());}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n();}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr("aria-hidden","true"),i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex");}).attr("tabIndex",-1),o.attr("aria-hidden","false"),i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0});},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}));},_findActive:function(t){return t===!1?e():this.tabs.eq(t);},_getIndex:function(e){return "string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e;},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role");}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls");}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","");},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=e.isArray(i)?e.map(i,function(e){return e!==t?e:null;}):e.map(this.tabs,function(e,i){return i!==t?i:null;})),this._setupDisabled(i));},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,i))return;i=e.isArray(i)?e.merge([t],i).sort():[t];}this._setupDisabled(i);}},load:function(t,i){t=this._getIndex(t);var s=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),r={tab:n,panel:o};this._isLocal(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,i,r)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){o.html(e),s._trigger("load",i,r);},1);}).complete(function(e,t){setTimeout(function(){"abort"===t&&s.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===s.xhr&&delete s.xhr;},1);})));},_ajaxSettings:function(t,i,s){var n=this;return {url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s));}};},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i));}}),e.widget("ui.tooltip",{version:"1.11.2",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html();},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")));},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby");},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);},_setOption:function(t,i){var s=this;return "disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t.element);}),void 0);},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s.element[0],t.close(n,!0);}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title");});},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"));});},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""));}),this._updateContent(s,t));},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return "string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){e.data("ui-tooltip-open")&&n._delay(function(){t&&(t.type=a),this._open(t,e,i);});}),i&&this._open(t,e,i),void 0);},_open:function(t,i,s){function n(e){u.of=e,o.is(":hidden")||o.position(u);}var a,o,r,h,l,u=e.extend({},this.options.position);if(s){if(a=this._find(i))return a.tooltip.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),o=a.tooltip,this._addDescribedBy(i,o.attr("id")),o.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(l=s.clone(),l.removeAttr("id").find("[id]").removeAttr("id")):l=s,e("<div>").html(l).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):o.position(e.extend({of:i},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){o.is(":visible")&&(n(u.of),clearInterval(h));},e.fx.interval)),this._trigger("open",t,{tooltip:o}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0);}}},i[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(o);}),t&&"mouseover"!==t.type||(r.mouseleave="close"),t&&"focusin"!==t.type||(r.focusout="close"),this._on(!0,i,r);}},close:function(t){var i,s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);a&&(i=a.tooltip,a.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&!n.attr("title")&&n.attr("title",n.data("ui-tooltip-title")),this._removeDescribedBy(n),a.hiding=!0,i.stop(!0),this._hide(i,this.options.hide,function(){s._removeTooltip(e(this));}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t];}),a.closing=!0,this._trigger("close",t,{tooltip:i}),a.hiding||(a.closing=!1)));},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]={element:t,tooltip:i};},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null;},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")];},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur"),a=s.element;n.target=n.currentTarget=a[0],t.close(n,!0),e("#"+i).remove(),a.data("ui-tooltip-title")&&(a.attr("title")||a.attr("title",a.data("ui-tooltip-title")),a.removeData("ui-tooltip-title"));}),this.liveRegion.remove();}});var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function i(e,t,i){var s=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=s.floor?~~e:parseFloat(e),isNaN(e)?t.def:s.mod?(e+s.mod)%s.mod:0>e?0:e>s.max?s.max:e);}function s(i){var s=l(),n=s._rgba=[];return i=i.toLowerCase(),f(h,function(e,a){var o,r=a.re.exec(i),h=r&&a.parse(r),l=a.space||"rgba";return h?(o=s[l](h),s[u[l].cache]=o[u[l].cache],n=s._rgba=o._rgba,!1):t;}),n.length?("0,0,0,0"===n.join()&&e.extend(n,a.transparent),s):a[i];}function n(e,t,i){return i=(i+1)%1,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e;}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return [e[1],e[2],e[3],e[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return [2.55*e[1],2.55*e[2],2.55*e[3],e[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return [parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return [parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return [e[1],e[2]/100,e[3]/100,e[4]];}}],l=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n);},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=l.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1};}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c="array"),"string"===c?this.parse(s(n)||a._default):"array"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t);}),this):"object"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice());}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if("alpha"===e||null==n[e])return;d[a]=s.to(d._rgba);}d[a][t.idx]=i(n[e],t,!0);}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])));}),this):t;},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t;})),s;}),s;},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i);}),e.pop();},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l("transparent"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)));}),this[n](h);},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return (1-s)*n[t]+s*e;}));},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e;});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")";},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e;});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")";},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e;}).join("");},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString();}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return [null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o];},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return [null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return [Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a];},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d="array"===r||"object"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d["object"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t);}),u?(n=l(u(c)),n[o]=c,n):l(c);},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h="alpha"===t?this._hsla?"hsla":"rgba":s,l=this[h](),u=l[i.idx];return "undefined"===o?u:("function"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*("+"===a[1]?1:-1))),l[i.idx]=n,this[h](l)));});});}),l.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r="";if("transparent"!==n&&("string"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode;}catch(h){}n=n.blend(r&&"transparent"!==r?r:"_default");}n=n.toRgbaString();}try{t.style[i]=n;}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos));};});},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,s){t["border"+s+"Color"]=e;}),t;}},a=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};}(b),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a;}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o;}var s=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){e.fx.step[i]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,i,e.end),e.setAttr=!0);};}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e));}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr("class")||"",l=h.children?o.find("*").addBack():o;l=l.map(function(){var i=e(this);return {el:i,start:t(this)};}),a=function(){e.each(s,function(e,t){n[t]&&o[t+"Class"](n[t]);});},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this;}),o.attr("class",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t);}});return this.el.animate(this.diff,s),i.promise();}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"");});}),h.complete.call(o[0]);});});},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments);};}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments);};}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return "boolean"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a);};}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a);}});}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t;}function i(t){return !t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0;}e.extend(e.effects,{version:"1.11.2",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(y+t[i],e[0].style[t[i]]);},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(y+t[s]),void 0===i&&(i=""),e.css(t[s],i));},setMode:function(e,t){return "toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t;},getBaseline:function(e,t){var i,s;switch(e[0]){case "top":i=0;break;case "middle":i=.5;break;case "bottom":i=1;break;default:i=e[0]/t.height;}switch(e[1]){case "left":s=0;break;case "center":s=.5;break;case "right":s=1;break;default:s=e[1]/t.width;}return {x:s,y:i};},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id;}catch(o){a=document.body;}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),"static"===t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto");}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),s.css(i).show();},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t;},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1]);}),n;}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t();}var n=e(this),a=s.complete,r=s.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):o.call(n[0],s,i);}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this);}):a===!1?this.each(i):this.queue(a||"fx",i);},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n);};}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n);};}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||"boolean"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n);};}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t]);}),s;}});}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2);};}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2);},Circ:function(e){return 1-Math.sqrt(1-e*e);},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15);},Back:function(e){return e*e*(3*e-2);},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2);}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e);},e.easing["easeInOut"+t]=function(e){return .5>e?i(2*e)/2:1-i(-2*e+2)/2;};});}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(o,t.mode||"hide"),d=t.direction||"up",c=r.test(d),p=c?"height":"width",f=c?"top":"left",m=h.test(d),g={},v="show"===u;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?"bottom":"right",0).css(c?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i();}});},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"effect"),l="hide"===h,u="show"===h,d=t.direction||"up",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",y="up"===d||"left"===d,b=o.queue(),_=b.length;for((u||l)&&r.push("opacity"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o["top"===v?"outerHeight":"outerWidth"]()/3),u&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?"-=":"+=")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i();}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue();},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","height","width"],h=e.effects.setMode(o,t.mode||"hide"),l="show"===h,u=t.direction||"vertical",d="vertical"===u,c=d?"height":"width",p=d?"top":"left",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i();}});},e.effects.effect.drop=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(n,t.mode||"hide"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h?"pos":"neg",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(l,"pos"===u?-s:s),d[l]=(r?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i();}});},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n();}function n(){p.css({visibility:"visible"}),e(b).remove(),m||p.hide(),i();}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s);},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i});},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(a,t.mode||"hide"),h="show"===r,l="hide"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i();});},e.effects.effect.highlight=function(t,i){var s=e(this),n=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(s,t.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&s.hide(),e.effects.restore(s,n),i();}});},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],h=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=o.css("position"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||("show"===p?b:s),o.to=t.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===m||"both"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),("content"===m||"both"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),c=c.concat(["marginLeft","marginRight"]),l=r.concat(d).concat(c),o.find("*[width]").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l);});})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return "auto"===i?n+"px":s+n+"px";});})),e.effects.removeWrapper(o),i();}});},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),r=t.direction||"both",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=h||["middle","center"],n.restore=!0),n.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n);},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||"hide"),a="hide"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t);},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||"show"),o="show"===a,r="hide"===a,h=o||"hide"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i();}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue();},e.effects.effect.shake=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?"-=":"+=")+h,m[c]=(p?"+=":"-=")+2*h,g[c]=(p?"-=":"+=")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i();}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue();},e.effects.effect.slide=function(t,i){var s,n=e(this),a=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(n,t.mode||"show"),r="show"===o,h=t.direction||"left",l="up"===h||"down"===h?"top":"left",u="up"===h||"left"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n["top"===l?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(l,u?isNaN(s)?"-"+s:-s:s),d[l]=(r?u?"+=":"-=":u?"-=":"+=")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i();}});},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a="fixed"===n.css("position"),o=e("body"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){c.remove(),i();});};});;
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d);}}if(a.support.touch="ontouchend" in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"));},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"));},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1);},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b);},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b);};}}(jQuery);;
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery);}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail" in g&&(m=-1*g.detail),"wheelDelta" in g&&(m=g.wheelDelta),"wheelDeltaY" in g&&(m=g.wheelDeltaY),"wheelDeltaX" in g&&(l=-1*g.wheelDeltaX),"axis" in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY" in g&&(m=-1*g.deltaY,j=m),"deltaX" in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q;}else{if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r;}}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top;}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h);}}function c(){f=null;}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0;}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this));},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height");},getLineHeight:function(b){var c=a(b),d=c["offsetParent" in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16;},getPageHeight:function(b){return a(b).height();},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel");},unmousewheel:function(a){return this.unbind("mousewheel",a);}});});;
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher");}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return {end:b[c]};return !1;}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0;});var e=function(){c||a(d).trigger(a.support.transition.end);};return setTimeout(e,b),this;},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0;}});});}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c);});}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close);};d.VERSION="3.3.2",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove();}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c());};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this;},a(document).on("click.bs.alert.data-api",c,d.prototype.close);}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b);});}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1;};c.VERSION="3.3.2",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c));},this),0);},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change");}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active");};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this;},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault();}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type));});}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle();});}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart" in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this));};c.VERSION="3.3.2",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return;}a.preventDefault();}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this;},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active);},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f);},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a);}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a));},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this;},c.prototype.next=function(){return this.sliding?void 0:this.slide("next");},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev");},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active");}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m);},0);}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this;}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this;};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault();}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data());});});}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d);}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]();});}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a(this.options.trigger).filter('[href="#'+b.id+'"], [data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle();};d.VERSION="3.3.2",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height";},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse");};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i]);}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse");};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this);}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]();},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e);},this)).end();},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c);};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this;},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":a.extend({},e.data(),{trigger:this});c.call(f,h);});}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)));}));}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent();}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c);});}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle);};g.VERSION="3.3.2",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart" in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h);}return !1;}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus");}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this;},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation();}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown);}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d);});}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal");},this));};c.VERSION="3.3.2",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a);},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.options.backdrop&&d.adjustBackdrop(),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$element.find(".modal-dialog").one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f);}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f);}));},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal());},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus");},this));},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide();},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal");},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal");},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal");});},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null;},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this));},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b();}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b();};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g();}else b&&b();},c.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog();},c.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight);},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""});},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""});},c.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar();},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth);},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","");},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b;};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this;},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus");});}),b.call(f,g,this);});}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]());});}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b);};c.VERSION="3.3.2",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else{if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this));}}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle();},c.prototype.getDefaults=function(){return c.DEFAULTS;},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b;},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d);}),b;},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void (c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void (c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show();},c.options.delay.show)):c.show());},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void (c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide();},c.options.delay.hide)):c.hide();},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h);}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e);};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r();}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)});}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l);},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","");},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right");},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b();}var e=this,f=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this);},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","");},c.prototype.hasContent=function(){return this.getTitle();},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f);},c.prototype.getCalculatedOffset=function(a,b,c,d){return "bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width};},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i);}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k);}return e;},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title);},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a;},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template);},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow");},c.prototype.enable=function(){this.enabled=!0;},c.prototype.disable=function(){this.enabled=!1;},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled;},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c);},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type);});};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this;};}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]());});}var c=function(a,b){this.init("popover",a,b);};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.2",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS;},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide();},c.prototype.hasContent=function(){return this.getTitle()||this.getContent();},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content);},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow");},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip;};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this;};}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process();}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]();});}b.VERSION="3.3.2",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight);},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null;}).sort(function(a,b){return a[0]-b[0];}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1]);});},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a]);},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy");},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this;},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data());});});}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]();});}var c=function(b){this.element=a(b);};c.VERSION="3.3.2",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]});});}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e();}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in");};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this;};var e=function(c){c.preventDefault(),b.call(a(this),"show");};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e);}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]();});}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition();};c.VERSION="3.3.2",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1;},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a;},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1);},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a("body").height();"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix");}"bottom"==h&&this.$element.offset({top:g-b-f});}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this;},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d);});});}(jQuery);;
(function($,undefined){var $window=$(window);function UTCDate(){return new Date(Date.UTC.apply(Date,arguments));}function UTCToday(){var today=new Date();return UTCDate(today.getFullYear(),today.getMonth(),today.getDate());}function alias(method){return function(){return this[method].apply(this,arguments);};}var DateArray=(function(){var extras={get:function(i){return this.slice(i)[0];},contains:function(d){var val=d&&d.valueOf();for(var i=0,l=this.length;i<l;i++)if(this[i].valueOf()===val)return i;return -1;},remove:function(i){this.splice(i,1);},replace:function(new_array){if(!new_array)return;if(!$.isArray(new_array))new_array=[new_array];this.clear();this.push.apply(this,new_array);},clear:function(){this.splice(0);},copy:function(){var a=new DateArray();a.replace(this);return a;}};return function(){var a=[];a.push.apply(a,arguments);$.extend(a,extras);return a;};})();var Datepicker=function(element,options){this.dates=new DateArray();this.viewDate=UTCToday();this.focusDate=null;this._process_options(options);this.element=$(element);this.isInline=false;this.isInput=this.element.is('input');this.component=this.element.is('.date')?this.element.find('.add-on, .input-group-addon, .btn'):false;this.hasInput=this.component&&this.element.find('input').length;if(this.component&&this.component.length===0)this.component=false;this.picker=$(DPGlobal.template);this._buildEvents();this._attachEvents();if(this.isInline)this.picker.addClass('datepicker-inline').appendTo(this.element);else this.picker.addClass('datepicker-dropdown dropdown-menu');if(this.o.rtl)this.picker.addClass('datepicker-rtl');this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find('tfoot th.today').attr('colspan',function(i,val){return parseInt(val)+1;});this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline)this.show();};Datepicker.prototype={constructor:Datepicker,_process_options:function(opts){this._o=$.extend({},this._o,opts);var o=this.o=$.extend({},this._o);var lang=o.language;if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])lang=defaults.language;}o.language=lang;switch(o.startView){case 2:case 'decade':o.startView=2;break;case 1:case 'year':o.startView=1;break;default:o.startView=0;}switch(o.minViewMode){case 1:case 'months':o.minViewMode=1;break;case 2:case 'years':o.minViewMode=2;break;default:o.minViewMode=0;}o.startView=Math.max(o.startView,o.minViewMode);if(o.multidate!==true){o.multidate=Number(o.multidate)||false;if(o.multidate!==false)o.multidate=Math.max(0,o.multidate);else o.multidate=1;}o.multidateSeparator=String(o.multidateSeparator);o.weekStart%=7;o.weekEnd=((o.weekStart+6)%7);var format=DPGlobal.parseFormat(o.format);if(o.startDate!==-Infinity)if(!!o.startDate)if(o.startDate instanceof Date)o.startDate=this._local_to_utc(this._zero_time(o.startDate));else o.startDate=DPGlobal.parseDate(o.startDate,format,o.language);else o.startDate=-Infinity;if(o.endDate!==Infinity)if(!!o.endDate)if(o.endDate instanceof Date)o.endDate=this._local_to_utc(this._zero_time(o.endDate));else o.endDate=DPGlobal.parseDate(o.endDate,format,o.language);else o.endDate=Infinity;o.daysOfWeekDisabled=o.daysOfWeekDisabled||[];if(!$.isArray(o.daysOfWeekDisabled))o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/);o.daysOfWeekDisabled=$.map(o.daysOfWeekDisabled,function(d){return parseInt(d,10);});var plc=String(o.orientation).toLowerCase().split(/\s+/g),_plc=o.orientation.toLowerCase();plc=$.grep(plc,function(word){return (/^auto|left|right|top|bottom$/).test(word);});o.orientation={x:'auto',y:'auto'};if(!_plc||_plc==='auto');else if(plc.length===1)switch(plc[0]){case 'top':case 'bottom':o.orientation.y=plc[0];break;case 'left':case 'right':o.orientation.x=plc[0];break;}else{_plc=$.grep(plc,function(word){return (/^left|right$/).test(word);});o.orientation.x=_plc[0]||'auto';_plc=$.grep(plc,function(word){return (/^top|bottom$/).test(word);});o.orientation.y=_plc[0]||'auto';}},_events:[],_secondaryEvents:[],_applyEvents:function(evs){for(var i=0,el,ch,ev;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1];}else{if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2];}}el.on(ev,ch);}},_unapplyEvents:function(evs){for(var i=0,el,ev,ch;i<evs.length;i++){el=evs[i][0];if(evs[i].length===2){ch=undefined;ev=evs[i][1];}else{if(evs[i].length===3){ch=evs[i][1];ev=evs[i][2];}}el.off(ev,ch);}},_buildEvents:function(){if(this.isInput)this._events=[[this.element,{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){if($.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update();},this),keydown:$.proxy(this.keydown,this)}]];else if(this.component&&this.hasInput)this._events=[[this.element.find('input'),{focus:$.proxy(this.show,this),keyup:$.proxy(function(e){if($.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1)this.update();},this),keydown:$.proxy(this.keydown,this)}],[this.component,{click:$.proxy(this.show,this)}]];else if(this.element.is('div'))this.isInline=true;else this._events=[[this.element,{click:$.proxy(this.show,this)}]];this._events.push([this.element,'*',{blur:$.proxy(function(e){this._focused_from=e.target;},this)}],[this.element,{blur:$.proxy(function(e){this._focused_from=e.target;},this)}]);this._secondaryEvents=[[this.picker,{click:$.proxy(this.click,this)}],[$(window),{resize:$.proxy(this.place,this)}],[$(document),{'mousedown touchstart':$.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length))this.hide();},this)}]];},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events);},_detachEvents:function(){this._unapplyEvents(this._events);},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents);},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents);},_trigger:function(event,altdate){var date=altdate||this.dates.get(-1),local_date=this._utc_to_local(date);this.element.trigger({type:event,date:local_date,dates:$.map(this.dates,this._utc_to_local),format:$.proxy(function(ix,format){if(arguments.length===0){ix=this.dates.length-1;format=this.o.format;}else{if(typeof ix==='string'){format=ix;ix=this.dates.length-1;}}format=format||this.o.format;var date=this.dates.get(ix);return DPGlobal.formatDate(date,format,this.o.language);},this)});},show:function(){if(!this.isInline)this.picker.appendTo('body');this.picker.show();this.place();this._attachSecondaryEvents();this._trigger('show');},hide:function(){if(this.isInline)return;if(!this.picker.is(':visible'))return;this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find('input').val()))this.setValue();this._trigger('hide');},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput)delete this.element.data().date;},_utc_to_local:function(utc){return utc&&new Date(utc.getTime()+(utc.getTimezoneOffset()*60000));},_local_to_utc:function(local){return local&&new Date(local.getTime()-(local.getTimezoneOffset()*60000));},_zero_time:function(local){return local&&new Date(local.getFullYear(),local.getMonth(),local.getDate());},_zero_utc_time:function(utc){return utc&&new Date(Date.UTC(utc.getUTCFullYear(),utc.getUTCMonth(),utc.getUTCDate()));},getDates:function(){return $.map(this.dates,this._utc_to_local);},getUTCDates:function(){return $.map(this.dates,function(d){return new Date(d);});},getDate:function(){return this._utc_to_local(this.getUTCDate());},getUTCDate:function(){return new Date(this.dates.get(-1));},setDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,args);this._trigger('changeDate');this.setValue();},setUTCDates:function(){var args=$.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,$.map(args,this._utc_to_local));this._trigger('changeDate');this.setValue();},setDate:alias('setDates'),setUTCDate:alias('setUTCDates'),setValue:function(){var formatted=this.getFormattedDate();if(!this.isInput){if(this.component)this.element.find('input').val(formatted).change();}else this.element.val(formatted).change();},getFormattedDate:function(format){if(format===undefined)format=this.o.format;var lang=this.o.language;return $.map(this.dates,function(d){return DPGlobal.formatDate(d,format,lang);}).join(this.o.multidateSeparator);},setStartDate:function(startDate){this._process_options({startDate});this.update();this.updateNavArrows();},setEndDate:function(endDate){this._process_options({endDate});this.update();this.updateNavArrows();},setDaysOfWeekDisabled:function(daysOfWeekDisabled){this._process_options({daysOfWeekDisabled});this.update();this.updateNavArrows();},place:function(){if(this.isInline)return;var calendarWidth=this.picker.outerWidth(),calendarHeight=this.picker.outerHeight(),visualPadding=10,windowWidth=$window.width(),windowHeight=$window.height(),scrollTop=$window.scrollTop();var zIndex=parseInt(this.element.parents().filter(function(){return $(this).css('z-index')!=='auto';}).first().css('z-index'))+10;var offset=this.component?this.component.parent().offset():this.element.offset();var height=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var width=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var left=offset.left,top=offset.top;this.picker.removeClass('datepicker-orient-top datepicker-orient-bottom '+'datepicker-orient-right datepicker-orient-left');if(this.o.orientation.x!=='auto'){this.picker.addClass('datepicker-orient-'+this.o.orientation.x);if(this.o.orientation.x==='right')left-=calendarWidth-width;}else{this.picker.addClass('datepicker-orient-left');if(offset.left<0)left-=offset.left-visualPadding;else{if(offset.left+calendarWidth>windowWidth)left=windowWidth-calendarWidth-visualPadding;}}var yorient=this.o.orientation.y,top_overflow,bottom_overflow;if(yorient==='auto'){top_overflow=-scrollTop+offset.top-calendarHeight;bottom_overflow=scrollTop+windowHeight-(offset.top+height+calendarHeight);if(Math.max(top_overflow,bottom_overflow)===bottom_overflow)yorient='top';else yorient='bottom';}this.picker.addClass('datepicker-orient-'+yorient);if(yorient==='top')top+=height;else top-=calendarHeight+parseInt(this.picker.css('padding-top'));this.picker.css({top,left,zIndex});},_allow_update:true,update:function(){if(!this._allow_update)return;var oldDates=this.dates.copy(),dates=[],fromArgs=false;if(arguments.length){$.each(arguments,$.proxy(function(i,date){if(date instanceof Date)date=this._local_to_utc(date);dates.push(date);},this));fromArgs=true;}else{dates=this.isInput?this.element.val():this.element.data('date')||this.element.find('input').val();if(dates&&this.o.multidate)dates=dates.split(this.o.multidateSeparator);else dates=[dates];delete this.element.data().date;}dates=$.map(dates,$.proxy(function(date){return DPGlobal.parseDate(date,this.o.format,this.o.language);},this));dates=$.grep(dates,$.proxy(function(date){return (date<this.o.startDate||date>this.o.endDate||!date);},this),true);this.dates.replace(dates);if(this.dates.length)this.viewDate=new Date(this.dates.get(-1));else if(this.viewDate<this.o.startDate)this.viewDate=new Date(this.o.startDate);else{if(this.viewDate>this.o.endDate)this.viewDate=new Date(this.o.endDate);}if(fromArgs)this.setValue();else{if(dates.length)if(String(oldDates)!==String(this.dates))this._trigger('changeDate');}if(!this.dates.length&&oldDates.length)this._trigger('clearDate');this.fill();},fillDow:function(){var dowCnt=this.o.weekStart,html='<tr>';if(this.o.calendarWeeks){var cell='<th class="cw">&nbsp;</th>';html+=cell;this.picker.find('.datepicker-days thead tr:first-child').prepend(cell);}while(dowCnt<this.o.weekStart+7)html+='<th class="dow">'+dates[this.o.language].daysMin[(dowCnt++)%7]+'</th>';html+='</tr>';this.picker.find('.datepicker-days thead').append(html);},fillMonths:function(){var html='',i=0;while(i<12)html+='<span class="month">'+dates[this.o.language].monthsShort[i++]+'</span>';this.picker.find('.datepicker-months td').html(html);},setRange:function(range){if(!range||!range.length)delete this.range;else this.range=$.map(range,function(d){return d.valueOf();});this.fill();},getClassNames:function(date){var cls=[],year=this.viewDate.getUTCFullYear(),month=this.viewDate.getUTCMonth(),today=new Date();if(date.getUTCFullYear()<year||(date.getUTCFullYear()===year&&date.getUTCMonth()<month))cls.push('old');else{if(date.getUTCFullYear()>year||(date.getUTCFullYear()===year&&date.getUTCMonth()>month))cls.push('new');}if(this.focusDate&&date.valueOf()===this.focusDate.valueOf())cls.push('focused');if(this.o.todayHighlight&&date.getUTCFullYear()===today.getFullYear()&&date.getUTCMonth()===today.getMonth()&&date.getUTCDate()===today.getDate())cls.push('today');if(this.dates.contains(date)!==-1)cls.push('active');if(date.valueOf()<this.o.startDate||date.valueOf()>this.o.endDate||$.inArray(date.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)cls.push('disabled');if(this.range){if(date>this.range[0]&&date<this.range[this.range.length-1])cls.push('range');if($.inArray(date.valueOf(),this.range)!==-1)cls.push('selected');}return cls;},fill:function(){var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth(),startYear=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,startMonth=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,endYear=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,endMonth=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,todaytxt=dates[this.o.language].today||dates['en'].today||'',cleartxt=dates[this.o.language].clear||dates['en'].clear||'',tooltip;this.picker.find('.datepicker-days thead th.datepicker-switch').text(dates[this.o.language].months[month]+' '+year);this.picker.find('tfoot th.today').text(todaytxt).toggle(this.o.todayBtn!==false);this.picker.find('tfoot th.clear').text(cleartxt).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var prevMonth=UTCDate(year,month-1,28),day=DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(),prevMonth.getUTCMonth());prevMonth.setUTCDate(day);prevMonth.setUTCDate(day-(prevMonth.getUTCDay()-this.o.weekStart+7)%7);var nextMonth=new Date(prevMonth);nextMonth.setUTCDate(nextMonth.getUTCDate()+42);nextMonth=nextMonth.valueOf();var html=[];var clsName;while(prevMonth.valueOf()<nextMonth){if(prevMonth.getUTCDay()===this.o.weekStart){html.push('<tr>');if(this.o.calendarWeeks){var ws=new Date(+prevMonth+(this.o.weekStart-prevMonth.getUTCDay()-7)%7*864e5),th=new Date(Number(ws)+(7+4-ws.getUTCDay())%7*864e5),yth=new Date(Number(yth=UTCDate(th.getUTCFullYear(),0,1))+(7+4-yth.getUTCDay())%7*864e5),calWeek=(th-yth)/864e5/7+1;html.push('<td class="cw">'+calWeek+'</td>');}}clsName=this.getClassNames(prevMonth);clsName.push('day');if(this.o.beforeShowDay!==$.noop){var before=this.o.beforeShowDay(this._utc_to_local(prevMonth));if(before===undefined)before={};else if(typeof (before)==='boolean')before={enabled:before};else{if(typeof (before)==='string')before={classes:before};}if(before.enabled===false)clsName.push('disabled');if(before.classes)clsName=clsName.concat(before.classes.split(/\s+/));if(before.tooltip)tooltip=before.tooltip;}clsName=$.unique(clsName);html.push('<td class="'+clsName.join(' ')+'"'+(tooltip?' title="'+tooltip+'"':'')+'>'+prevMonth.getUTCDate()+'</td>');if(prevMonth.getUTCDay()===this.o.weekEnd)html.push('</tr>');prevMonth.setUTCDate(prevMonth.getUTCDate()+1);}this.picker.find('.datepicker-days tbody').empty().append(html.join(''));var months=this.picker.find('.datepicker-months').find('th:eq(1)').text(year).end().find('span').removeClass('active');$.each(this.dates,function(i,d){if(d.getUTCFullYear()===year)months.eq(d.getUTCMonth()).addClass('active');});if(year<startYear||year>endYear)months.addClass('disabled');if(year===startYear)months.slice(0,startMonth).addClass('disabled');if(year===endYear)months.slice(endMonth+1).addClass('disabled');html='';year=parseInt(year/10,10)*10;var yearCont=this.picker.find('.datepicker-years').find('th:eq(1)').text(year+'-'+(year+9)).end().find('td');year-=1;var years=$.map(this.dates,function(d){return d.getUTCFullYear();}),classes;for(var i=-1;i<11;i++){classes=['year'];if(i===-1)classes.push('old');else{if(i===10)classes.push('new');}if($.inArray(year,years)!==-1)classes.push('active');if(year<startYear||year>endYear)classes.push('disabled');html+='<span class="'+classes.join(' ')+'">'+year+'</span>';year+=1;}yearCont.html(html);},updateNavArrows:function(){if(!this._allow_update)return;var d=new Date(this.viewDate),year=d.getUTCFullYear(),month=d.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear()&&month<=this.o.startDate.getUTCMonth())this.picker.find('.prev').css({visibility:'hidden'});else this.picker.find('.prev').css({visibility:'visible'});if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear()&&month>=this.o.endDate.getUTCMonth())this.picker.find('.next').css({visibility:'hidden'});else this.picker.find('.next').css({visibility:'visible'});break;case 1:case 2:if(this.o.startDate!==-Infinity&&year<=this.o.startDate.getUTCFullYear())this.picker.find('.prev').css({visibility:'hidden'});else this.picker.find('.prev').css({visibility:'visible'});if(this.o.endDate!==Infinity&&year>=this.o.endDate.getUTCFullYear())this.picker.find('.next').css({visibility:'hidden'});else this.picker.find('.next').css({visibility:'visible'});break;}},click:function(e){e.preventDefault();var target=$(e.target).closest('span, td, th'),year,month,day;if(target.length===1)switch(target[0].nodeName.toLowerCase()){case 'th':switch(target[0].className){case 'datepicker-switch':this.showMode(1);break;case 'prev':case 'next':var dir=DPGlobal.modes[this.viewMode].navStep*(target[0].className==='prev'?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,dir);this._trigger('changeMonth',this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,dir);if(this.viewMode===1)this._trigger('changeYear',this.viewDate);break;}this.fill();break;case 'today':var date=new Date();date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);this.showMode(-2);var which=this.o.todayBtn==='linked'?null:'view';this._setDate(date,which);break;case 'clear':var element;if(this.isInput)element=this.element;else{if(this.component)element=this.element.find('input');}if(element)element.val("").change();this.update();this._trigger('changeDate');if(this.o.autoclose)this.hide();break;}break;case 'span':if(!target.is('.disabled')){this.viewDate.setUTCDate(1);if(target.is('.month')){day=1;month=target.parent().find('span').index(target);year=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(month);this._trigger('changeMonth',this.viewDate);if(this.o.minViewMode===1)this._setDate(UTCDate(year,month,day));}else{day=1;month=0;year=parseInt(target.text(),10)||0;this.viewDate.setUTCFullYear(year);this._trigger('changeYear',this.viewDate);if(this.o.minViewMode===2)this._setDate(UTCDate(year,month,day));}this.showMode(-1);this.fill();}break;case 'td':if(target.is('.day')&&!target.is('.disabled')){day=parseInt(target.text(),10)||1;year=this.viewDate.getUTCFullYear();month=this.viewDate.getUTCMonth();if(target.is('.old'))if(month===0){month=11;year-=1;}else month-=1;else{if(target.is('.new'))if(month===11){month=0;year+=1;}else month+=1;}this._setDate(UTCDate(year,month,day));}break;}if(this.picker.is(':visible')&&this._focused_from)$(this._focused_from).focus();delete this._focused_from;},_toggle_multidate:function(date){var ix=this.dates.contains(date);if(!date)this.dates.clear();else if(ix!==-1)this.dates.remove(ix);else this.dates.push(date);if(typeof this.o.multidate==='number')while(this.dates.length>this.o.multidate)this.dates.remove(0);},_setDate:function(date,which){if(!which||which==='date')this._toggle_multidate(date&&new Date(date));if(!which||which==='view')this.viewDate=date&&new Date(date);this.fill();this.setValue();this._trigger('changeDate');var element;if(this.isInput)element=this.element;else{if(this.component)element=this.element.find('input');}if(element)element.change();if(this.o.autoclose&&(!which||which==='date'))this.hide();},moveMonth:function(date,dir){if(!date)return undefined;if(!dir)return date;var new_date=new Date(date.valueOf()),day=new_date.getUTCDate(),month=new_date.getUTCMonth(),mag=Math.abs(dir),new_month,test;dir=dir>0?1:-1;if(mag===1){test=dir===-1?function(){return new_date.getUTCMonth()===month;}:function(){return new_date.getUTCMonth()!==new_month;};new_month=month+dir;new_date.setUTCMonth(new_month);if(new_month<0||new_month>11)new_month=(new_month+12)%12;}else{for(var i=0;i<mag;i++)new_date=this.moveMonth(new_date,dir);new_month=new_date.getUTCMonth();new_date.setUTCDate(day);test=function(){return new_month!==new_date.getUTCMonth();};}while(test()){new_date.setUTCDate(--day);new_date.setUTCMonth(new_month);}return new_date;},moveYear:function(date,dir){return this.moveMonth(date,dir*12);},dateWithinRange:function(date){return date>=this.o.startDate&&date<=this.o.endDate;},keydown:function(e){if(this.picker.is(':not(:visible)')){if(e.keyCode===27)this.show();return;}var dateChanged=false,dir,newDate,newViewDate,focusDate=this.focusDate||this.viewDate;switch(e.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();}else this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;dir=e.keyCode===37?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveYear(focusDate,dir);this._trigger('changeYear',this.viewDate);}else if(e.shiftKey){newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveMonth(focusDate,dir);this._trigger('changeMonth',this.viewDate);}else{newDate=new Date(this.dates.get(-1)||UTCToday());newDate.setUTCDate(newDate.getUTCDate()+dir);newViewDate=new Date(focusDate);newViewDate.setUTCDate(focusDate.getUTCDate()+dir);}if(this.dateWithinRange(newDate)){this.focusDate=this.viewDate=newViewDate;this.setValue();this.fill();e.preventDefault();}break;case 38:case 40:if(!this.o.keyboardNavigation)break;dir=e.keyCode===38?-1:1;if(e.ctrlKey){newDate=this.moveYear(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveYear(focusDate,dir);this._trigger('changeYear',this.viewDate);}else if(e.shiftKey){newDate=this.moveMonth(this.dates.get(-1)||UTCToday(),dir);newViewDate=this.moveMonth(focusDate,dir);this._trigger('changeMonth',this.viewDate);}else{newDate=new Date(this.dates.get(-1)||UTCToday());newDate.setUTCDate(newDate.getUTCDate()+dir*7);newViewDate=new Date(focusDate);newViewDate.setUTCDate(focusDate.getUTCDate()+dir*7);}if(this.dateWithinRange(newDate)){this.focusDate=this.viewDate=newViewDate;this.setValue();this.fill();e.preventDefault();}break;case 32:break;case 13:focusDate=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(focusDate);dateChanged=true;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(':visible')){e.preventDefault();if(this.o.autoclose)this.hide();}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break;}if(dateChanged){if(this.dates.length)this._trigger('changeDate');else this._trigger('clearDate');var element;if(this.isInput)element=this.element;else{if(this.component)element=this.element.find('input');}if(element)element.change();}},showMode:function(dir){if(dir)this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+dir));this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).css('display','block');this.updateNavArrows();}};var DateRangePicker=function(element,options){this.element=$(element);this.inputs=$.map(options.inputs,function(i){return i.jquery?i[0]:i;});delete options.inputs;$(this.inputs).datepicker(options).bind('changeDate',$.proxy(this.dateUpdated,this));this.pickers=$.map(this.inputs,function(i){return $(i).data('datepicker');});this.updateDates();};DateRangePicker.prototype={updateDates:function(){this.dates=$.map(this.pickers,function(i){return i.getUTCDate();});this.updateRanges();},updateRanges:function(){var range=$.map(this.dates,function(d){return d.valueOf();});$.each(this.pickers,function(i,p){p.setRange(range);});},dateUpdated:function(e){if(this.updating)return;this.updating=true;var dp=$(e.target).data('datepicker'),new_date=dp.getUTCDate(),i=$.inArray(e.target,this.inputs),l=this.inputs.length;if(i===-1)return;$.each(this.pickers,function(i,p){if(!p.getUTCDate())p.setUTCDate(new_date);});if(new_date<this.dates[i])while(i>=0&&new_date<this.dates[i])this.pickers[i--].setUTCDate(new_date);else{if(new_date>this.dates[i])while(i<l&&new_date>this.dates[i])this.pickers[i++].setUTCDate(new_date);}this.updateDates();delete this.updating;},remove:function(){$.map(this.pickers,function(p){p.remove();});delete this.element.data().datepicker;}};function opts_from_el(el,prefix){var data=$(el).data(),out={},inkey,replace=new RegExp('^'+prefix.toLowerCase()+'([A-Z])');prefix=new RegExp('^'+prefix.toLowerCase());function re_lower(_,a){return a.toLowerCase();}for(var key in data)if(prefix.test(key)){inkey=key.replace(replace,re_lower);out[inkey]=data[key];}return out;}function opts_from_locale(lang){var out={};if(!dates[lang]){lang=lang.split('-')[0];if(!dates[lang])return;}var d=dates[lang];$.each(locale_opts,function(i,k){if(k in d)out[k]=d[k];});return out;}var old=$.fn.datepicker;$.fn.datepicker=function(option){var args=Array.apply(null,arguments);args.shift();var internal_return;this.each(function(){var $this=$(this),data=$this.data('datepicker'),options=typeof option==='object'&&option;if(!data){var elopts=opts_from_el(this,'date'),xopts=$.extend({},defaults,elopts,options),locopts=opts_from_locale(xopts.language),opts=$.extend({},defaults,locopts,elopts,options);if($this.is('.input-daterange')||opts.inputs){var ropts={inputs:opts.inputs||$this.find('input').toArray()};$this.data('datepicker',(data=new DateRangePicker(this,$.extend(opts,ropts))));}else $this.data('datepicker',(data=new Datepicker(this,opts)));}if(typeof option==='string'&&typeof data[option]==='function'){internal_return=data[option].apply(data,args);if(internal_return!==undefined)return false;}});if(internal_return!==undefined)return internal_return;else return this;};var defaults=$.fn.datepicker.defaults={autoclose:false,beforeShowDay:$.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:'mm/dd/yyyy',keyboardNavigation:true,language:'en',minViewMode:0,multidate:false,multidateSeparator:',',orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var locale_opts=$.fn.datepicker.locale_opts=['format','rtl','weekStart'];$.fn.datepicker.Constructor=Datepicker;var dates=$.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var DPGlobal={modes:[{clsName:'days',navFnc:'Month',navStep:1},{clsName:'months',navFnc:'FullYear',navStep:1},{clsName:'years',navFnc:'FullYear',navStep:10}],isLeapYear:function(year){return (((year%4===0)&&(year%100!==0))||(year%400===0));},getDaysInMonth:function(year,month){return [31,(DPGlobal.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(format){var separators=format.replace(this.validParts,'\0').split('\0'),parts=format.match(this.validParts);if(!separators||!separators.length||!parts||parts.length===0)throw new Error("Invalid date format.");return {separators,parts};},parseDate:function(date,format,language){if(!date)return undefined;if(date instanceof Date)return date;if(typeof format==='string')format=DPGlobal.parseFormat(format);var part_re=/([\-+]\d+)([dmwy])/,parts=date.match(/([\-+]\d+)([dmwy])/g),part,dir,i;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(date)){date=new Date();for(i=0;i<parts.length;i++){part=part_re.exec(parts[i]);dir=parseInt(part[1]);switch(part[2]){case 'd':date.setUTCDate(date.getUTCDate()+dir);break;case 'm':date=Datepicker.prototype.moveMonth.call(Datepicker.prototype,date,dir);break;case 'w':date.setUTCDate(date.getUTCDate()+dir*7);break;case 'y':date=Datepicker.prototype.moveYear.call(Datepicker.prototype,date,dir);break;}}return UTCDate(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),0,0,0);}parts=date&&date.match(this.nonpunctuation)||[];date=new Date();var parsed={},setters_order=['yyyy','yy','M','MM','m','mm','d','dd'],setters_map={yyyy:function(d,v){return d.setUTCFullYear(v);},yy:function(d,v){return d.setUTCFullYear(2000+v);},m:function(d,v){if(isNaN(d))return d;v-=1;while(v<0)v+=12;v%=12;d.setUTCMonth(v);while(d.getUTCMonth()!==v)d.setUTCDate(d.getUTCDate()-1);return d;},d:function(d,v){return d.setUTCDate(v);}},val,filtered;setters_map['M']=setters_map['MM']=setters_map['mm']=setters_map['m'];setters_map['dd']=setters_map['d'];date=UTCDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0);var fparts=format.parts.slice();if(parts.length!==fparts.length)fparts=$(fparts).filter(function(i,p){return $.inArray(p,setters_order)!==-1;}).toArray();function match_part(){var m=this.slice(0,parts[i].length),p=parts[i].slice(0,m.length);return m===p;}if(parts.length===fparts.length){var cnt;for(i=0,cnt=fparts.length;i<cnt;i++){val=parseInt(parts[i],10);part=fparts[i];if(isNaN(val))switch(part){case 'MM':filtered=$(dates[language].months).filter(match_part);val=$.inArray(filtered[0],dates[language].months)+1;break;case 'M':filtered=$(dates[language].monthsShort).filter(match_part);val=$.inArray(filtered[0],dates[language].monthsShort)+1;break;}parsed[part]=val;}var _date,s;for(i=0;i<setters_order.length;i++){s=setters_order[i];if(s in parsed&&!isNaN(parsed[s])){_date=new Date(date);setters_map[s](_date,parsed[s]);if(!isNaN(_date))date=_date;}}}return date;},formatDate:function(date,format,language){if(!date)return '';if(typeof format==='string')format=DPGlobal.parseFormat(format);var val={d:date.getUTCDate(),D:dates[language].daysShort[date.getUTCDay()],DD:dates[language].days[date.getUTCDay()],m:date.getUTCMonth()+1,M:dates[language].monthsShort[date.getUTCMonth()],MM:dates[language].months[date.getUTCMonth()],yy:date.getUTCFullYear().toString().substring(2),yyyy:date.getUTCFullYear()};val.dd=(val.d<10?'0':'')+val.d;val.mm=(val.m<10?'0':'')+val.m;date=[];var seps=$.extend([],format.separators);for(var i=0,cnt=format.parts.length;i<=cnt;i++){if(seps.length)date.push(seps.shift());date.push(val[format.parts[i]]);}return date.join('');},headTemplate:'<thead>'+'<tr>'+'<th class="prev">&laquo;</th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next">&raquo;</th>'+'</tr>'+'</thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot>'+'<tr>'+'<th colspan="7" class="today"></th>'+'</tr>'+'<tr>'+'<th colspan="7" class="clear"></th>'+'</tr>'+'</tfoot>'};DPGlobal.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+DPGlobal.headTemplate+'<tbody></tbody>'+DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-months">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table>'+'</div>'+'<div class="datepicker-years">'+'<table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+DPGlobal.footTemplate+'</table>'+'</div>'+'</div>';$.fn.datepicker.DPGlobal=DPGlobal;$.fn.datepicker.noConflict=function(){$.fn.datepicker=old;return this;};$(document).on('focus.datepicker.data-api click.datepicker.data-api','[data-provide="datepicker"]',function(e){var $this=$(this);if($this.data('datepicker'))return;e.preventDefault();$this.datepicker('show');});$(function(){$('[data-provide="datepicker-inline"]').datepicker();});}(window.jQuery));;
(function(){'use strict';if(navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement('style');msViewportStyle.appendChild(document.createTextNode('@-ms-viewport{width:auto!important}'));document.querySelector('head').appendChild(msViewportStyle);}})();;
!function(a,b,c){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.qtip&&a(jQuery);}(function(d){"use strict";function e(a,b,c,e){this.id=c,this.target=a,this.tooltip=G,this.elements={target:a},this._id=T+"-"+c,this.timers={img:{}},this.options=b,this.plugins={},this.cache={event:{},target:d(),disabled:F,attr:e,onTooltip:F,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=F;}function f(a){return a===G||"object"!==d.type(a);}function g(a){return !(d.isFunction(a)||a&&a.attr||a.length||"object"===d.type(a)&&(a.jquery||a.then));}function h(a){var b,c,e,h;return f(a)?F:(f(a.metadata)&&(a.metadata={type:a.metadata}),"content" in a&&(b=a.content,f(b)||b.jquery||b.done?b=a.content={text:c=g(b)?F:b}:c=b.text,"ajax" in b&&(e=b.ajax,h=e&&e.once!==F,delete b.ajax,b.text=function(a,b){var f=c||d(this).attr(b.options.content.attr)||"Loading...",g=d.ajax(d.extend({},e,{context:b})).then(e.success,G,e.error).then(function(a){return a&&h&&b.set("content.text",a),a;},function(a,c,d){b.destroyed||0===a.status||b.set("content.text",c+": "+d);});return h?f:(b.set("content.text",f),g);}),"title" in b&&(f(b.title)||(b.button=b.title.button,b.title=b.title.text),g(b.title||F)&&(b.title=F))),"position" in a&&f(a.position)&&(a.position={my:a.position,at:a.position}),"show" in a&&f(a.show)&&(a.show=a.show.jquery?{target:a.show}:a.show===E?{ready:E}:{event:a.show}),"hide" in a&&f(a.hide)&&(a.hide=a.hide.jquery?{target:a.hide}:{event:a.hide}),"style" in a&&f(a.style)&&(a.style={classes:a.style}),d.each(S,function(){this.sanitize&&this.sanitize(a);}),a);}function i(a,b){for(var c,d=0,e=a,f=b.split(".");e=e[f[d++]];)d<f.length&&(c=e);return [c||a,f.pop()];}function j(a,b){var c,d,e;for(c in this.checks)for(d in this.checks[c])(e=new RegExp(d,"i").exec(a))&&(b.push(e),("builtin"===c||this.plugins[c])&&this.checks[c][d].apply(this.plugins[c]||this,b));}function k(a){return W.concat("").join(a?"-"+a+" ":" ");}function l(c){return c&&{type:c.type,pageX:c.pageX,pageY:c.pageY,target:c.target,relatedTarget:c.relatedTarget,scrollX:c.scrollX||a.pageXOffset||b.body.scrollLeft||b.documentElement.scrollLeft,scrollY:c.scrollY||a.pageYOffset||b.body.scrollTop||b.documentElement.scrollTop}||{};}function m(a,b){return b>0?setTimeout(d.proxy(a,this),b):(a.call(this),void 0);}function n(a){return this.tooltip.hasClass(bb)?F:(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=m.call(this,function(){this.toggle(E,a);},this.options.show.delay),void 0);}function o(a){if(this.tooltip.hasClass(bb))return F;var b=d(a.relatedTarget),c=b.closest(X)[0]===this.tooltip[0],e=b[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==b[0]&&"mouse"===this.options.position.target&&c||this.options.hide.fixed&&/mouse(out|leave|move)/.test(a.type)&&(c||e))try{a.preventDefault(),a.stopImmediatePropagation();}catch(f){}else this.timers.hide=m.call(this,function(){this.toggle(F,a);},this.options.hide.delay,this);}function p(a){return this.tooltip.hasClass(bb)||!this.options.hide.inactive?F:(clearTimeout(this.timers.inactive),this.timers.inactive=m.call(this,function(){this.hide(a);},this.options.hide.inactive),void 0);}function q(a){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(a);}function r(a,c,e){d(b.body).delegate(a,(c.split?c:c.join(ib+" "))+ib,function(){var a=z.api[d.attr(this,V)];a&&!a.disabled&&e.apply(a,arguments);});}function s(a,c,f){var g,i,j,k,l,m=d(b.body),n=a[0]===b?m:a,o=a.metadata?a.metadata(f.metadata):G,p="html5"===f.metadata.type&&o?o[f.metadata.name]:G,q=a.data(f.metadata.name||"qtipopts");try{q="string"==typeof q?d.parseJSON(q):q;}catch(r){}if(k=d.extend(E,{},z.defaults,f,"object"==typeof q?h(q):G,h(p||o)),i=k.position,k.id=c,"boolean"==typeof k.content.text){if(j=a.attr(k.content.attr),k.content.attr===F||!j)return F;k.content.text=j;}if(i.container.length||(i.container=m),i.target===F&&(i.target=n),k.show.target===F&&(k.show.target=n),k.show.solo===E&&(k.show.solo=i.container.closest("body")),k.hide.target===F&&(k.hide.target=n),k.position.viewport===E&&(k.position.viewport=i.container),i.container=i.container.eq(0),i.at=new B(i.at,E),i.my=new B(i.my),a.data(T))if(k.overwrite)a.qtip("destroy",!0);else{if(k.overwrite===F)return F;}return a.attr(U,c),k.suppress&&(l=a.attr("title"))&&a.removeAttr("title").attr(db,l).attr("title",""),g=new e(a,k,c,!!j),a.data(T,g),a.one("remove.qtip-"+c+" removeqtip.qtip-"+c,function(){var a;(a=d(this).data(T))&&a.destroy(!0);}),g;}function t(a){return a.charAt(0).toUpperCase()+a.slice(1);}function u(a,b){var d,e,f=b.charAt(0).toUpperCase()+b.slice(1),g=(b+" "+tb.join(f+" ")+f).split(" "),h=0;if(sb[b])return a.css(sb[b]);for(;d=g[h++];)if((e=a.css(d))!==c)return sb[b]=d,e;}function v(a,b){return Math.ceil(parseFloat(u(a,b)));}function w(a,b){this._ns="tip",this.options=b,this.offset=b.offset,this.size=[b.width,b.height],this.init(this.qtip=a);}function x(a,b){this.options=b,this._ns="-modal",this.init(this.qtip=a);}function y(a){this._ns="ie6",this.init(this.qtip=a);}var z,A,B,C,D,E=!0,F=!1,G=null,H="x",I="y",J="width",K="height",L="top",M="left",N="bottom",O="right",P="center",Q="flipinvert",R="shift",S={},T="qtip",U="data-hasqtip",V="data-qtip-id",W=["ui-widget","ui-tooltip"],X="."+T,Y="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),Z=T+"-fixed",$=T+"-default",_=T+"-focus",ab=T+"-hover",bb=T+"-disabled",cb="_replacedByqTip",db="oldtitle",eb={ie:function(){for(var a=3,c=b.createElement("div");(c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c.getElementsByTagName("i")[0];);return a>4?a:0/0;}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||F};A=e.prototype,A._when=function(a){return d.when.apply(d,a);},A.render=function(a){if(this.rendered||this.destroyed)return this;var b,c=this,e=this.options,f=this.cache,g=this.elements,h=e.content.text,i=e.content.title,j=e.content.button,k=e.position,l=("."+this._id+" ",[]);return d.attr(this.target[0],"aria-describedby",this._id),this.tooltip=g.tooltip=b=d("<div/>",{id:this._id,"class":[T,$,e.style.classes,T+"-pos-"+e.position.my.abbrev()].join(" "),width:e.style.width||"",height:e.style.height||"",tracking:"mouse"===k.target&&k.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":F,"aria-describedby":this._id+"-content","aria-hidden":E}).toggleClass(bb,this.disabled).attr(V,this.id).data(T,this).appendTo(k.container).append(g.content=d("<div />",{"class":T+"-content",id:this._id+"-content","aria-atomic":E})),this.rendered=-1,this.positioning=E,i&&(this._createTitle(),d.isFunction(i)||l.push(this._updateTitle(i,F))),j&&this._createButton(),d.isFunction(h)||l.push(this._updateContent(h,F)),this.rendered=E,this._setWidget(),d.each(S,function(a){var b;"render"===this.initialize&&(b=this(c))&&(c.plugins[a]=b);}),this._unassignEvents(),this._assignEvents(),this._when(l).then(function(){c._trigger("render"),c.positioning=F,c.hiddenDuringWait||!e.show.ready&&!a||c.toggle(E,f.event,F),c.hiddenDuringWait=F;}),z.api[this.id]=this,this;},A.destroy=function(a){function b(){if(!this.destroyed){this.destroyed=E;var a=this.target,b=a.attr(db);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),d.each(this.plugins,function(){this.destroy&&this.destroy();}),clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this._unassignEvents(),a.removeData(T).removeAttr(V).removeAttr(U).removeAttr("aria-describedby"),this.options.suppress&&b&&a.attr("title",b).removeAttr(db),this._unbind(a),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=G,delete z.api[this.id];}}return this.destroyed?this.target:(a===E&&"hide"!==this.triggering||!this.rendered?b.call(this):(this.tooltip.one("tooltiphidden",d.proxy(b,this)),!this.triggering&&this.hide()),this.target);},C=A.checks={builtin:{"^id$":function(a,b,c,e){var f=c===E?z.nextid:c,g=T+"-"+f;f!==F&&f.length>0&&!d("#"+g).length?(this._id=g,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):a[b]=e;},"^prerender":function(a,b,c){c&&!this.rendered&&this.render(this.options.show.ready);},"^content.text$":function(a,b,c){this._updateContent(c);},"^content.attr$":function(a,b,c,d){this.options.content.text===this.target.attr(d)&&this._updateContent(this.target.attr(c));},"^content.title$":function(a,b,c){return c?(c&&!this.elements.title&&this._createTitle(),this._updateTitle(c),void 0):this._removeTitle();},"^content.button$":function(a,b,c){this._updateButton(c);},"^content.title.(text|button)$":function(a,b,c){this.set("content."+b,c);},"^position.(my|at)$":function(a,b,c){"string"==typeof c&&(a[b]=new B(c,"at"===b));},"^position.container$":function(a,b,c){this.rendered&&this.tooltip.appendTo(c);},"^show.ready$":function(a,b,c){c&&(!this.rendered&&this.render(E)||this.toggle(E));},"^style.classes$":function(a,b,c,d){this.rendered&&this.tooltip.removeClass(d).addClass(c);},"^style.(width|height)":function(a,b,c){this.rendered&&this.tooltip.css(b,c);},"^style.widget|content.title":function(){this.rendered&&this._setWidget();},"^style.def":function(a,b,c){this.rendered&&this.tooltip.toggleClass($,!!c);},"^events.(render|show|move|hide|focus|blur)$":function(a,b,c){this.rendered&&this.tooltip[(d.isFunction(c)?"":"un")+"bind"]("tooltip"+b,c);},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var a=this.options.position;this.tooltip.attr("tracking","mouse"===a.target&&a.adjust.mouse),this._unassignEvents(),this._assignEvents();}}}},A.get=function(a){if(this.destroyed)return this;var b=i(this.options,a.toLowerCase()),c=b[0][b[1]];return c.precedance?c.string():c;};var fb=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,gb=/^prerender|show\.ready/i;A.set=function(a,b){if(this.destroyed)return this;var c,e=this.rendered,f=F,g=this.options;this.checks;;return "string"==typeof a?(c=a,a={},a[c]=b):a=d.extend({},a),d.each(a,function(b,c){if(e&&gb.test(b))return delete a[b],void 0;var h,j=i(g,b.toLowerCase());h=j[0][j[1]],j[0][j[1]]=c&&c.nodeType?d(c):c,f=fb.test(b)||f,a[b]=[j[0],j[1],c,h];}),h(g),this.positioning=E,d.each(a,d.proxy(j,this)),this.positioning=F,this.rendered&&this.tooltip[0].offsetWidth>0&&f&&this.reposition("mouse"===g.position.target?G:this.cache.event),this;},A._update=function(a,b){var c=this,e=this.cache;return this.rendered&&a?(d.isFunction(a)&&(a=a.call(this.elements.target,e.event,this)||""),d.isFunction(a.then)?(e.waiting=E,a.then(function(a){return e.waiting=F,c._update(a,b);},G,function(a){return c._update(a,b);})):a===F||!a&&""!==a?F:(a.jquery&&a.length>0?b.empty().append(a.css({display:"block",visibility:"visible"})):b.html(a),this._waitForContent(b).then(function(a){a.images&&a.images.length&&c.rendered&&c.tooltip[0].offsetWidth>0&&c.reposition(e.event,!a.length);}))):F;},A._waitForContent=function(a){var b=this.cache;return b.waiting=E,(d.fn.imagesLoaded?a.imagesLoaded():d.Deferred().resolve([])).done(function(){b.waiting=F;}).promise();},A._updateContent=function(a,b){this._update(a,this.elements.content,b);},A._updateTitle=function(a,b){this._update(a,this.elements.title,b)===F&&this._removeTitle(F);},A._createTitle=function(){var a=this.elements,b=this._id+"-title";a.titlebar&&this._removeTitle(),a.titlebar=d("<div />",{"class":T+"-titlebar "+(this.options.style.widget?k("header"):"")}).append(a.title=d("<div />",{id:b,"class":T+"-title","aria-atomic":E})).insertBefore(a.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(a){d(this).toggleClass("ui-state-active ui-state-focus","down"===a.type.substr(-4));}).delegate(".qtip-close","mouseover mouseout",function(a){d(this).toggleClass("ui-state-hover","mouseover"===a.type);}),this.options.content.button&&this._createButton();},A._removeTitle=function(a){var b=this.elements;b.title&&(b.titlebar.remove(),b.titlebar=b.title=b.button=G,a!==F&&this.reposition());},A.reposition=function(c,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=E;var f,g,h=this.cache,i=this.tooltip,j=this.options.position,k=j.target,l=j.my,m=j.at,n=j.viewport,o=j.container,p=j.adjust,q=p.method.split(" "),r=i.outerWidth(F),s=i.outerHeight(F),t=0,u=0,v=i.css("position"),w={left:0,top:0},x=i[0].offsetWidth>0,y=c&&"scroll"===c.type,z=d(a),A=o[0].ownerDocument,B=this.mouse;if(d.isArray(k)&&2===k.length)m={x:M,y:L},w={left:k[0],top:k[1]};else if("mouse"===k)m={x:M,y:L},!B||!B.pageX||!p.mouse&&c&&c.pageX?c&&c.pageX||((!p.mouse||this.options.show.distance)&&h.origin&&h.origin.pageX?c=h.origin:(!c||c&&("resize"===c.type||"scroll"===c.type))&&(c=h.event)):c=B,"static"!==v&&(w=o.offset()),A.body.offsetWidth!==(a.innerWidth||A.documentElement.clientWidth)&&(g=d(b.body).offset()),w={left:c.pageX-w.left+(g&&g.left||0),top:c.pageY-w.top+(g&&g.top||0)},p.mouse&&y&&B&&(w.left-=(B.scrollX||0)-z.scrollLeft(),w.top-=(B.scrollY||0)-z.scrollTop());else{if("event"===k?c&&c.target&&"scroll"!==c.type&&"resize"!==c.type?h.target=d(c.target):c.target||(h.target=this.elements.target):"event"!==k&&(h.target=d(k.jquery?k:this.elements.target)),k=h.target,k=d(k).eq(0),0===k.length)return this;k[0]===b||k[0]===a?(t=eb.iOS?a.innerWidth:k.width(),u=eb.iOS?a.innerHeight:k.height(),k[0]===a&&(w={top:(n||k).scrollTop(),left:(n||k).scrollLeft()})):S.imagemap&&k.is("area")?f=S.imagemap(this,k,m,S.viewport?q:F):S.svg&&k&&k[0].ownerSVGElement?f=S.svg(this,k,m,S.viewport?q:F):(t=k.outerWidth(F),u=k.outerHeight(F),w=k.offset()),f&&(t=f.width,u=f.height,g=f.offset,w=f.position),w=this.reposition.offset(k,w,o),(eb.iOS>3.1&&eb.iOS<4.1||eb.iOS>=4.3&&eb.iOS<4.33||!eb.iOS&&"fixed"===v)&&(w.left-=z.scrollLeft(),w.top-=z.scrollTop()),(!f||f&&f.adjustable!==F)&&(w.left+=m.x===O?t:m.x===P?t/2:0,w.top+=m.y===N?u:m.y===P?u/2:0);}return w.left+=p.x+(l.x===O?-r:l.x===P?-r/2:0),w.top+=p.y+(l.y===N?-s:l.y===P?-s/2:0),S.viewport?(w.adjusted=S.viewport(this,w,j,t,u,r,s),g&&w.adjusted.left&&(w.left+=g.left),g&&w.adjusted.top&&(w.top+=g.top)):w.adjusted={left:0,top:0},this._trigger("move",[w,n.elem||n],c)?(delete w.adjusted,e===F||!x||isNaN(w.left)||isNaN(w.top)||"mouse"===k||!d.isFunction(j.effect)?i.css(w):d.isFunction(j.effect)&&(j.effect.call(i,this,d.extend({},w)),i.queue(function(a){d(this).css({opacity:"",height:""}),eb.ie&&this.style.removeAttribute("filter"),a();})),this.positioning=F,this):this;},A.reposition.offset=function(a,c,e){function f(a,b){c.left+=b*a.scrollLeft(),c.top+=b*a.scrollTop();}if(!e[0])return c;var g,h,i,j,k=d(a[0].ownerDocument),l=!!eb.ie&&"CSS1Compat"!==b.compatMode,m=e[0];do "static"!==(h=d.css(m,"position"))&&("fixed"===h?(i=m.getBoundingClientRect(),f(k,-1)):(i=d(m).position(),i.left+=parseFloat(d.css(m,"borderLeftWidth"))||0,i.top+=parseFloat(d.css(m,"borderTopWidth"))||0),c.left-=i.left+(parseFloat(d.css(m,"marginLeft"))||0),c.top-=i.top+(parseFloat(d.css(m,"marginTop"))||0),g||"hidden"===(j=d.css(m,"overflow"))||"visible"===j||(g=d(m)));while(m=m.offsetParent);return g&&(g[0]!==k[0]||l)&&f(g,1),c;};var hb=(B=A.reposition.Corner=function(a,b){a=(""+a).replace(/([A-Z])/," $1").replace(/middle/gi,P).toLowerCase(),this.x=(a.match(/left|right/i)||a.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(a.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!b;var c=a.charAt(0);this.precedance="t"===c||"b"===c?I:H;}).prototype;hb.invert=function(a,b){this[a]=this[a]===M?O:this[a]===O?M:b||this[a];},hb.string=function(){var a=this.x,b=this.y;return a===b?a:this.precedance===I||this.forceY&&"center"!==b?b+" "+a:a+" "+b;},hb.abbrev=function(){var a=this.string().split(" ");return a[0].charAt(0)+(a[1]&&a[1].charAt(0)||"");},hb.clone=function(){return new B(this.string(),this.forceY);},A.toggle=function(a,c){var e=this.cache,f=this.options,g=this.tooltip;if(c){if(/over|enter/.test(c.type)&&/out|leave/.test(e.event.type)&&f.show.target.add(c.target).length===f.show.target.length&&g.has(c.relatedTarget).length)return this;e.event=l(c);}if(this.waiting&&!a&&(this.hiddenDuringWait=E),!this.rendered)return a?this.render(1):this;if(this.destroyed||this.disabled)return this;var h,i,j,k=a?"show":"hide",m=this.options[k],n=(this.options[a?"hide":"show"],this.options.position),o=this.options.content,p=this.tooltip.css("width"),q=this.tooltip.is(":visible"),r=a||1===m.target.length,s=!c||m.target.length<2||e.target[0]===c.target;return (typeof a).search("boolean|number")&&(a=!q),h=!g.is(":animated")&&q===a&&s,i=h?G:!!this._trigger(k,[90]),this.destroyed?this:(i!==F&&a&&this.focus(c),!i||h?this:(d.attr(g[0],"aria-hidden",!a),a?(e.origin=l(this.mouse),d.isFunction(o.text)&&this._updateContent(o.text,F),d.isFunction(o.title)&&this._updateTitle(o.title,F),!D&&"mouse"===n.target&&n.adjust.mouse&&(d(b).bind("mousemove."+T,this._storeMouse),D=E),p||g.css("width",g.outerWidth(F)),this.reposition(c,arguments[2]),p||g.css("width",""),m.solo&&("string"==typeof m.solo?d(m.solo):d(X,m.solo)).not(g).not(m.target).qtip("hide",d.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete e.origin,D&&!d(X+'[tracking="true"]:visible',m.solo).not(g).length&&(d(b).unbind("mousemove."+T),D=F),this.blur(c)),j=d.proxy(function(){a?(eb.ie&&g[0].style.removeAttribute("filter"),g.css("overflow",""),"string"==typeof m.autofocus&&d(this.options.show.autofocus,g).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):g.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(a?"visible":"hidden");},this),m.effect===F||r===F?(g[k](),j()):d.isFunction(m.effect)?(g.stop(1,1),m.effect.call(g,this),g.queue("fx",function(a){j(),a();})):g.fadeTo(90,a?1:0,j),a&&m.target.trigger("qtip-"+this.id+"-inactive"),this));},A.show=function(a){return this.toggle(E,a);},A.hide=function(a){return this.toggle(F,a);},A.focus=function(a){if(!this.rendered||this.destroyed)return this;var b=d(X),c=this.tooltip,e=parseInt(c[0].style.zIndex,10),f=z.zindex+b.length;return c.hasClass(_)||this._trigger("focus",[f],a)&&(e!==f&&(b.each(function(){this.style.zIndex>e&&(this.style.zIndex=this.style.zIndex-1);}),b.filter("."+_).qtip("blur",a)),c.addClass(_)[0].style.zIndex=f),this;},A.blur=function(a){return !this.rendered||this.destroyed?this:(this.tooltip.removeClass(_),this._trigger("blur",[this.tooltip.css("zIndex")],a),this);},A.disable=function(a){return this.destroyed?this:("toggle"===a?a=!(this.rendered?this.tooltip.hasClass(bb):this.disabled):"boolean"!=typeof a&&(a=E),this.rendered&&this.tooltip.toggleClass(bb,a).attr("aria-disabled",a),this.disabled=!!a,this);},A.enable=function(){return this.disable(F);},A._createButton=function(){var a=this,b=this.elements,c=b.tooltip,e=this.options.content.button,f="string"==typeof e,g=f?e:"Close tooltip";b.button&&b.button.remove(),b.button=e.jquery?e:d("<a />",{"class":"qtip-close "+(this.options.style.widget?"":T+"-icon"),title:g,"aria-label":g}).prepend(d("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),b.button.appendTo(b.titlebar||c).attr("role","button").click(function(b){return c.hasClass(bb)||a.hide(b),F;});},A._updateButton=function(a){if(!this.rendered)return F;var b=this.elements.button;a?this._createButton():b.remove();},A._setWidget=function(){var a=this.options.style.widget,b=this.elements,c=b.tooltip,d=c.hasClass(bb);c.removeClass(bb),bb=a?"ui-state-disabled":"qtip-disabled",c.toggleClass(bb,d),c.toggleClass("ui-helper-reset "+k(),a).toggleClass($,this.options.style.def&&!a),b.content&&b.content.toggleClass(k("content"),a),b.titlebar&&b.titlebar.toggleClass(k("header"),a),b.button&&b.button.toggleClass(T+"-icon",!a);},A._storeMouse=function(a){(this.mouse=l(a)).type="mousemove";},A._bind=function(a,b,c,e,f){var g="."+this._id+(e?"-"+e:"");b.length&&d(a).bind((b.split?b:b.join(g+" "))+g,d.proxy(c,f||this));},A._unbind=function(a,b){d(a).unbind("."+this._id+(b?"-"+b:""));};var ib="."+T;d(function(){r(X,["mouseenter","mouseleave"],function(a){var b="mouseenter"===a.type,c=d(a.currentTarget),e=d(a.relatedTarget||a.target),f=this.options;b?(this.focus(a),c.hasClass(Z)&&!c.hasClass(bb)&&clearTimeout(this.timers.hide)):"mouse"===f.position.target&&f.hide.event&&f.show.target&&!e.closest(f.show.target[0]).length&&this.hide(a),c.toggleClass(ab,b);}),r("["+V+"]",Y,p);}),A._trigger=function(a,b,c){var e=d.Event("tooltip"+a);return e.originalEvent=c&&d.extend({},c)||this.cache.event||G,this.triggering=a,this.tooltip.trigger(e,[this].concat(b||[])),this.triggering=F,!e.isDefaultPrevented();},A._bindEvents=function(a,b,c,e,f,g){if(e.add(c).length===e.length){var h=[];b=d.map(b,function(b){var c=d.inArray(b,a);return c>-1?(h.push(a.splice(c,1)[0]),void 0):b;}),h.length&&this._bind(c,h,function(a){var b=this.rendered?this.tooltip[0].offsetWidth>0:!1;(b?g:f).call(this,a);});}this._bind(c,a,f),this._bind(e,b,g);},A._assignInitialEvents=function(a){function b(a){return this.disabled||this.destroyed?F:(this.cache.event=l(a),this.cache.target=a?d(a.target):[c],clearTimeout(this.timers.show),this.timers.show=m.call(this,function(){this.render("object"==typeof a||e.show.ready);},e.show.delay),void 0);}var e=this.options,f=e.show.target,g=e.hide.target,h=e.show.event?d.trim(""+e.show.event).split(" "):[],i=e.hide.event?d.trim(""+e.hide.event).split(" "):[];/mouse(over|enter)/i.test(e.show.event)&&!/mouse(out|leave)/i.test(e.hide.event)&&i.push("mouseleave"),this._bind(f,"mousemove",function(a){this._storeMouse(a),this.cache.onTarget=E;}),this._bindEvents(h,i,f,g,b,function(){clearTimeout(this.timers.show);}),(e.show.ready||e.prerender)&&b.call(this,a);},A._assignEvents=function(){var c=this,e=this.options,f=e.position,g=this.tooltip,h=e.show.target,i=e.hide.target,j=f.container,k=f.viewport,l=d(b),m=(d(b.body),d(a)),r=e.show.event?d.trim(""+e.show.event).split(" "):[],s=e.hide.event?d.trim(""+e.hide.event).split(" "):[];d.each(e.events,function(a,b){c._bind(g,"toggle"===a?["tooltipshow","tooltiphide"]:["tooltip"+a],b,null,g);}),/mouse(out|leave)/i.test(e.hide.event)&&"window"===e.hide.leave&&this._bind(l,["mouseout","blur"],function(a){/select|option/.test(a.target.nodeName)||a.relatedTarget||this.hide(a);}),e.hide.fixed?i=i.add(g.addClass(Z)):/mouse(over|enter)/i.test(e.show.event)&&this._bind(i,"mouseleave",function(){clearTimeout(this.timers.show);}),(""+e.hide.event).indexOf("unfocus")>-1&&this._bind(j.closest("html"),["mousedown","touchstart"],function(a){var b=d(a.target),c=this.rendered&&!this.tooltip.hasClass(bb)&&this.tooltip[0].offsetWidth>0,e=b.parents(X).filter(this.tooltip[0]).length>0;b[0]===this.target[0]||b[0]===this.tooltip[0]||e||this.target.has(b[0]).length||!c||this.hide(a);}),"number"==typeof e.hide.inactive&&(this._bind(h,"qtip-"+this.id+"-inactive",p),this._bind(i.add(g),z.inactiveEvents,p,"-inactive")),this._bindEvents(r,s,h,i,n,o),this._bind(h.add(g),"mousemove",function(a){if("number"==typeof e.hide.distance){var b=this.cache.origin||{},c=this.options.hide.distance,d=Math.abs;(d(a.pageX-b.pageX)>=c||d(a.pageY-b.pageY)>=c)&&this.hide(a);}this._storeMouse(a);}),"mouse"===f.target&&f.adjust.mouse&&(e.hide.event&&this._bind(h,["mouseenter","mouseleave"],function(a){this.cache.onTarget="mouseenter"===a.type;}),this._bind(l,"mousemove",function(a){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(bb)&&this.tooltip[0].offsetWidth>0&&this.reposition(a);})),(f.adjust.resize||k.length)&&this._bind(d.event.special.resize?k:m,"resize",q),f.adjust.scroll&&this._bind(m.add(f.container),"scroll",q);},A._unassignEvents=function(){var c=[this.options.show.target[0],this.options.hide.target[0],this.rendered&&this.tooltip[0],this.options.position.container[0],this.options.position.viewport[0],this.options.position.container.closest("html")[0],a,b];this._unbind(d([]).pushStack(d.grep(c,function(a){return "object"==typeof a;})));},z=d.fn.qtip=function(a,b,e){var f=(""+a).toLowerCase(),g=G,i=d.makeArray(arguments).slice(1),j=i[i.length-1],k=this[0]?d.data(this[0],T):G;return !arguments.length&&k||"api"===f?k:"string"==typeof a?(this.each(function(){var a=d.data(this,T);if(!a)return E;if(j&&j.timeStamp&&(a.cache.event=j),!b||"option"!==f&&"options"!==f)a[f]&&a[f].apply(a,i);else{if(e===c&&!d.isPlainObject(b))return g=a.get(b),F;a.set(b,e);}}),g!==G?g:this):"object"!=typeof a&&arguments.length?void 0:(k=h(d.extend(E,{},a)),this.each(function(a){var b,c;return c=d.isArray(k.id)?k.id[a]:k.id,c=!c||c===F||c.length<1||z.api[c]?z.nextid++:c,b=s(d(this),c,k),b===F?E:(z.api[c]=b,d.each(S,function(){"initialize"===this.initialize&&this(b);}),b._assignInitialEvents(j),void 0);}));},d.qtip=e,z.api={},d.each({attr:function(a,b){if(this.length){var c=this[0],e="title",f=d.data(c,"qtip");if(a===e&&f&&"object"==typeof f&&f.options.suppress)return arguments.length<2?d.attr(c,db):(f&&f.options.content.attr===e&&f.cache.attr&&f.set("content.text",b),this.attr(db,b));}return d.fn["attr"+cb].apply(this,arguments);},clone:function(a){var b=(d([]),d.fn["clone"+cb].apply(this,arguments));return a||b.filter("["+db+"]").attr("title",function(){return d.attr(this,db);}).removeAttr(db),b;}},function(a,b){if(!b||d.fn[a+cb])return E;var c=d.fn[a+cb]=d.fn[a];d.fn[a]=function(){return b.apply(this,arguments)||c.apply(this,arguments);};}),d.ui||(d["cleanData"+cb]=d.cleanData,d.cleanData=function(a){for(var b,c=0;(b=d(a[c])).length;c++)if(b.attr(U))try{b.triggerHandler("removeqtip");}catch(e){}d["cleanData"+cb].apply(this,arguments);}),z.version="@@VERSION",z.nextid=0,z.inactiveEvents=Y,z.zindex=15e3,z.defaults={prerender:F,id:F,overwrite:E,suppress:E,content:{text:E,attr:"title",title:F,button:F},position:{my:"top left",at:"bottom right",target:F,container:F,viewport:F,adjust:{x:0,y:0,mouse:E,scroll:E,resize:E,method:"flipinvert flipinvert"},effect:function(a,b){d(this).animate(b,{duration:200,queue:F});}},show:{target:F,event:"mouseenter",effect:E,delay:90,solo:F,ready:F,autofocus:F},hide:{target:F,event:"mouseleave",effect:E,delay:0,fixed:F,inactive:F,leave:"window",distance:F},style:{classes:"",widget:F,width:F,height:F,def:E},events:{render:G,move:G,show:G,hide:G,toggle:G,visible:G,hidden:G,focus:G,blur:G}};var jb,kb="margin",lb="border",mb="color",nb="background-color",ob="transparent",pb=" !important",qb=!!b.createElement("canvas").getContext,rb=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,sb={},tb=["Webkit","O","Moz","ms"];if(qb)var ub=a.devicePixelRatio||1,vb=function(){var a=b.createElement("canvas").getContext("2d");return a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||1;}(),wb=ub/vb;else var xb=function(a,b,c){return "<qtipvml:"+a+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(b||"")+' style="behavior: url(#default#VML); '+(c||"")+'" />';};d.extend(w.prototype,{init:function(a){var b,c;c=this.element=a.elements.tip=d("<div />",{"class":T+"-tip"}).prependTo(a.tooltip),qb?(b=d("<canvas />").appendTo(this.element)[0].getContext("2d"),b.lineJoin="miter",b.miterLimit=1e5,b.save()):(b=xb("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(b+b),a._bind(d("*",c).add(c),["click","mousedown"],function(a){a.stopPropagation();},this._ns)),a._bind(a.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create();},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width;},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height;},_useTitle:function(a){var b=this.qtip.elements.titlebar;return b&&(a.y===L||a.y===P&&this.element.position().top+this.size[1]/2+this.options.offset<b.outerHeight(E));},_parseCorner:function(a){var b=this.qtip.options.position.my;return a===F||b===F?a=F:a===E?a=new B(b.string()):a.string||(a=new B(a),a.fixed=E),a;},_parseWidth:function(a,b,c){var d=this.qtip.elements,e=lb+t(b)+"Width";return (c?v(c,e):v(d.content,e)||v(this._useTitle(a)&&d.titlebar||d.content,e)||v(d.tooltip,e))||0;},_parseRadius:function(a){var b=this.qtip.elements,c=lb+t(a.y)+t(a.x)+"Radius";return eb.ie<9?0:v(this._useTitle(a)&&b.titlebar||b.content,c)||v(b.tooltip,c)||0;},_invalidColour:function(a,b,c){var d=a.css(b);return !d||c&&d===a.css(c)||rb.test(d)?F:d;},_parseColours:function(a){var b=this.qtip.elements,c=this.element.css("cssText",""),e=lb+t(a[a.precedance])+t(mb),f=this._useTitle(a)&&b.titlebar||b.content,g=this._invalidColour,h=[];return h[0]=g(c,nb)||g(f,nb)||g(b.content,nb)||g(b.tooltip,nb)||c.css(nb),h[1]=g(c,e,mb)||g(f,e,mb)||g(b.content,e,mb)||g(b.tooltip,e,mb)||b.tooltip.css(e),d("*",c).add(c).css("cssText",nb+":"+ob+pb+";"+lb+":0"+pb+";"),h;},_calculateSize:function(a){var b,c,d,e=a.precedance===I,f=this.options.width,g=this.options.height,h="c"===a.abbrev(),i=(e?f:g)*(h?.5:1),j=Math.pow,k=Math.round,l=Math.sqrt(j(i,2)+j(g,2)),m=[this.border/i*l,this.border/g*l];return m[2]=Math.sqrt(j(m[0],2)-j(this.border,2)),m[3]=Math.sqrt(j(m[1],2)-j(this.border,2)),b=l+m[2]+m[3]+(h?0:m[0]),c=b/l,d=[k(c*f),k(c*g)],e?d:d.reverse();},_calculateTip:function(a,b,c){c=c||1,b=b||this.size;var d=b[0]*c,e=b[1]*c,f=Math.ceil(d/2),g=Math.ceil(e/2),h={br:[0,0,d,e,d,0],bl:[0,0,d,0,0,e],tr:[0,e,d,0,d,e],tl:[0,0,0,e,d,e],tc:[0,e,f,0,d,e],bc:[0,0,d,0,f,e],rc:[0,0,d,g,0,e],lc:[d,0,d,e,0,g]};return h.lt=h.br,h.rt=h.bl,h.lb=h.tr,h.rb=h.tl,h[a.abbrev()];},_drawCoords:function(a,b){a.beginPath(),a.moveTo(b[0],b[1]),a.lineTo(b[2],b[3]),a.lineTo(b[4],b[5]),a.closePath();},create:function(){var a=this.corner=(qb||eb.ie)&&this._parseCorner(this.options.corner);return (this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=a.clone(),this.update()),this.element.toggle(this.enabled),this.corner;},update:function(b,c){if(!this.enabled)return this;var e,f,g,h,i,j,k,l,m=this.qtip.elements,n=this.element,o=n.children(),p=this.options,q=this.size,r=p.mimic,s=Math.round;b||(b=this.qtip.cache.corner||this.corner),r===F?r=b:(r=new B(r),r.precedance=b.precedance,"inherit"===r.x?r.x=b.x:"inherit"===r.y?r.y=b.y:r.x===r.y&&(r[b.precedance]=b[b.precedance])),f=r.precedance,b.precedance===H?this._swapDimensions():this._resetDimensions(),e=this.color=this._parseColours(b),e[1]!==ob?(l=this.border=this._parseWidth(b,b[b.precedance]),p.border&&1>l&&!rb.test(e[1])&&(e[0]=e[1]),this.border=l=p.border!==E?p.border:l):this.border=l=0,k=this.size=this._calculateSize(b),n.css({width:k[0],height:k[1],lineHeight:k[1]+"px"}),j=b.precedance===I?[s(r.x===M?l:r.x===O?k[0]-q[0]-l:(k[0]-q[0])/2),s(r.y===L?k[1]-q[1]:0)]:[s(r.x===M?k[0]-q[0]:0),s(r.y===L?l:r.y===N?k[1]-q[1]-l:(k[1]-q[1])/2)],qb?(g=o[0].getContext("2d"),g.restore(),g.save(),g.clearRect(0,0,6e3,6e3),h=this._calculateTip(r,q,wb),i=this._calculateTip(r,this.size,wb),o.attr(J,k[0]*wb).attr(K,k[1]*wb),o.css(J,k[0]).css(K,k[1]),this._drawCoords(g,i),g.fillStyle=e[1],g.fill(),g.translate(j[0]*wb,j[1]*wb),this._drawCoords(g,h),g.fillStyle=e[0],g.fill()):(h=this._calculateTip(r),h="m"+h[0]+","+h[1]+" l"+h[2]+","+h[3]+" "+h[4]+","+h[5]+" xe",j[2]=l&&/^(r|b)/i.test(b.string())?8===eb.ie?2:1:0,o.css({coordsize:k[0]+l+" "+(k[1]+l),antialias:""+(r.string().indexOf(P)>-1),left:j[0]-j[2]*Number(f===H),top:j[1]-j[2]*Number(f===I),width:k[0]+l,height:k[1]+l}).each(function(a){var b=d(this);b[b.prop?"prop":"attr"]({coordsize:k[0]+l+" "+(k[1]+l),path:h,fillcolor:e[0],filled:!!a,stroked:!a}).toggle(!(!l&&!a)),!a&&b.html(xb("stroke",'weight="'+2*l+'px" color="'+e[1]+'" miterlimit="1000" joinstyle="miter"'));})),a.opera&&setTimeout(function(){m.tip.css({display:"inline-block",visibility:"visible"});},1),c!==F&&this.calculate(b,k);},calculate:function(a,b){if(!this.enabled)return F;var c,e,f=this,g=this.qtip.elements,h=this.element,i=this.options.offset,j=(g.tooltip.hasClass("ui-widget"),{});return a=a||this.corner,c=a.precedance,b=b||this._calculateSize(a),e=[a.x,a.y],c===H&&e.reverse(),d.each(e,function(d,e){var h,k,l;e===P?(h=c===I?M:L,j[h]="50%",j[kb+"-"+h]=-Math.round(b[c===I?0:1]/2)+i):(h=f._parseWidth(a,e,g.tooltip),k=f._parseWidth(a,e,g.content),l=f._parseRadius(a),j[e]=Math.max(-f.border,d?k:i+(l>h?l:-h)));}),j[a[c]]-=b[c===H?0:1],h.css({margin:"",top:"",bottom:"",left:"",right:""}).css(j),j;},reposition:function(a,b,d){function e(a,b,c,d,e){a===R&&j.precedance===b&&k[d]&&j[c]!==P?j.precedance=j.precedance===H?I:H:a!==R&&k[d]&&(j[b]=j[b]===P?k[d]>0?d:e:j[b]===d?e:d);}function f(a,b,e){j[a]===P?p[kb+"-"+b]=o[a]=g[kb+"-"+b]-k[b]:(h=g[e]!==c?[k[b],-g[b]]:[-k[b],g[b]],(o[a]=Math.max(h[0],h[1]))>h[0]&&(d[b]-=k[b],o[b]=F),p[g[e]!==c?e:b]=o[a]);}if(this.enabled){var g,h,i=b.cache,j=this.corner.clone(),k=d.adjusted,l=b.options.position.adjust.method.split(" "),m=l[0],n=l[1]||l[0],o={left:F,top:F,x:0,y:0},p={};this.corner.fixed!==E&&(e(m,H,I,M,O),e(n,I,H,L,N),j.string()===i.corner.string()||i.cornerTop===k.top&&i.cornerLeft===k.left||this.update(j,F)),g=this.calculate(j),g.right!==c&&(g.left=-g.right),g.bottom!==c&&(g.top=-g.bottom),g.user=this.offset,(o.left=m===R&&!!k.left)&&f(H,M,O),(o.top=n===R&&!!k.top)&&f(I,L,N),this.element.css(p).toggle(!(o.x&&o.y||j.x===P&&o.y||j.y===P&&o.x)),d.left-=g.left.charAt?g.user:m!==R||o.top||!o.left&&!o.top?g.left+this.border:0,d.top-=g.top.charAt?g.user:n!==R||o.left||!o.left&&!o.top?g.top+this.border:0,i.cornerLeft=k.left,i.cornerTop=k.top,i.corner=j.clone();}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove();}}),jb=S.tip=function(a){return new w(a,a.options.style.tip);},jb.initialize="render",jb.sanitize=function(a){if(a.style&&"tip" in a.style){var b=a.style.tip;"object"!=typeof b&&(b=a.style.tip={corner:b}),/string|boolean/i.test(typeof b.corner)||(b.corner=E);}},C.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition();},"^style.tip.(height|width)$":function(a){this.size=[a.width,a.height],this.update(),this.qtip.reposition();},"^content.title|style.(classes|widget)$":function(){this.update();}},d.extend(E,z.defaults,{style:{tip:{corner:E,mimic:F,width:6,height:6,border:E,offset:0}}});var yb,zb,Ab="qtip-modal",Bb="."+Ab;zb=function(){function a(a){if(d.expr[":"].focusable)return d.expr[":"].focusable;var b,c,e,f=!isNaN(d.attr(a,"tabindex")),g=a.nodeName&&a.nodeName.toLowerCase();return "area"===g?(b=a.parentNode,c=b.name,a.href&&c&&"map"===b.nodeName.toLowerCase()?(e=d("img[usemap=#"+c+"]")[0],!!e&&e.is(":visible")):!1):/input|select|textarea|button|object/.test(g)?!a.disabled:"a"===g?a.href||f:f;}function c(a){k.length<1&&a.length?a.not("body").blur():k.first().focus();}function e(a){if(i.is(":visible")){var b,e=d(a.target),h=f.tooltip,j=e.closest(X);b=j.length<1?F:parseInt(j[0].style.zIndex,10)>parseInt(h[0].style.zIndex,10),b||e.closest(X)[0]===h[0]||c(e),g=a.target===k[k.length-1];}}var f,g,h,i,j=this,k={};d.extend(j,{init:function(){return i=j.elem=d("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return F;}}).hide(),d(b.body).bind("focusin"+Bb,e),d(b).bind("keydown"+Bb,function(a){f&&f.options.show.modal.escape&&27===a.keyCode&&f.hide(a);}),i.bind("click"+Bb,function(a){f&&f.options.show.modal.blur&&f.hide(a);}),j;},update:function(b){f=b,k=b.options.show.modal.stealfocus!==F?b.tooltip.find("*").filter(function(){return a(this);}):[];},toggle:function(a,e,g){var k=(d(b.body),a.tooltip),l=a.options.show.modal,m=l.effect,n=e?"show":"hide",o=i.is(":visible"),p=d(Bb).filter(":visible:not(:animated)").not(k);return j.update(a),e&&l.stealfocus!==F&&c(d(":focus")),i.toggleClass("blurs",l.blur),e&&i.appendTo(b.body),i.is(":animated")&&o===e&&h!==F||!e&&p.length?j:(i.stop(E,F),d.isFunction(m)?m.call(i,e):m===F?i[n]():i.fadeTo(parseInt(g,10)||90,e?1:0,function(){e||i.hide();}),e||i.queue(function(a){i.css({left:"",top:""}),d(Bb).length||i.detach(),a();}),h=e,f.destroyed&&(f=G),j);}}),j.init();},zb=new zb(),d.extend(x.prototype,{init:function(a){var b=a.tooltip;return this.options.on?(a.elements.overlay=zb.elem,b.addClass(Ab).css("z-index",z.modal_zindex+d(Bb).length),a._bind(b,["tooltipshow","tooltiphide"],function(a,c,e){var f=a.originalEvent;if(a.target===b[0])if(f&&"tooltiphide"===a.type&&/mouse(leave|enter)/.test(f.type)&&d(f.relatedTarget).closest(zb.elem[0]).length)try{a.preventDefault();}catch(g){}else (!f||f&&"tooltipsolo"!==f.type)&&this.toggle(a,"tooltipshow"===a.type,e);},this._ns,this),a._bind(b,"tooltipfocus",function(a,c){if(!a.isDefaultPrevented()&&a.target===b[0]){var e=d(Bb),f=z.modal_zindex+e.length,g=parseInt(b[0].style.zIndex,10);zb.elem[0].style.zIndex=f-1,e.each(function(){this.style.zIndex>g&&(this.style.zIndex-=1);}),e.filter("."+_).qtip("blur",a.originalEvent),b.addClass(_)[0].style.zIndex=f,zb.update(c);try{a.preventDefault();}catch(h){}}},this._ns,this),a._bind(b,"tooltiphide",function(a){a.target===b[0]&&d(Bb).filter(":visible").not(b).last().qtip("focus",a);},this._ns,this),void 0):this;},toggle:function(a,b,c){return a&&a.isDefaultPrevented()?this:(zb.toggle(this.qtip,!!b,c),void 0);},destroy:function(){this.qtip.tooltip.removeClass(Ab),this.qtip._unbind(this.qtip.tooltip,this._ns),zb.toggle(this.qtip,F),delete this.qtip.elements.overlay;}}),yb=S.modal=function(a){return new x(a,a.options.show.modal);},yb.sanitize=function(a){a.show&&("object"!=typeof a.show.modal?a.show.modal={on:!!a.show.modal}:"undefined"==typeof a.show.modal.on&&(a.show.modal.on=E));},z.modal_zindex=z.zindex-200,yb.initialize="render",C.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0);}},d.extend(E,z.defaults,{show:{modal:{on:F,effect:E,blur:E,stealfocus:E,escape:E}}}),S.viewport=function(c,d,e,f,g,h,i){function j(a,b,c,e,f,g,h,i,j){var k=d[f],m=v[a],t=w[a],u=c===R,x=m===f?j:m===g?-j:-j/2,y=t===f?i:t===g?-i:-i/2,z=r[f]+s[f]-(o?0:n[f]),A=z-k,B=k+j-(h===J?p:q)-z,C=x-(v.precedance===a||m===v[b]?y:0)-(t===P?i/2:0);return u?(C=(m===f?1:-1)*x,d[f]+=A>0?A:B>0?-B:0,d[f]=Math.max(-n[f]+s[f],k-C,Math.min(Math.max(-n[f]+s[f]+(h===J?p:q),k+C),d[f],"center"===m?k-x:1e9))):(e*=c===Q?2:0,A>0&&(m!==f||B>0)?(d[f]-=C+e,l.invert(a,f)):B>0&&(m!==g||A>0)&&(d[f]-=(m===P?-C:C)+e,l.invert(a,g)),d[f]<r&&-d[f]>B&&(d[f]=k,l=v.clone())),d[f]-k;}var k,l,m,n,o,p,q,r,s,t=e.target,u=c.elements.tooltip,v=e.my,w=e.at,x=e.adjust,y=x.method.split(" "),z=y[0],A=y[1]||y[0],B=e.viewport,C=e.container,D=c.cache,E={left:0,top:0};return B.jquery&&t[0]!==a&&t[0]!==b.body&&"none"!==x.method?(n=C.offset()||E,o="static"===C.css("position"),k="fixed"===u.css("position"),p=B[0]===a?B.width():B.outerWidth(F),q=B[0]===a?B.height():B.outerHeight(F),r={left:k?0:B.scrollLeft(),top:k?0:B.scrollTop()},s=B.offset()||E,("shift"!==z||"shift"!==A)&&(l=v.clone()),E={left:"none"!==z?j(H,I,z,x.x,M,O,J,f,h):0,top:"none"!==A?j(I,H,A,x.y,L,N,K,g,i):0},l&&D.lastClass!==(m=T+"-pos-"+l.abbrev())&&u.removeClass(c.cache.lastClass).addClass(c.cache.lastClass=m),E):E;},S.polys={polygon:function(a,b){var c,d,e,f={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:F},g=0,h=[],i=1,j=1,k=0,l=0;for(g=a.length;g--;)c=[parseInt(a[--g],10),parseInt(a[g+1],10)],c[0]>f.position.right&&(f.position.right=c[0]),c[0]<f.position.left&&(f.position.left=c[0]),c[1]>f.position.bottom&&(f.position.bottom=c[1]),c[1]<f.position.top&&(f.position.top=c[1]),h.push(c);if(d=f.width=Math.abs(f.position.right-f.position.left),e=f.height=Math.abs(f.position.bottom-f.position.top),"c"===b.abbrev())f.position={left:f.position.left+f.width/2,top:f.position.top+f.height/2};else{for(;d>0&&e>0&&i>0&&j>0;)for(d=Math.floor(d/2),e=Math.floor(e/2),b.x===M?i=d:b.x===O?i=f.width-d:i+=Math.floor(d/2),b.y===L?j=e:b.y===N?j=f.height-e:j+=Math.floor(e/2),g=h.length;g--&&!(h.length<2);)k=h[g][0]-f.position.left,l=h[g][1]-f.position.top,(b.x===M&&k>=i||b.x===O&&i>=k||b.x===P&&(i>k||k>f.width-i)||b.y===L&&l>=j||b.y===N&&j>=l||b.y===P&&(j>l||l>f.height-j))&&h.splice(g,1);f.position={left:h[0][0],top:h[0][1]};}return f;},rect:function(a,b,c,d){return {width:Math.abs(c-a),height:Math.abs(d-b),position:{left:Math.min(a,c),top:Math.min(b,d)}};},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(a,b,c,d,e){var f=S.polys._angles[e.abbrev()],g=0===f?0:c*Math.cos(f*Math.PI),h=d*Math.sin(f*Math.PI);return {width:2*c-Math.abs(g),height:2*d-Math.abs(h),position:{left:a+g,top:b+h},adjustable:F};},circle:function(a,b,c,d){return S.polys.ellipse(a,b,c,c,d);}},S.svg=function(a,c,e){for(var f,g,h,i,j,k,l,m,n,o,p,q=d(b),r=c[0],s=d(r.ownerSVGElement),t=1,u=1,v=!0;!r.getBBox;)r=r.parentNode;if(!r.getBBox||!r.parentNode)return F;f=s.attr("width")||s.width()||parseInt(s.css("width"),10),g=s.attr("height")||s.height()||parseInt(s.css("height"),10);var w=(parseInt(c.css("stroke-width"),10)||0)/2;switch(w&&(t+=w/f,u+=w/g),r.nodeName){case "ellipse":case "circle":o=S.polys.ellipse(r.cx.baseVal.value,r.cy.baseVal.value,(r.rx||r.r).baseVal.value+w,(r.ry||r.r).baseVal.value+w,e);break;case "line":case "polygon":case "polyline":for(n=r.points||[{x:r.x1.baseVal.value,y:r.y1.baseVal.value},{x:r.x2.baseVal.value,y:r.y2.baseVal.value}],o=[],m=-1,k=n.numberOfItems||n.length;++m<k;)l=n.getItem?n.getItem(m):n[m],o.push.apply(o,[l.x,l.y]);o=S.polys.polygon(o,e);break;default:o=r.getBoundingClientRect(),o={width:o.width,height:o.height,position:{left:o.left,top:o.top}},v=!1;}return p=o.position,s=s[0],v&&(s.createSVGPoint&&(h=r.getScreenCTM(),n=s.createSVGPoint(),n.x=p.left,n.y=p.top,i=n.matrixTransform(h),p.left=i.x,p.top=i.y),s.viewBox&&(j=s.viewBox.baseVal)&&j.width&&j.height&&(t*=f/j.width,u*=g/j.height)),p.left+=q.scrollLeft(),p.top+=q.scrollTop(),o;},S.imagemap=function(a,b,c){b.jquery||(b=d(b));var e,f,g,h,i,j=b.attr("shape").toLowerCase().replace("poly","polygon"),k=d('img[usemap="#'+b.parent("map").attr("name")+'"]'),l=d.trim(b.attr("coords")),m=l.replace(/,$/,"").split(",");if(!k.length)return F;if("polygon"===j)h=S.polys.polygon(m,c);else{if(!S.polys[j])return F;for(g=-1,i=m.length,f=[];++g<i;)f.push(parseInt(m[g],10));h=S.polys[j].apply(this,f.concat(c));}return e=k.offset(),e.left+=Math.ceil((k.outerWidth(F)-k.width())/2),e.top+=Math.ceil((k.outerHeight(F)-k.height())/2),h.position.left+=e.left,h.position.top+=e.top,h;};var Cb,Db='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>';d.extend(y.prototype,{_scroll:function(){var b=this.qtip.elements.overlay;b&&(b[0].style.top=d(a).scrollTop()+"px");},init:function(c){var e=c.tooltip;d("select, object").length<1&&(this.bgiframe=c.elements.bgiframe=d(Db).appendTo(e),c._bind(e,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=d("<div/>",{id:T+"-rcontainer"}).appendTo(b.body),c.elements.overlay&&c.elements.overlay.addClass("qtipmodal-ie6fix")&&(c._bind(a,["scroll","resize"],this._scroll,this._ns,this),c._bind(e,["tooltipshow"],this._scroll,this._ns,this)),this.redraw();},adjustBGIFrame:function(){var a,b,c=this.qtip.tooltip,d={height:c.outerHeight(F),width:c.outerWidth(F)},e=this.qtip.plugins.tip,f=this.qtip.elements.tip;b=parseInt(c.css("borderLeftWidth"),10)||0,b={left:-b,top:-b},e&&f&&(a="x"===e.corner.precedance?[J,M]:[K,L],b[a[1]]-=f[a[0]]()),this.bgiframe.css(b).css(d);},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var a,b,c,d,e=this.qtip.tooltip,f=this.qtip.options.style,g=this.qtip.options.position.container;return this.qtip.drawing=1,f.height&&e.css(K,f.height),f.width?e.css(J,f.width):(e.css(J,"").appendTo(this.redrawContainer),b=e.width(),1>b%2&&(b+=1),c=e.css("maxWidth")||"",d=e.css("minWidth")||"",a=(c+d).indexOf("%")>-1?g.width()/100:0,c=(c.indexOf("%")>-1?a:1)*parseInt(c,10)||b,d=(d.indexOf("%")>-1?a:1)*parseInt(d,10)||0,b=c+d?Math.min(Math.max(b,d),c):b,e.css(J,Math.round(b)).appendTo(g)),this.drawing=0,this;},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([a,this.qtip.tooltip],this._ns);}}),Cb=S.ie6=function(a){return 6===eb.ie?new y(a):F;},Cb.initialize="render",C.ie6={"^content|style$":function(){this.redraw();}};});}(window,document);;
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery);}(function(a){a.fn.jScrollPane=function(b){function c(b,c){function d(c){var f,h,j,k,l,o,p=!1,q=!1;if(N=c,void 0===O)l=b.scrollTop(),o=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),P=b.innerWidth()+rb,Q=b.innerHeight(),b.width(P),O=a('<div class="jspPane" />').css("padding",qb).append(b.children()),R=a('<div class="jspContainer" />').css({width:P+"px",height:Q+"px"}).append(O).appendTo(b);else{if(b.css("width",""),p=N.stickToBottom&&A(),q=N.stickToRight&&B(),k=b.innerWidth()+rb!=P||b.outerHeight()!=Q,k&&(P=b.innerWidth()+rb,Q=b.innerHeight(),R.css({width:P+"px",height:Q+"px"})),!k&&sb==S&&O.outerHeight()==T)return void b.width(P);sb=S,O.css("width",""),b.width(P),R.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end();}O.css("overflow","auto"),S=c.contentWidth?c.contentWidth:O[0].scrollWidth,T=O[0].scrollHeight,O.css("overflow",""),U=S/P,V=T/Q,W=V>1,X=U>1,X||W?(b.addClass("jspScrollable"),f=N.maintainPosition&&($||bb),f&&(h=y(),j=z()),e(),g(),i(),f&&(w(q?S-P:h,!1),v(p?T-Q:j,!1)),F(),C(),L(),N.enableKeyboardNavigation&&H(),N.clickOnTrack&&m(),J(),N.hijackInternalLinks&&K()):(b.removeClass("jspScrollable"),O.css({top:0,left:0,width:R.width()-rb}),D(),G(),I(),n()),N.autoReinitialise&&!pb?pb=setInterval(function(){d(N);},N.autoReinitialiseDelay):!N.autoReinitialise&&pb&&clearInterval(pb),l&&b.scrollTop(0)&&v(l,!1),o&&b.scrollLeft(0)&&w(o,!1),b.trigger("jsp-initialised",[X||W]);}function e(){W&&(R.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),cb=R.find(">.jspVerticalBar"),db=cb.find(">.jspTrack"),Y=db.find(">.jspDrag"),N.showArrows&&(hb=a('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",k(0,-1)).bind("click.jsp",E),ib=a('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",k(0,1)).bind("click.jsp",E),N.arrowScrollOnHover&&(hb.bind("mouseover.jsp",k(0,-1,hb)),ib.bind("mouseover.jsp",k(0,1,ib))),j(db,N.verticalArrowPositions,hb,ib)),fb=Q,R.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){fb-=a(this).outerHeight();}),Y.hover(function(){Y.addClass("jspHover");},function(){Y.removeClass("jspHover");}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),Y.addClass("jspActive");var c=b.pageY-Y.position().top;return a("html").bind("mousemove.jsp",function(a){p(a.pageY-c,!1);}).bind("mouseup.jsp mouseleave.jsp",o),!1;}),f());}function f(){db.height(fb+"px"),$=0,eb=N.verticalGutter+db.outerWidth(),O.width(P-eb-rb);try{0===cb.position().left&&O.css("margin-left",eb+"px");}catch(a){}}function g(){X&&(R.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),jb=R.find(">.jspHorizontalBar"),kb=jb.find(">.jspTrack"),_=kb.find(">.jspDrag"),N.showArrows&&(nb=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",k(-1,0)).bind("click.jsp",E),ob=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",k(1,0)).bind("click.jsp",E),N.arrowScrollOnHover&&(nb.bind("mouseover.jsp",k(-1,0,nb)),ob.bind("mouseover.jsp",k(1,0,ob))),j(kb,N.horizontalArrowPositions,nb,ob)),_.hover(function(){_.addClass("jspHover");},function(){_.removeClass("jspHover");}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),_.addClass("jspActive");var c=b.pageX-_.position().left;return a("html").bind("mousemove.jsp",function(a){r(a.pageX-c,!1);}).bind("mouseup.jsp mouseleave.jsp",o),!1;}),lb=R.innerWidth(),h());}function h(){R.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){lb-=a(this).outerWidth();}),kb.width(lb+"px"),bb=0;}function i(){if(X&&W){var b=kb.outerHeight(),c=db.outerWidth();fb-=b,a(jb).find(">.jspCap:visible,>.jspArrow").each(function(){lb+=a(this).outerWidth();}),lb-=c,Q-=c,P-=b,kb.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),f(),h();}X&&O.width(R.outerWidth()-rb+"px"),T=O.outerHeight(),V=T/Q,X&&(mb=Math.ceil(1/U*lb),mb>N.horizontalDragMaxWidth?mb=N.horizontalDragMaxWidth:mb<N.horizontalDragMinWidth&&(mb=N.horizontalDragMinWidth),_.width(mb+"px"),ab=lb-mb,s(bb)),W&&(gb=Math.ceil(1/V*fb),gb>N.verticalDragMaxHeight?gb=N.verticalDragMaxHeight:gb<N.verticalDragMinHeight&&(gb=N.verticalDragMinHeight),Y.height(gb+"px"),Z=fb-gb,q($));}function j(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d);}function k(a,b,c){return function(){return l(a,b,this,c),this.blur(),!1;};}function l(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&tb.scrollByX(b*N.arrowButtonSpeed),0!==c&&tb.scrollByY(c*N.arrowButtonSpeed),g=setTimeout(i,h?N.initialDelay:N.arrowRepeatFreq),h=!1;};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.bind(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.unbind(f);});}function m(){n(),W&&db.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageY-e.top-$,g=!0,h=function(){var a=d.offset(),e=b.pageY-a.top-gb/2,j=Q*N.scrollPagePercent,k=Z*j/(T-Q);if(0>f)$-k>e?tb.scrollByY(-j):p(e);else{if(!(f>0))return void i();e>$+k?tb.scrollByY(j):p(e);}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1;},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i);};return h(),a(document).bind("mouseup.jsp",i),!1;}}),X&&kb.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageX-e.left-bb,g=!0,h=function(){var a=d.offset(),e=b.pageX-a.left-mb/2,j=P*N.scrollPagePercent,k=ab*j/(S-P);if(0>f)bb-k>e?tb.scrollByX(-j):r(e);else{if(!(f>0))return void i();e>bb+k?tb.scrollByX(j):r(e);}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1;},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i);};return h(),a(document).bind("mouseup.jsp",i),!1;}});}function n(){kb&&kb.unbind("mousedown.jsp"),db&&db.unbind("mousedown.jsp");}function o(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Y&&Y.removeClass("jspActive"),_&&_.removeClass("jspActive");}function p(c,d){if(W){0>c?c=0:c>Z&&(c=Z);var e=new a.Event("jsp-will-scroll-y");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==Z,i=c/Z,j=-i*(T-Q);void 0===d&&(d=N.animateScroll),d?tb.animate(Y,"top",c,q,function(){b.trigger("jsp-user-scroll-y",[-j,g,h]);}):(Y.css("top",c),q(c),b.trigger("jsp-user-scroll-y",[-j,g,h]));}}}function q(a){void 0===a&&(a=Y.position().top),R.scrollTop(0),$=a||0;var c=0===$,d=$==Z,e=a/Z,f=-e*(T-Q);(ub!=c||wb!=d)&&(ub=c,wb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),t(c,d),O.css("top",f),b.trigger("jsp-scroll-y",[-f,c,d]).trigger("scroll");}function r(c,d){if(X){0>c?c=0:c>ab&&(c=ab);var e=new a.Event("jsp-will-scroll-x");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==ab,i=c/ab,j=-i*(S-P);void 0===d&&(d=N.animateScroll),d?tb.animate(_,"left",c,s,function(){b.trigger("jsp-user-scroll-x",[-j,g,h]);}):(_.css("left",c),s(c),b.trigger("jsp-user-scroll-x",[-j,g,h]));}}}function s(a){void 0===a&&(a=_.position().left),R.scrollTop(0),bb=a||0;var c=0===bb,d=bb==ab,e=a/ab,f=-e*(S-P);(vb!=c||xb!=d)&&(vb=c,xb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),u(c,d),O.css("left",f),b.trigger("jsp-scroll-x",[-f,c,d]).trigger("scroll");}function t(a,b){N.showArrows&&(hb[a?"addClass":"removeClass"]("jspDisabled"),ib[b?"addClass":"removeClass"]("jspDisabled"));}function u(a,b){N.showArrows&&(nb[a?"addClass":"removeClass"]("jspDisabled"),ob[b?"addClass":"removeClass"]("jspDisabled"));}function v(a,b){var c=a/(T-Q);p(c*Z,b);}function w(a,b){var c=a/(S-P);r(c*ab,b);}function x(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b);}catch(p){return;}for(f=e.outerHeight(),g=e.outerWidth(),R.scrollTop(0),R.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;h=z(),j=h+Q,h>n||c?l=n-N.horizontalGutter:n+f>j&&(l=n-Q+f+N.horizontalGutter),isNaN(l)||v(l,d),i=y(),k=i+P,i>o||c?m=o-N.horizontalGutter:o+g>k&&(m=o-P+g+N.horizontalGutter),isNaN(m)||w(m,d);}function y(){return -O.position().left;}function z(){return -O.position().top;}function A(){var a=T-Q;return a>20&&a-z()<10;}function B(){var a=S-P;return a>20&&a-y()<10;}function C(){R.unbind(zb).bind(zb,function(a,b,c,d){bb||(bb=0),$||($=0);var e=bb,f=$,g=a.deltaFactor||N.mouseWheelSpeed;return tb.scrollBy(c*g,-d*g,!1),e==bb&&f==$;});}function D(){R.unbind(zb);}function E(){return !1;}function F(){O.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){x(a.target,!1);});}function G(){O.find(":input,a").unbind("focus.jsp");}function H(){function c(){var a=bb,b=$;switch(d){case 40:tb.scrollByY(N.keyboardSpeed,!1);break;case 38:tb.scrollByY(-N.keyboardSpeed,!1);break;case 34:case 32:tb.scrollByY(Q*N.scrollPagePercent,!1);break;case 33:tb.scrollByY(-Q*N.scrollPagePercent,!1);break;case 39:tb.scrollByX(N.keyboardSpeed,!1);break;case 37:tb.scrollByX(-N.keyboardSpeed,!1);}return e=a!=bb||b!=$;}var d,e,f=[];X&&f.push(jb[0]),W&&f.push(cb[0]),O.bind("focus.jsp",function(){b.focus();}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(b){if(b.target===this||f.length&&a(b.target).closest(f).length){var g=bb,h=$;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=b.keyCode,c();break;case 35:v(T-Q),d=null;break;case 36:v(0),d=null;}return e=b.keyCode==d&&g!=bb||h!=$,!e;}}).bind("keypress.jsp",function(b){return b.keyCode==d&&c(),b.target===this||f.length&&a(b.target).closest(f).length?!e:void 0;}),N.hideFocus?(b.css("outline","none"),"hideFocus" in R[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus" in R[0]&&b.attr("hideFocus",!1));}function I(){b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),O.unbind(".jsp");}function J(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash.substr(1));try{b=a("#"+d+', a[name="'+d+'"]');}catch(e){return;}b.length&&O.find(d)&&(0===R.scrollTop()?c=setInterval(function(){R.scrollTop()>0&&(x(b,!0),a(document).scrollTop(R.position().top),clearInterval(c));},50):(x(b,!0),a(document).scrollTop(R.position().top)));}}function K(){a(document.body).data("jspHijack")||(a(document.body).data("jspHijack",!0),a(document.body).delegate('a[href*="#"]',"click",function(b){var c,d,e,f,g,h,i=this.href.substr(0,this.href.indexOf("#")),j=location.href;if(-1!==location.href.indexOf("#")&&(j=location.href.substr(0,location.href.indexOf("#"))),i===j){c=escape(this.href.substr(this.href.indexOf("#")+1));try{d=a("#"+c+', a[name="'+c+'"]');}catch(k){return;}d.length&&(e=d.closest(".jspScrollable"),f=e.data("jsp"),f.scrollToElement(d,!0),e[0].scrollIntoView&&(g=a(window).scrollTop(),h=d.offset().top,(g>h||h>g+a(window).height())&&e[0].scrollIntoView()),b.preventDefault());}}));}function L(){var a,b,c,d,e,f=!1;R.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=y(),b=z(),c=h.pageX,d=h.pageY,e=!1,f=!0;}).bind("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=bb,j=$;return tb.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==bb&&j==$;}}).bind("touchend.jsp",function(){f=!1;}).bind("click.jsp-touchclick",function(){return e?(e=!1,!1):void 0;});}function M(){var a=z(),c=y();b.removeClass("jspScrollable").unbind(".jsp"),O.unbind(".jsp"),b.replaceWith(yb.append(O.children())),yb.scrollTop(a),yb.scrollLeft(c),pb&&clearInterval(pb);}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb=this,ub=!0,vb=!0,wb=!1,xb=!1,yb=b.clone(!1,!1).empty(),zb=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===b.css("box-sizing")?(qb=0,rb=0):(qb=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),rb=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)),a.extend(tb,{reinitialise:function(b){b=a.extend({},N,b),d(b);},scrollToElement:function(a,b,c){x(a,b,c);},scrollTo:function(a,b,c){w(a,c),v(b,c);},scrollToX:function(a,b){w(a,b);},scrollToY:function(a,b){v(a,b);},scrollToPercentX:function(a,b){w(a*(S-P),b);},scrollToPercentY:function(a,b){v(a*(T-Q),b);},scrollBy:function(a,b,c){tb.scrollByX(a,c),tb.scrollByY(b,c);},scrollByX:function(a,b){var c=y()+Math[0>a?"floor":"ceil"](a),d=c/(S-P);r(d*ab,b);},scrollByY:function(a,b){var c=z()+Math[0>a?"floor":"ceil"](a),d=c/(T-Q);p(d*Z,b);},positionDragX:function(a,b){r(a,b);},positionDragY:function(a,b){p(a,b);},animate:function(a,b,c,d,e){var f={};f[b]=c,a.animate(f,{duration:N.animateDuration,easing:N.animateEase,queue:!1,step:d,complete:e});},getContentPositionX:function(){return y();},getContentPositionY:function(){return z();},getContentWidth:function(){return S;},getContentHeight:function(){return T;},getPercentScrolledX:function(){return y()/(S-P);},getPercentScrolledY:function(){return z()/(T-Q);},getIsScrollableH:function(){return X;},getIsScrollableV:function(){return W;},getContentPane:function(){return O;},scrollToBottom:function(a){p(Z,a);},hijackInternalLinks:a.noop,destroy:function(){M();}}),d(c);}return b=a.extend({},a.fn.jScrollPane.defaults,b),a.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){b[this]=b[this]||b.speed;}),this.each(function(){var d=a(this),e=d.data("jsp");e?e.reinitialise(b):(a("script",d).filter('[type="text/javascript"],:not([type])').remove(),e=new c(d,b),d.data("jsp",e));});},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8};});;
!function(a,b){"use strict";function c(c,g){var h=this;h.$el=a(c),h.el=c,h.id=e++,h.$el.bind("destroyed",a.proxy(h.teardown,h)),h.$clonedHeader=null,h.$originalHeader=null,h.cachedHeaderHeight=null,h.isSticky=!1,h.hasBeenSticky=!1,h.leftOffset=null,h.topOffset=null,h.init=function(){h.setOptions(g),h.$el.each(function(){var b=a(this);b.css("padding",0),h.$originalHeader=a("thead:first",this),h.$clonedHeader=h.$originalHeader.clone(),b.trigger("clonedHeader."+d,[h.$clonedHeader]),h.$clonedHeader.addClass("tableFloatingHeader"),h.$clonedHeader.css({display:"none",opacity:0}),h.$originalHeader.addClass("tableFloatingHeaderOriginal"),h.$originalHeader.after(h.$clonedHeader),h.$printStyle=a('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),h.$head.append(h.$printStyle);}),h.updateWidth(),h.toggleHeaders(),h.bind();},h.destroy=function(){h.$el.unbind("destroyed",h.teardown),h.teardown();},h.teardown=function(){h.isSticky&&h.$originalHeader.css("position","static"),a.removeData(h.el,"plugin_"+d),h.unbind(),h.$clonedHeader.remove(),h.$originalHeader.removeClass("tableFloatingHeaderOriginal"),h.$originalHeader.css("visibility","visible"),h.$printStyle.remove(),h.el=null,h.$el=null;},h.bind=function(){h.$scrollableArea.on("scroll."+d,h.toggleHeaders),h.isWindowScrolling||(h.$window.on("scroll."+d+h.id,h.setPositionValues),h.$window.on("resize."+d+h.id,h.toggleHeaders)),h.$scrollableArea.on("resize."+d,h.toggleHeaders),h.$scrollableArea.on("resize."+d,h.updateWidth);},h.unbind=function(){h.$scrollableArea.off("."+d,h.toggleHeaders),h.isWindowScrolling||(h.$window.off("."+d+h.id,h.setPositionValues),h.$window.off("."+d+h.id,h.toggleHeaders)),h.$scrollableArea.off("."+d,h.updateWidth);},h.debounce=function(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e);},b);};},h.toggleHeaders=h.debounce(function(){h.$el&&h.$el.each(function(){var b,c=a(this),e=h.isWindowScrolling?isNaN(h.options.fixedOffset)?h.options.fixedOffset.outerHeight():h.options.fixedOffset:h.$scrollableArea.offset().top+(isNaN(h.options.fixedOffset)?0:h.options.fixedOffset),f=c.offset(),g=h.$scrollableArea.scrollTop()+e,i=h.$scrollableArea.scrollLeft(),j=h.options.cacheHeaderHeight?h.cachedHeaderHeight:h.$clonedHeader.height(),k=h.isWindowScrolling?g>f.top:e>f.top,l=(h.isWindowScrolling?g:0)<f.top+c.height()-j-(h.isWindowScrolling?0:e);k&&l?(b=f.left-i+h.options.leftOffset,h.$originalHeader.css({position:"fixed","margin-top":h.options.marginTop,left:b,"z-index":3}),h.leftOffset=b,h.topOffset=e,h.$clonedHeader.css("display",""),h.isSticky||(h.isSticky=!0,h.updateWidth(),c.trigger("enabledStickiness."+d)),h.setPositionValues()):h.isSticky&&(h.$originalHeader.css("position","static"),h.$clonedHeader.css("display","none"),h.isSticky=!1,h.resetWidth(a("td,th",h.$clonedHeader),a("td,th",h.$originalHeader)),c.trigger("disabledStickiness."+d));});},0),h.setPositionValues=h.debounce(function(){var a=h.$window.scrollTop(),b=h.$window.scrollLeft();!h.isSticky||0>a||a+h.$window.height()>h.$document.height()||0>b||b+h.$window.width()>h.$document.width()||h.$originalHeader.css({top:h.topOffset-(h.isWindowScrolling?0:a),left:h.leftOffset-(h.isWindowScrolling?0:b)});},0),h.updateWidth=h.debounce(function(){if(h.isSticky){h.$originalHeaderCells||(h.$originalHeaderCells=a("th,td",h.$originalHeader)),h.$clonedHeaderCells||(h.$clonedHeaderCells=a("th,td",h.$clonedHeader));var b=h.getWidth(h.$clonedHeaderCells);h.setWidth(b,h.$clonedHeaderCells,h.$originalHeaderCells),h.$originalHeader.css("width",h.$clonedHeader.width()),h.options.cacheHeaderHeight&&(h.cachedHeaderHeight=h.$clonedHeader.height());}},0),h.getWidth=function(c){var d=[];return c.each(function(c){var e,f=a(this);if("border-box"===f.css("box-sizing")){var g=f[0].getBoundingClientRect();e=g.width?g.width:g.right-g.left;}else{var i=a("th",h.$originalHeader);if("collapse"===i.css("border-collapse"))if(b.getComputedStyle)e=parseFloat(b.getComputedStyle(this,null).width);else{var j=parseFloat(f.css("padding-left")),k=parseFloat(f.css("padding-right")),l=parseFloat(f.css("border-width"));e=f.outerWidth()-j-k-l;}else e=f.width();}d[c]=e;}),d;},h.setWidth=function(a,b,c){b.each(function(b){var d=a[b];c.eq(b).css({"min-width":d,"max-width":d});});},h.resetWidth=function(b,c){b.each(function(b){var d=a(this);c.eq(b).css({"min-width":d.css("min-width"),"max-width":d.css("max-width")});});},h.setOptions=function(b){h.options=a.extend({},f,b),h.$window=a(h.options.objWindow),h.$head=a(h.options.objHead),h.$document=a(h.options.objDocument),h.$scrollableArea=a(h.options.scrollableArea),h.isWindowScrolling=h.$scrollableArea[0]===h.$window[0];},h.updateOptions=function(a){h.setOptions(a),h.unbind(),h.bind(),h.updateWidth(),h.toggleHeaders();},h.init();}var d="stickyTableHeaders",e=0,f={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:document,objHead:"head",objWindow:b,scrollableArea:b,cacheHeaderHeight:!1};a.fn[d]=function(b){return this.each(function(){var e=a.data(this,"plugin_"+d);e?"string"==typeof b?e[b].apply(e):e.updateOptions(b):"destroy"!==b&&a.data(this,"plugin_"+d,new c(this,b));});};}(jQuery,window);;
(function(e){var y=!1,D=!1,J=5E3,K=2E3,x=0,L=function(){var e=document.getElementsByTagName("script"),e=e[e.length-1].src.split("?")[0];return 0<e.split("/").length?e.split("/").slice(0,-1).join("/")+"/":"";}();Array.prototype.forEach||(Array.prototype.forEach=function(e,c){for(var h=0,l=this.length;h<l;++h)e.call(c,this[h],h,this);});var v=window.requestAnimationFrame||!1,w=window.cancelAnimationFrame||!1;["ms","moz","webkit","o"].forEach(function(e){v||(v=window[e+"RequestAnimationFrame"]);w||(w=window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"]);});var z=window.MutationObserver||window.WebKitMutationObserver||!1,F={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:0.3,rtlmode:!1,cursordragontouch:!1},E=!1,M=function(){if(E)return E;var e=document.createElement("DIV"),c={haspointerlock:"pointerLockElement" in document||"mozPointerLockElement" in document||"webkitPointerLockElement" in document};c.isopera="opera" in window;c.isopera12=c.isopera&&"getUserMedia" in navigator;c.isie="all" in document&&"attachEvent" in e&&!c.isopera;c.isieold=c.isie&&!("msInterpolationMode" in e.style);c.isie7=c.isie&&!c.isieold&&(!("documentMode" in document)||7==document.documentMode);c.isie8=c.isie&&"documentMode" in document&&8==document.documentMode;c.isie9=c.isie&&"performance" in window&&9<=document.documentMode;c.isie10=c.isie&&"performance" in window&&10<=document.documentMode;c.isie9mobile=/iemobile.9/i.test(navigator.userAgent);c.isie9mobile&&(c.isie9=!1);c.isie7mobile=!c.isie9mobile&&c.isie7&&/iemobile/i.test(navigator.userAgent);c.ismozilla="MozAppearance" in e.style;c.iswebkit="WebkitAppearance" in e.style;c.ischrome="chrome" in window;c.ischrome22=c.ischrome&&c.haspointerlock;c.ischrome26=c.ischrome&&"transition" in e.style;c.cantouch="ontouchstart" in document.documentElement||"ontouchstart" in window;c.hasmstouch=window.navigator.msPointerEnabled||!1;c.ismac=/^mac$/i.test(navigator.platform);c.isios=c.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform);c.isios4=c.isios&&!("seal" in Object);c.isandroid=/android/i.test(navigator.userAgent);c.trstyle=!1;c.hastransform=!1;c.hastranslate3d=!1;c.transitionstyle=!1;c.hastransition=!1;c.transitionend=!1;for(var h=["transform","msTransform","webkitTransform","MozTransform","OTransform"],l=0;l<h.length;l++)if("undefined"!=typeof e.style[h[l]]){c.trstyle=h[l];break;}c.hastransform=!1!=c.trstyle;c.hastransform&&(e.style[c.trstyle]="translate3d(1px,2px,3px)",c.hastranslate3d=/translate3d/.test(e.style[c.trstyle]));c.transitionstyle=!1;c.prefixstyle="";c.transitionend=!1;for(var h="transition webkitTransition MozTransition OTransition OTransition msTransition KhtmlTransition".split(" "),n=" -webkit- -moz- -o- -o -ms- -khtml-".split(" "),t="transitionend webkitTransitionEnd transitionend otransitionend oTransitionEnd msTransitionEnd KhtmlTransitionEnd".split(" "),l=0;l<h.length;l++)if(h[l] in e.style){c.transitionstyle=h[l];c.prefixstyle=n[l];c.transitionend=t[l];break;}c.ischrome26&&(c.prefixstyle=n[1]);c.hastransition=c.transitionstyle;a:{h=["-moz-grab","-webkit-grab","grab"];if(c.ischrome&&!c.ischrome22||c.isie)h=[];for(l=0;l<h.length;l++)if(n=h[l],e.style.cursor=n,e.style.cursor==n){h=n;break a;}h="url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize";};c.cursorgrabvalue=h;c.hasmousecapture="setCapture" in e;c.hasMutationObserver=!1!==z;return E=c;},N=function(k,c){function h(){var d=b.win;if("zIndex" in d)return d.zIndex();for(;0<d.length&&9!=d[0].nodeType;){var c=d.css("zIndex");if(!isNaN(c)&&0!=c)return parseInt(c);d=d.parent();}return !1;}function l(d,c,g){c=d.css(c);d=parseFloat(c);return isNaN(d)?(d=u[c]||0,g=3==d?g?b.win.outerHeight()-b.win.innerHeight():b.win.outerWidth()-b.win.innerWidth():1,b.isie8&&d&&(d+=1),g?d:0):d;}function n(d,c,g,e){b._bind(d,c,function(b){b=b?b:window.event;var e={original:b,target:b.target||b.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==b.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){b.preventDefault?b.preventDefault():b.returnValue=!1;return !1;},stopImmediatePropagation:function(){b.stopImmediatePropagation?b.stopImmediatePropagation():b.cancelBubble=!0;}};"mousewheel"==c?(e.deltaY=-0.025*b.wheelDelta,b.wheelDeltaX&&(e.deltaX=-0.025*b.wheelDeltaX)):e.deltaY=b.detail;return g.call(d,e);},e);}function t(d,c,g){var e,f;0==d.deltaMode?(e=-Math.floor(d.deltaX*(b.opt.mousescrollstep/54)),f=-Math.floor(d.deltaY*(b.opt.mousescrollstep/54))):1==d.deltaMode&&(e=-Math.floor(d.deltaX*b.opt.mousescrollstep),f=-Math.floor(d.deltaY*b.opt.mousescrollstep));c&&(0==e&&f)&&(e=f,f=0);e&&(b.scrollmom&&b.scrollmom.stop(),b.lastdeltax+=e,b.debounced("mousewheelx",function(){var d=b.lastdeltax;b.lastdeltax=0;b.rail.drag||b.doScrollLeftBy(d);},120));if(f){if(b.opt.nativeparentscrolling&&g&&!b.ispage&&!b.zoomactive)if(0>f){if(b.getScrollTop()>=b.page.maxh)return !0;}else{if(0>=b.getScrollTop())return !0;}b.scrollmom&&b.scrollmom.stop();b.lastdeltay+=f;b.debounced("mousewheely",function(){var d=b.lastdeltay;b.lastdeltay=0;b.rail.drag||b.doScrollBy(d);},120);}d.stopImmediatePropagation();return d.preventDefault();}var b=this;this.version="3.4.0";this.name="nicescroll";this.me=c;this.opt={doc:e("body"),win:!1};e.extend(this.opt,F);this.opt.snapbackspeed=80;if(k)for(var q in b.opt)"undefined"!=typeof k[q]&&(b.opt[q]=k[q]);this.iddoc=(this.doc=b.opt.doc)&&this.doc[0]?this.doc[0].id||"":"";this.ispage=/BODY|HTML/.test(b.opt.win?b.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=!1!==b.opt.win;this.win=b.opt.win||(this.ispage?e(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?e(window):this.win;this.body=e("body");this.iframe=this.isfixed=this.viewport=!1;this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName;this.istextarea="TEXTAREA"==this.win[0].nodeName;this.forcescreen=!1;this.canshowonmouseevent="scroll"!=b.opt.autohidemode;this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.observerremover=this.observer=this.scrollmom=this.scrollrunning=this.checkrtlmode=!1;do this.id="ascrail"+K++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.selectiondrag=this.cursorfreezed=this.cursor=this.rail=!1;this.visibility=!0;this.hidden=this.locked=!1;this.cursoractive=!0;this.overflowx=b.opt.overflowx;this.overflowy=b.opt.overflowy;this.nativescrollingarea=!1;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltay=this.lastdeltax=0;this.detected=M();var f=e.extend({},this.detected);this.ishwscroll=(this.canhwscroll=f.hastransform&&b.opt.hwacceleration)&&b.haswrapper;this.istouchcapable=!1;f.cantouch&&(f.ischrome&&!f.isios&&!f.isandroid)&&(this.istouchcapable=!0,f.cantouch=!1);f.cantouch&&(f.ismozilla&&!f.isios)&&(this.istouchcapable=!0,f.cantouch=!1);b.opt.enablemouselockapi||(f.hasmousecapture=!1,f.haspointerlock=!1);this.delayed=function(d,c,g,e){var f=b.delaylist[d],h=(new Date()).getTime();if(!e&&f&&f.tt)return !1;f&&f.tt&&clearTimeout(f.tt);if(f&&f.last+g>h&&!f.tt)b.delaylist[d]={last:h+g,tt:setTimeout(function(){b.delaylist[d].tt=0;c.call();},g)};else{if(!f||!f.tt)b.delaylist[d]={last:h,tt:0},setTimeout(function(){c.call();},0);}};this.debounced=function(d,c,g){var f=b.delaylist[d];(new Date()).getTime();b.delaylist[d]=c;f||setTimeout(function(){var c=b.delaylist[d];b.delaylist[d]=!1;c.call();},g);};this.synched=function(d,c){b.synclist[d]=c;(function(){b.onsync||(v(function(){b.onsync=!1;for(d in b.synclist){var c=b.synclist[d];c&&c.call(b);b.synclist[d]=!1;}}),b.onsync=!0);})();return d;};this.unsynched=function(d){b.synclist[d]&&(b.synclist[d]=!1);};this.css=function(d,c){for(var g in c)b.saved.css.push([d,g,d.css(g)]),d.css(g,c[g]);};this.scrollTop=function(d){return "undefined"==typeof d?b.getScrollTop():b.setScrollTop(d);};this.scrollLeft=function(d){return "undefined"==typeof d?b.getScrollLeft():b.setScrollLeft(d);};BezierClass=function(b,c,g,f,e,h,l){this.st=b;this.ed=c;this.spd=g;this.p1=f||0;this.p2=e||1;this.p3=h||0;this.p4=l||1;this.ts=(new Date()).getTime();this.df=this.ed-this.st;};BezierClass.prototype={B2:function(b){return 3*b*b*(1-b);},B3:function(b){return 3*b*(1-b)*(1-b);},B4:function(b){return (1-b)*(1-b)*(1-b);},getNow:function(){var b=1-((new Date()).getTime()-this.ts)/this.spd,c=this.B2(b)+this.B3(b)+this.B4(b);return 0>b?this.ed:this.st+Math.round(this.df*c);},update:function(b,c){this.st=this.getNow();this.ed=b;this.spd=c;this.ts=(new Date()).getTime();this.df=this.ed-this.st;return this;}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"};f.hastranslate3d&&f.isios&&this.doc.css("-webkit-backface-visibility","hidden");var r=function(){var d=b.doc.css(f.trstyle);return d&&"matrix"==d.substr(0,6)?d.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1;};this.getScrollTop=function(d){if(!d){if(d=r())return 16==d.length?-d[13]:-d[5];if(b.timerscroll&&b.timerscroll.bz)return b.timerscroll.bz.getNow();}return b.doc.translate.y;};this.getScrollLeft=function(d){if(!d){if(d=r())return 16==d.length?-d[12]:-d[4];if(b.timerscroll&&b.timerscroll.bh)return b.timerscroll.bh.getNow();}return b.doc.translate.x;};this.notifyScrollEvent=document.createEvent?function(b){var c=document.createEvent("UIEvents");c.initUIEvent("scroll",!1,!0,window,1);b.dispatchEvent(c);}:document.fireEvent?function(b){var c=document.createEventObject();b.fireEvent("onscroll");c.cancelBubble=!0;}:function(b,c){};f.hastranslate3d&&b.opt.enabletranslate3d?(this.setScrollTop=function(d,c){b.doc.translate.y=d;b.doc.translate.ty=-1*d+"px";b.doc.css(f.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)");c||b.notifyScrollEvent(b.win[0]);},this.setScrollLeft=function(d,c){b.doc.translate.x=d;b.doc.translate.tx=-1*d+"px";b.doc.css(f.trstyle,"translate3d("+b.doc.translate.tx+","+b.doc.translate.ty+",0px)");c||b.notifyScrollEvent(b.win[0]);}):(this.setScrollTop=function(d,c){b.doc.translate.y=d;b.doc.translate.ty=-1*d+"px";b.doc.css(f.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")");c||b.notifyScrollEvent(b.win[0]);},this.setScrollLeft=function(d,c){b.doc.translate.x=d;b.doc.translate.tx=-1*d+"px";b.doc.css(f.trstyle,"translate("+b.doc.translate.tx+","+b.doc.translate.ty+")");c||b.notifyScrollEvent(b.win[0]);});}else this.getScrollTop=function(){return b.docscroll.scrollTop();},this.setScrollTop=function(d){return b.docscroll.scrollTop(d);},this.getScrollLeft=function(){return b.docscroll.scrollLeft();},this.setScrollLeft=function(d){return b.docscroll.scrollLeft(d);};this.getTarget=function(b){return !b?!1:b.target?b.target:b.srcElement?b.srcElement:!1;};this.hasParent=function(b,c){if(!b)return !1;for(var g=b.target||b.srcElement||b||!1;g&&g.id!=c;)g=g.parentNode||!1;return !1!==g;};var u={thin:1,medium:3,thick:5};this.getOffset=function(){if(b.isfixed)return {top:parseFloat(b.win.css("top")),left:parseFloat(b.win.css("left"))};if(!b.viewport)return b.win.offset();var d=b.win.offset(),c=b.viewport.offset();return {top:d.top-c.top+b.viewport.scrollTop(),left:d.left-c.left+b.viewport.scrollLeft()};};this.updateScrollBar=function(d){if(b.ishwscroll)b.rail.css({height:b.win.innerHeight()}),b.railh&&b.railh.css({width:b.win.innerWidth()});else{var c=b.getOffset(),g=c.top,f=c.left,g=g+l(b.win,"border-top-width",!0);b.win.outerWidth();b.win.innerWidth();var f=f+(b.rail.align?b.win.outerWidth()-l(b.win,"border-right-width")-b.rail.width:l(b.win,"border-left-width")),e=b.opt.railoffset;e&&(e.top&&(g+=e.top),b.rail.align&&e.left&&(f+=e.left));b.locked||b.rail.css({top:g,left:f,height:d?d.h:b.win.innerHeight()});b.zoom&&b.zoom.css({top:g+1,left:1==b.rail.align?f-20:f+b.rail.width+4});b.railh&&!b.locked&&(g=c.top,f=c.left,d=b.railh.align?g+l(b.win,"border-top-width",!0)+b.win.innerHeight()-b.railh.height:g+l(b.win,"border-top-width",!0),f+=l(b.win,"border-left-width"),b.railh.css({top:d,left:f,width:b.railh.width}));}};this.doRailClick=function(d,c,g){var f;b.locked||(b.cancelEvent(d),c?(c=g?b.doScrollLeft:b.doScrollTop,f=g?(d.pageX-b.railh.offset().left-b.cursorwidth/2)*b.scrollratio.x:(d.pageY-b.rail.offset().top-b.cursorheight/2)*b.scrollratio.y,c(f)):(c=g?b.doScrollLeftBy:b.doScrollBy,f=g?b.scroll.x:b.scroll.y,d=g?d.pageX-b.railh.offset().left:d.pageY-b.rail.offset().top,g=g?b.view.w:b.view.h,f>=d?c(g):c(-g)));};b.hasanimationframe=v;b.hascancelanimationframe=w;b.hasanimationframe?b.hascancelanimationframe||(w=function(){b.cancelAnimationFrame=!0;}):(v=function(b){return setTimeout(b,15-Math.floor(+new Date()/1E3)%16);},w=clearInterval);this.init=function(){b.saved.css=[];if(f.isie7mobile)return !0;f.hasmstouch&&b.css(b.ispage?e("html"):b.win,{"-ms-touch-action":"none"});b.zindex="auto";b.zindex=!b.ispage&&"auto"==b.opt.zindex?h()||"auto":b.opt.zindex;!b.ispage&&"auto"!=b.zindex&&b.zindex>x&&(x=b.zindex);b.isie&&(0==b.zindex&&"auto"==b.opt.zindex)&&(b.zindex="auto");if(!b.ispage||!f.cantouch&&!f.isieold&&!f.isie9mobile){var d=b.docscroll;b.ispage&&(d=b.haswrapper?b.win:b.doc);f.isie9mobile||b.css(d,{"overflow-y":"hidden"});b.ispage&&f.isie7&&("BODY"==b.doc[0].nodeName?b.css(e("html"),{"overflow-y":"hidden"}):"HTML"==b.doc[0].nodeName&&b.css(e("body"),{"overflow-y":"hidden"}));f.isios&&(!b.ispage&&!b.haswrapper)&&b.css(e("body"),{"-webkit-overflow-scrolling":"touch"});var c=e(document.createElement("div"));c.css({position:"relative",top:0,"float":"right",width:b.opt.cursorwidth,height:"0px","background-color":b.opt.cursorcolor,border:b.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,"border-radius":b.opt.cursorborderradius});c.hborder=parseFloat(c.outerHeight()-c.innerHeight());b.cursor=c;var g=e(document.createElement("div"));g.attr("id",b.id);g.addClass("nicescroll-rails");var l,k,n=["left","right"],G;for(G in n)k=n[G],(l=b.opt.railpadding[k])?g.css("padding-"+k,l+"px"):b.opt.railpadding[k]=0;g.append(c);g.width=Math.max(parseFloat(b.opt.cursorwidth),c.outerWidth())+b.opt.railpadding.left+b.opt.railpadding.right;g.css({width:g.width+"px",zIndex:b.zindex,background:b.opt.background,cursor:"default"});g.visibility=!0;g.scrollable=!0;g.align="left"==b.opt.railalign?0:1;b.rail=g;c=b.rail.drag=!1;b.opt.boxzoom&&(!b.ispage&&!f.isieold)&&(c=document.createElement("div"),b.bind(c,"click",b.doZoom),b.zoom=e(c),b.zoom.css({cursor:"pointer","z-index":b.zindex,backgroundImage:"url("+L+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),b.opt.dblclickzoom&&b.bind(b.win,"dblclick",b.doZoom),f.cantouch&&b.opt.gesturezoom&&(b.ongesturezoom=function(d){1.5<d.scale&&b.doZoomIn(d);0.8>d.scale&&b.doZoomOut(d);return b.cancelEvent(d);},b.bind(b.win,"gestureend",b.ongesturezoom)));b.railh=!1;if(b.opt.horizrailenabled){b.css(d,{"overflow-x":"hidden"});c=e(document.createElement("div"));c.css({position:"relative",top:0,height:b.opt.cursorwidth,width:"0px","background-color":b.opt.cursorcolor,border:b.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":b.opt.cursorborderradius,"-moz-border-radius":b.opt.cursorborderradius,"border-radius":b.opt.cursorborderradius});c.wborder=parseFloat(c.outerWidth()-c.innerWidth());b.cursorh=c;var m=e(document.createElement("div"));m.attr("id",b.id+"-hr");m.addClass("nicescroll-rails");m.height=Math.max(parseFloat(b.opt.cursorwidth),c.outerHeight());m.css({height:m.height+"px",zIndex:b.zindex,background:b.opt.background});m.append(c);m.visibility=!0;m.scrollable=!0;m.align="top"==b.opt.railvalign?0:1;b.railh=m;b.railh.drag=!1;}b.ispage?(g.css({position:"fixed",top:"0px",height:"100%"}),g.align?g.css({right:"0px"}):g.css({left:"0px"}),b.body.append(g),b.railh&&(m.css({position:"fixed",left:"0px",width:"100%"}),m.align?m.css({bottom:"0px"}):m.css({top:"0px"}),b.body.append(m))):(b.ishwscroll?("static"==b.win.css("position")&&b.css(b.win,{position:"relative"}),d="HTML"==b.win[0].nodeName?b.body:b.win,b.zoom&&(b.zoom.css({position:"absolute",top:1,right:0,"margin-right":g.width+4}),d.append(b.zoom)),g.css({position:"absolute",top:0}),g.align?g.css({right:0}):g.css({left:0}),d.append(g),m&&(m.css({position:"absolute",left:0,bottom:0}),m.align?m.css({bottom:0}):m.css({top:0}),d.append(m))):(b.isfixed="fixed"==b.win.css("position"),d=b.isfixed?"fixed":"absolute",b.isfixed||(b.viewport=b.getViewport(b.win[0])),b.viewport&&(b.body=b.viewport,!1==/relative|absolute/.test(b.viewport.css("position"))&&b.css(b.viewport,{position:"relative"})),g.css({position:d}),b.zoom&&b.zoom.css({position:d}),b.updateScrollBar(),b.body.append(g),b.zoom&&b.body.append(b.zoom),b.railh&&(m.css({position:d}),b.body.append(m))),f.isios&&b.css(b.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),f.isie&&b.opt.disableoutline&&b.win.attr("hideFocus","true"),f.iswebkit&&b.opt.disableoutline&&b.win.css({outline:"none"}));!1===b.opt.autohidemode?(b.autohidedom=!1,b.rail.css({opacity:b.opt.cursoropacitymax}),b.railh&&b.railh.css({opacity:b.opt.cursoropacitymax})):!0===b.opt.autohidemode?(b.autohidedom=e().add(b.rail),f.isie8&&(b.autohidedom=b.autohidedom.add(b.cursor)),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh)),b.railh&&f.isie8&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"scroll"==b.opt.autohidemode?(b.autohidedom=e().add(b.rail),b.railh&&(b.autohidedom=b.autohidedom.add(b.railh))):"cursor"==b.opt.autohidemode?(b.autohidedom=e().add(b.cursor),b.railh&&(b.autohidedom=b.autohidedom.add(b.cursorh))):"hidden"==b.opt.autohidemode&&(b.autohidedom=!1,b.hide(),b.locked=!1);if(f.isie9mobile)b.scrollmom=new H(b),b.onmangotouch=function(d){d=b.getScrollTop();var c=b.getScrollLeft();if(d==b.scrollmom.lastscrolly&&c==b.scrollmom.lastscrollx)return !0;var g=d-b.mangotouch.sy,f=c-b.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(f,2)+Math.pow(g,2)))){var p=0>g?-1:1,e=0>f?-1:1,h=+new Date();b.mangotouch.lazy&&clearTimeout(b.mangotouch.lazy);80<h-b.mangotouch.tm||b.mangotouch.dry!=p||b.mangotouch.drx!=e?(b.scrollmom.stop(),b.scrollmom.reset(c,d),b.mangotouch.sy=d,b.mangotouch.ly=d,b.mangotouch.sx=c,b.mangotouch.lx=c,b.mangotouch.dry=p,b.mangotouch.drx=e,b.mangotouch.tm=h):(b.scrollmom.stop(),b.scrollmom.update(b.mangotouch.sx-f,b.mangotouch.sy-g),b.mangotouch.tm=h,g=Math.max(Math.abs(b.mangotouch.ly-d),Math.abs(b.mangotouch.lx-c)),b.mangotouch.ly=d,b.mangotouch.lx=c,2<g&&(b.mangotouch.lazy=setTimeout(function(){b.mangotouch.lazy=!1;b.mangotouch.dry=0;b.mangotouch.drx=0;b.mangotouch.tm=0;b.scrollmom.doMomentum(30);},100)));}},g=b.getScrollTop(),m=b.getScrollLeft(),b.mangotouch={sy:g,ly:g,dry:0,sx:m,lx:m,drx:0,lazy:!1,tm:0},b.bind(b.docscroll,"scroll",b.onmangotouch);else{if(f.cantouch||b.istouchcapable||b.opt.touchbehavior||f.hasmstouch){b.scrollmom=new H(b);b.ontouchstart=function(d){if(d.pointerType&&2!=d.pointerType)return !1;if(!b.locked){if(f.hasmstouch)for(var c=d.target?d.target:!1;c;){var g=e(c).getNiceScroll();if(0<g.length&&g[0].me==b.me)break;if(0<g.length)return !1;if("DIV"==c.nodeName&&c.id==b.id)break;c=c.parentNode?c.parentNode:!1;}b.cancelScroll();if((c=b.getTarget(d))&&/INPUT/i.test(c.nodeName)&&/range/i.test(c.type))return b.stopPropagation(d);!("clientX" in d)&&"changedTouches" in d&&(d.clientX=d.changedTouches[0].clientX,d.clientY=d.changedTouches[0].clientY);b.forcescreen&&(g=d,d={original:d.original?d.original:d},d.clientX=g.screenX,d.clientY=g.screenY);b.rail.drag={x:d.clientX,y:d.clientY,sx:b.scroll.x,sy:b.scroll.y,st:b.getScrollTop(),sl:b.getScrollLeft(),pt:2,dl:!1};if(b.ispage||!b.opt.directionlockdeadzone)b.rail.drag.dl="f";else{var g=e(window).width(),p=e(window).height(),h=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),l=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),p=Math.max(0,l-p),g=Math.max(0,h-g);b.rail.drag.ck=!b.rail.scrollable&&b.railh.scrollable?0<p?"v":!1:b.rail.scrollable&&!b.railh.scrollable?0<g?"h":!1:!1;b.rail.drag.ck||(b.rail.drag.dl="f");}b.opt.touchbehavior&&(b.isiframe&&f.isie)&&(g=b.win.position(),b.rail.drag.x+=g.left,b.rail.drag.y+=g.top);b.hasmoving=!1;b.lastmouseup=!1;b.scrollmom.reset(d.clientX,d.clientY);if(!f.cantouch&&!this.istouchcapable&&!f.hasmstouch){if(!c||!/INPUT|SELECT|TEXTAREA/i.test(c.nodeName))return !b.ispage&&f.hasmousecapture&&c.setCapture(),b.cancelEvent(d);/SUBMIT|CANCEL|BUTTON/i.test(e(c).attr("type"))&&(pc={tg:c,click:!1},b.preventclick=pc);}}};b.ontouchend=function(d){if(d.pointerType&&2!=d.pointerType)return !1;if(b.rail.drag&&2==b.rail.drag.pt&&(b.scrollmom.doMomentum(),b.rail.drag=!1,b.hasmoving&&(b.hasmoving=!1,b.lastmouseup=!0,b.hideCursor(),f.hasmousecapture&&document.releaseCapture(),!f.cantouch)))return b.cancelEvent(d);};var q=b.opt.touchbehavior&&b.isiframe&&!f.hasmousecapture;b.ontouchmove=function(d,c){if(d.pointerType&&2!=d.pointerType)return !1;if(b.rail.drag&&2==b.rail.drag.pt){if(f.cantouch&&"undefined"==typeof d.original)return !0;b.hasmoving=!0;b.preventclick&&!b.preventclick.click&&(b.preventclick.click=b.preventclick.tg.onclick||!1,b.preventclick.tg.onclick=b.onpreventclick);d=e.extend({original:d},d);"changedTouches" in d&&(d.clientX=d.changedTouches[0].clientX,d.clientY=d.changedTouches[0].clientY);if(b.forcescreen){var g=d;d={original:d.original?d.original:d};d.clientX=g.screenX;d.clientY=g.screenY;}g=ofy=0;if(q&&!c){var p=b.win.position(),g=-p.left;ofy=-p.top;}var h=d.clientY+ofy,p=h-b.rail.drag.y,l=d.clientX+g,k=l-b.rail.drag.x,s=b.rail.drag.st-p;b.ishwscroll&&b.opt.bouncescroll?0>s?s=Math.round(s/2):s>b.page.maxh&&(s=b.page.maxh+Math.round((s-b.page.maxh)/2)):(0>s&&(h=s=0),s>b.page.maxh&&(s=b.page.maxh,h=0));if(b.railh&&b.railh.scrollable){var m=b.rail.drag.sl-k;b.ishwscroll&&b.opt.bouncescroll?0>m?m=Math.round(m/2):m>b.page.maxw&&(m=b.page.maxw+Math.round((m-b.page.maxw)/2)):(0>m&&(l=m=0),m>b.page.maxw&&(m=b.page.maxw,l=0));}g=!1;if(b.rail.drag.dl)g=!0,"v"==b.rail.drag.dl?m=b.rail.drag.sl:"h"==b.rail.drag.dl&&(s=b.rail.drag.st);else{var p=Math.abs(p),k=Math.abs(k),n=b.opt.directionlockdeadzone;if("v"==b.rail.drag.ck){if(p>n&&k<=0.3*p)return b.rail.drag=!1,!0;k>n&&(b.rail.drag.dl="f",e("body").scrollTop(e("body").scrollTop()));}else{if("h"==b.rail.drag.ck){if(k>n&&p<=0.3*az)return b.rail.drag=!1,!0;p>n&&(b.rail.drag.dl="f",e("body").scrollLeft(e("body").scrollLeft()));}}}b.synched("touchmove",function(){b.rail.drag&&2==b.rail.drag.pt&&(b.prepareTransition&&b.prepareTransition(0),b.rail.scrollable&&b.setScrollTop(s),b.scrollmom.update(l,h),b.railh&&b.railh.scrollable?(b.setScrollLeft(m),b.showCursor(s,m)):b.showCursor(s),f.isie10&&document.selection.clear());});f.ischrome&&b.istouchcapable&&(g=!1);if(g)return b.cancelEvent(d);}};}b.onmousedown=function(d,c){if(!(b.rail.drag&&1!=b.rail.drag.pt)){if(b.locked)return b.cancelEvent(d);b.cancelScroll();b.rail.drag={x:d.clientX,y:d.clientY,sx:b.scroll.x,sy:b.scroll.y,pt:1,hr:!!c};var g=b.getTarget(d);!b.ispage&&f.hasmousecapture&&g.setCapture();b.isiframe&&!f.hasmousecapture&&(b.saved.csspointerevents=b.doc.css("pointer-events"),b.css(b.doc,{"pointer-events":"none"}));return b.cancelEvent(d);}};b.onmouseup=function(d){if(b.rail.drag&&(f.hasmousecapture&&document.releaseCapture(),b.isiframe&&!f.hasmousecapture&&b.doc.css("pointer-events",b.saved.csspointerevents),1==b.rail.drag.pt))return b.rail.drag=!1,b.cancelEvent(d);};b.onmousemove=function(d){if(b.rail.drag&&1==b.rail.drag.pt){if(f.ischrome&&0==d.which)return b.onmouseup(d);b.cursorfreezed=!0;if(b.rail.drag.hr){b.scroll.x=b.rail.drag.sx+(d.clientX-b.rail.drag.x);0>b.scroll.x&&(b.scroll.x=0);var c=b.scrollvaluemaxw;b.scroll.x>c&&(b.scroll.x=c);}else b.scroll.y=b.rail.drag.sy+(d.clientY-b.rail.drag.y),0>b.scroll.y&&(b.scroll.y=0),c=b.scrollvaluemax,b.scroll.y>c&&(b.scroll.y=c);b.synched("mousemove",function(){b.rail.drag&&1==b.rail.drag.pt&&(b.showCursor(),b.rail.drag.hr?b.doScrollLeft(Math.round(b.scroll.x*b.scrollratio.x),b.opt.cursordragspeed):b.doScrollTop(Math.round(b.scroll.y*b.scrollratio.y),b.opt.cursordragspeed));});return b.cancelEvent(d);}};if(f.cantouch||b.opt.touchbehavior)b.onpreventclick=function(d){if(b.preventclick)return b.preventclick.tg.onclick=b.preventclick.click,b.preventclick=!1,b.cancelEvent(d);},b.bind(b.win,"mousedown",b.ontouchstart),b.onclick=f.isios?!1:function(d){return b.lastmouseup?(b.lastmouseup=!1,b.cancelEvent(d)):!0;},b.opt.grabcursorenabled&&f.cursorgrabvalue&&(b.css(b.ispage?b.doc:b.win,{cursor:f.cursorgrabvalue}),b.css(b.rail,{cursor:f.cursorgrabvalue}));else{var r=function(d){if(b.selectiondrag){if(d){var c=b.win.outerHeight();d=d.pageY-b.selectiondrag.top;0<d&&d<c&&(d=0);d>=c&&(d-=c);b.selectiondrag.df=d;}0!=b.selectiondrag.df&&(b.doScrollBy(2*-Math.floor(b.selectiondrag.df/6)),b.debounced("doselectionscroll",function(){r();},50));}};b.hasTextSelected="getSelection" in document?function(){return 0<document.getSelection().rangeCount;}:"selection" in document?function(){return "None"!=document.selection.type;}:function(){return !1;};b.onselectionstart=function(d){b.ispage||(b.selectiondrag=b.win.offset());};b.onselectionend=function(d){b.selectiondrag=!1;};b.onselectiondrag=function(d){b.selectiondrag&&b.hasTextSelected()&&b.debounced("selectionscroll",function(){r(d);},250);};}f.hasmstouch&&(b.css(b.rail,{"-ms-touch-action":"none"}),b.css(b.cursor,{"-ms-touch-action":"none"}),b.bind(b.win,"MSPointerDown",b.ontouchstart),b.bind(document,"MSPointerUp",b.ontouchend),b.bind(document,"MSPointerMove",b.ontouchmove),b.bind(b.cursor,"MSGestureHold",function(b){b.preventDefault();}),b.bind(b.cursor,"contextmenu",function(b){b.preventDefault();}));this.istouchcapable&&(b.bind(b.win,"touchstart",b.ontouchstart),b.bind(document,"touchend",b.ontouchend),b.bind(document,"touchcancel",b.ontouchend),b.bind(document,"touchmove",b.ontouchmove));b.bind(b.cursor,"mousedown",b.onmousedown);b.bind(b.cursor,"mouseup",b.onmouseup);b.railh&&(b.bind(b.cursorh,"mousedown",function(d){b.onmousedown(d,!0);}),b.bind(b.cursorh,"mouseup",function(d){if(!(b.rail.drag&&2==b.rail.drag.pt))return b.rail.drag=!1,b.hasmoving=!1,b.hideCursor(),f.hasmousecapture&&document.releaseCapture(),b.cancelEvent(d);}));if(b.opt.cursordragontouch||!f.cantouch&&!b.opt.touchbehavior)b.rail.css({cursor:"default"}),b.railh&&b.railh.css({cursor:"default"}),b.jqbind(b.rail,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=!0;}),b.jqbind(b.rail,"mouseleave",function(){b.rail.active=!1;b.rail.drag||b.hideCursor();}),b.opt.sensitiverail&&(b.bind(b.rail,"click",function(d){b.doRailClick(d,!1,!1);}),b.bind(b.rail,"dblclick",function(d){b.doRailClick(d,!0,!1);}),b.bind(b.cursor,"click",function(d){b.cancelEvent(d);}),b.bind(b.cursor,"dblclick",function(d){b.cancelEvent(d);})),b.railh&&(b.jqbind(b.railh,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=!0;}),b.jqbind(b.railh,"mouseleave",function(){b.rail.active=!1;b.rail.drag||b.hideCursor();}),b.opt.sensitiverail&&(b.bind(b.railh,"click",function(d){b.doRailClick(d,!1,!0);}),b.bind(b.railh,"dblclick",function(d){b.doRailClick(d,!0,!0);}),b.bind(b.cursorh,"click",function(d){b.cancelEvent(d);}),b.bind(b.cursorh,"dblclick",function(d){b.cancelEvent(d);})));!f.cantouch&&!b.opt.touchbehavior?(b.bind(f.hasmousecapture?b.win:document,"mouseup",b.onmouseup),b.bind(document,"mousemove",b.onmousemove),b.onclick&&b.bind(document,"click",b.onclick),!b.ispage&&b.opt.enablescrollonselection&&(b.bind(b.win[0],"mousedown",b.onselectionstart),b.bind(document,"mouseup",b.onselectionend),b.bind(b.cursor,"mouseup",b.onselectionend),b.cursorh&&b.bind(b.cursorh,"mouseup",b.onselectionend),b.bind(document,"mousemove",b.onselectiondrag)),b.zoom&&(b.jqbind(b.zoom,"mouseenter",function(){b.canshowonmouseevent&&b.showCursor();b.rail.active=!0;}),b.jqbind(b.zoom,"mouseleave",function(){b.rail.active=!1;b.rail.drag||b.hideCursor();}))):(b.bind(f.hasmousecapture?b.win:document,"mouseup",b.ontouchend),b.bind(document,"mousemove",b.ontouchmove),b.onclick&&b.bind(document,"click",b.onclick),b.opt.cursordragontouch&&(b.bind(b.cursor,"mousedown",b.onmousedown),b.bind(b.cursor,"mousemove",b.onmousemove),b.cursorh&&b.bind(b.cursorh,"mousedown",b.onmousedown),b.cursorh&&b.bind(b.cursorh,"mousemove",b.onmousemove)));b.opt.enablemousewheel&&(b.isiframe||b.bind(f.isie&&b.ispage?document:b.docscroll,"mousewheel",b.onmousewheel),b.bind(b.rail,"mousewheel",b.onmousewheel),b.railh&&b.bind(b.railh,"mousewheel",b.onmousewheelhr));!b.ispage&&(!f.cantouch&&!/HTML|BODY/.test(b.win[0].nodeName))&&(b.win.attr("tabindex")||b.win.attr({tabindex:J++}),b.jqbind(b.win,"focus",function(d){y=b.getTarget(d).id||!0;b.hasfocus=!0;b.canshowonmouseevent&&b.noticeCursor();}),b.jqbind(b.win,"blur",function(d){y=!1;b.hasfocus=!1;}),b.jqbind(b.win,"mouseenter",function(d){D=b.getTarget(d).id||!0;b.hasmousefocus=!0;b.canshowonmouseevent&&b.noticeCursor();}),b.jqbind(b.win,"mouseleave",function(){D=!1;b.hasmousefocus=!1;}));}b.onkeypress=function(d){if(b.locked&&0==b.page.maxh)return !0;d=d?d:window.e;var c=b.getTarget(d);if(c&&/INPUT|TEXTAREA|SELECT|OPTION/.test(c.nodeName)&&(!c.getAttribute("type")&&!c.type||!/submit|button|cancel/i.tp))return !0;if(b.hasfocus||b.hasmousefocus&&!y||b.ispage&&!y&&!D){c=d.keyCode;if(b.locked&&27!=c)return b.cancelEvent(d);var g=d.ctrlKey||!1,p=d.shiftKey||!1,f=!1;switch(c){case 38:case 63233:b.doScrollBy(72);f=!0;break;case 40:case 63235:b.doScrollBy(-72);f=!0;break;case 37:case 63232:b.railh&&(g?b.doScrollLeft(0):b.doScrollLeftBy(72),f=!0);break;case 39:case 63234:b.railh&&(g?b.doScrollLeft(b.page.maxw):b.doScrollLeftBy(-72),f=!0);break;case 33:case 63276:b.doScrollBy(b.view.h);f=!0;break;case 34:case 63277:b.doScrollBy(-b.view.h);f=!0;break;case 36:case 63273:b.railh&&g?b.doScrollPos(0,0):b.doScrollTo(0);f=!0;break;case 35:case 63275:b.railh&&g?b.doScrollPos(b.page.maxw,b.page.maxh):b.doScrollTo(b.page.maxh);f=!0;break;case 32:b.opt.spacebarenabled&&(p?b.doScrollBy(b.view.h):b.doScrollBy(-b.view.h),f=!0);break;case 27:b.zoomactive&&(b.doZoom(),f=!0);}if(f)return b.cancelEvent(d);}};b.opt.enablekeyboard&&b.bind(document,f.isopera&&!f.isopera12?"keypress":"keydown",b.onkeypress);b.bind(window,"resize",b.lazyResize);b.bind(window,"orientationchange",b.lazyResize);b.bind(window,"load",b.lazyResize);if(f.ischrome&&!b.ispage&&!b.haswrapper){var t=b.win.attr("style"),g=parseFloat(b.win.css("width"))+1;b.win.css("width",g);b.synched("chromefix",function(){b.win.attr("style",t);});}b.onAttributeChange=function(d){b.lazyResize(250);};!b.ispage&&!b.haswrapper&&(!1!==z?(b.observer=new z(function(d){d.forEach(b.onAttributeChange);}),b.observer.observe(b.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),b.observerremover=new z(function(d){d.forEach(function(d){if(0<d.removedNodes.length)for(var c in d.removedNodes)if(d.removedNodes[c]==b.win[0])return b.remove();});}),b.observerremover.observe(b.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(b.bind(b.win,f.isie&&!f.isie9?"propertychange":"DOMAttrModified",b.onAttributeChange),f.isie9&&b.win[0].attachEvent("onpropertychange",b.onAttributeChange),b.bind(b.win,"DOMNodeRemoved",function(d){d.target==b.win[0]&&b.remove();})));!b.ispage&&b.opt.boxzoom&&b.bind(window,"resize",b.resizeZoom);b.istextarea&&b.bind(b.win,"mouseup",b.lazyResize);b.checkrtlmode=!0;b.lazyResize(30);}if("IFRAME"==this.doc[0].nodeName){var I=function(d){b.iframexd=!1;try{var c="contentDocument" in this?this.contentDocument:this.contentWindow.document;}catch(g){b.iframexd=!0,c=!1;}if(b.iframexd)return "console" in window&&console.log("NiceScroll error: policy restriced iframe"),!0;b.forcescreen=!0;b.isiframe&&(b.iframe={doc:e(c),html:b.doc.contents().find("html")[0],body:b.doc.contents().find("body")[0]},b.getContentSize=function(){return {w:Math.max(b.iframe.html.scrollWidth,b.iframe.body.scrollWidth),h:Math.max(b.iframe.html.scrollHeight,b.iframe.body.scrollHeight)};},b.docscroll=e(b.iframe.body));!f.isios&&(b.opt.iframeautoresize&&!b.isiframe)&&(b.win.scrollTop(0),b.doc.height(""),d=Math.max(c.getElementsByTagName("html")[0].scrollHeight,c.body.scrollHeight),b.doc.height(d));b.lazyResize(30);f.isie7&&b.css(e(b.iframe.html),{"overflow-y":"hidden"});b.css(e(b.iframe.body),{"overflow-y":"hidden"});"contentWindow" in this?b.bind(this.contentWindow,"scroll",b.onscroll):b.bind(c,"scroll",b.onscroll);b.opt.enablemousewheel&&b.bind(c,"mousewheel",b.onmousewheel);b.opt.enablekeyboard&&b.bind(c,f.isopera?"keypress":"keydown",b.onkeypress);if(f.cantouch||b.opt.touchbehavior)b.bind(c,"mousedown",b.onmousedown),b.bind(c,"mousemove",function(d){b.onmousemove(d,!0);}),b.opt.grabcursorenabled&&f.cursorgrabvalue&&b.css(e(c.body),{cursor:f.cursorgrabvalue});b.bind(c,"mouseup",b.onmouseup);b.zoom&&(b.opt.dblclickzoom&&b.bind(c,"dblclick",b.doZoom),b.ongesturezoom&&b.bind(c,"gestureend",b.ongesturezoom));};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){I.call(b.doc[0],!1);},500);b.bind(this.doc,"load",I);}};this.showCursor=function(d,c){b.cursortimeout&&(clearTimeout(b.cursortimeout),b.cursortimeout=0);if(b.rail){b.autohidedom&&(b.autohidedom.stop().css({opacity:b.opt.cursoropacitymax}),b.cursoractive=!0);if(!b.rail.drag||1!=b.rail.drag.pt)"undefined"!=typeof d&&!1!==d&&(b.scroll.y=Math.round(1*d/b.scrollratio.y)),"undefined"!=typeof c&&(b.scroll.x=Math.round(1*c/b.scrollratio.x));b.cursor.css({height:b.cursorheight,top:b.scroll.y});b.cursorh&&(!b.rail.align&&b.rail.visibility?b.cursorh.css({width:b.cursorwidth,left:b.scroll.x+b.rail.width}):b.cursorh.css({width:b.cursorwidth,left:b.scroll.x}),b.cursoractive=!0);b.zoom&&b.zoom.stop().css({opacity:b.opt.cursoropacitymax});}};this.hideCursor=function(d){!b.cursortimeout&&(b.rail&&b.autohidedom)&&(b.cursortimeout=setTimeout(function(){if(!b.rail.active||!b.showonmouseevent)b.autohidedom.stop().animate({opacity:b.opt.cursoropacitymin}),b.zoom&&b.zoom.stop().animate({opacity:b.opt.cursoropacitymin}),b.cursoractive=!1;b.cursortimeout=0;},d||b.opt.hidecursordelay));};this.noticeCursor=function(d,c,g){b.showCursor(c,g);b.rail.active||b.hideCursor(d);};this.getContentSize=b.ispage?function(){return {w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)};}:b.haswrapper?function(){return {w:b.doc.outerWidth()+parseInt(b.win.css("paddingLeft"))+parseInt(b.win.css("paddingRight")),h:b.doc.outerHeight()+parseInt(b.win.css("paddingTop"))+parseInt(b.win.css("paddingBottom"))};}:function(){return {w:b.docscroll[0].scrollWidth,h:b.docscroll[0].scrollHeight};};this.onResize=function(d,c){if(!b.win)return !1;if(!b.haswrapper&&!b.ispage){if("none"==b.win.css("display"))return b.visibility&&b.hideRail().hideRailHr(),!1;!b.hidden&&!b.visibility&&b.showRail().showRailHr();}var g=b.page.maxh,f=b.page.maxw,e=b.view.w;b.view={w:b.ispage?b.win.width():parseInt(b.win[0].clientWidth),h:b.ispage?b.win.height():parseInt(b.win[0].clientHeight)};b.page=c?c:b.getContentSize();b.page.maxh=Math.max(0,b.page.h-b.view.h);b.page.maxw=Math.max(0,b.page.w-b.view.w);if(b.page.maxh==g&&b.page.maxw==f&&b.view.w==e){if(b.ispage)return b;g=b.win.offset();if(b.lastposition&&(f=b.lastposition,f.top==g.top&&f.left==g.left))return b;b.lastposition=g;}0==b.page.maxh?(b.hideRail(),b.scrollvaluemax=0,b.scroll.y=0,b.scrollratio.y=0,b.cursorheight=0,b.setScrollTop(0),b.rail.scrollable=!1):b.rail.scrollable=!0;0==b.page.maxw?(b.hideRailHr(),b.scrollvaluemaxw=0,b.scroll.x=0,b.scrollratio.x=0,b.cursorwidth=0,b.setScrollLeft(0),b.railh.scrollable=!1):b.railh.scrollable=!0;b.locked=0==b.page.maxh&&0==b.page.maxw;if(b.locked)return b.ispage||b.updateScrollBar(b.view),!1;!b.hidden&&!b.visibility?b.showRail().showRailHr():!b.hidden&&!b.railh.visibility&&b.showRailHr();b.istextarea&&(b.win.css("resize")&&"none"!=b.win.css("resize"))&&(b.view.h-=20);b.cursorheight=Math.min(b.view.h,Math.round(b.view.h*(b.view.h/b.page.h)));b.cursorheight=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,b.cursorheight);b.cursorwidth=Math.min(b.view.w,Math.round(b.view.w*(b.view.w/b.page.w)));b.cursorwidth=b.opt.cursorfixedheight?b.opt.cursorfixedheight:Math.max(b.opt.cursorminheight,b.cursorwidth);b.scrollvaluemax=b.view.h-b.cursorheight-b.cursor.hborder;b.railh&&(b.railh.width=0<b.page.maxh?b.view.w-b.rail.width:b.view.w,b.scrollvaluemaxw=b.railh.width-b.cursorwidth-b.cursorh.wborder);b.checkrtlmode&&b.railh&&(b.checkrtlmode=!1,b.opt.rtlmode&&0==b.scroll.x&&b.setScrollLeft(b.page.maxw));b.ispage||b.updateScrollBar(b.view);b.scrollratio={x:b.page.maxw/b.scrollvaluemaxw,y:b.page.maxh/b.scrollvaluemax};b.getScrollTop()>b.page.maxh?b.doScrollTop(b.page.maxh):(b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y)),b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x)),b.cursoractive&&b.noticeCursor());b.scroll.y&&0==b.getScrollTop()&&b.doScrollTo(Math.floor(b.scroll.y*b.scrollratio.y));return b;};this.resize=b.onResize;this.lazyResize=function(d){d=isNaN(d)?30:d;b.delayed("resize",b.resize,d);return b;};this._bind=function(d,c,g,f){b.events.push({e:d,n:c,f:g,b:f,q:!1});d.addEventListener?d.addEventListener(c,g,f||!1):d.attachEvent?d.attachEvent("on"+c,g):d["on"+c]=g;};this.jqbind=function(d,c,g){b.events.push({e:d,n:c,f:g,q:!0});e(d).bind(c,g);};this.bind=function(d,c,g,e){var h="jquery" in d?d[0]:d;"mousewheel"==c?"onwheel" in b.win?b._bind(h,"wheel",g,e||!1):(d="undefined"!=typeof document.onmousewheel?"mousewheel":"DOMMouseScroll",n(h,d,g,e||!1),"DOMMouseScroll"==d&&n(h,"MozMousePixelScroll",g,e||!1)):h.addEventListener?(f.cantouch&&/mouseup|mousedown|mousemove/.test(c)&&b._bind(h,"mousedown"==c?"touchstart":"mouseup"==c?"touchend":"touchmove",function(b){if(b.touches){if(2>b.touches.length){var d=b.touches.length?b.touches[0]:b;d.original=b;g.call(this,d);}}else b.changedTouches&&(d=b.changedTouches[0],d.original=b,g.call(this,d));},e||!1),b._bind(h,c,g,e||!1),f.cantouch&&"mouseup"==c&&b._bind(h,"touchcancel",g,e||!1)):b._bind(h,c,function(d){if((d=d||window.event||!1)&&d.srcElement)d.target=d.srcElement;"pageY" in d||(d.pageX=d.clientX+document.documentElement.scrollLeft,d.pageY=d.clientY+document.documentElement.scrollTop);return !1===g.call(h,d)||!1===e?b.cancelEvent(d):!0;});};this._unbind=function(b,c,g,f){b.removeEventListener?b.removeEventListener(c,g,f):b.detachEvent?b.detachEvent("on"+c,g):b["on"+c]=!1;};this.unbindAll=function(){for(var d=0;d<b.events.length;d++){var c=b.events[d];c.q?c.e.unbind(c.n,c.f):b._unbind(c.e,c.n,c.f,c.b);}};this.cancelEvent=function(b){b=b.original?b.original:b?b:window.event||!1;if(!b)return !1;b.preventDefault&&b.preventDefault();b.stopPropagation&&b.stopPropagation();b.preventManipulation&&b.preventManipulation();b.cancelBubble=!0;b.cancel=!0;return b.returnValue=!1;};this.stopPropagation=function(b){b=b.original?b.original:b?b:window.event||!1;if(!b)return !1;if(b.stopPropagation)return b.stopPropagation();b.cancelBubble&&(b.cancelBubble=!0);return !1;};this.showRail=function(){if(0!=b.page.maxh&&(b.ispage||"none"!=b.win.css("display")))b.visibility=!0,b.rail.visibility=!0,b.rail.css("display","block");return b;};this.showRailHr=function(){if(!b.railh)return b;if(0!=b.page.maxw&&(b.ispage||"none"!=b.win.css("display")))b.railh.visibility=!0,b.railh.css("display","block");return b;};this.hideRail=function(){b.visibility=!1;b.rail.visibility=!1;b.rail.css("display","none");return b;};this.hideRailHr=function(){if(!b.railh)return b;b.railh.visibility=!1;b.railh.css("display","none");return b;};this.show=function(){b.hidden=!1;b.locked=!1;return b.showRail().showRailHr();};this.hide=function(){b.hidden=!0;b.locked=!0;return b.hideRail().hideRailHr();};this.toggle=function(){return b.hidden?b.show():b.hide();};this.remove=function(){b.stop();b.cursortimeout&&clearTimeout(b.cursortimeout);b.doZoomOut();b.unbindAll();!1!==b.observer&&b.observer.disconnect();!1!==b.observerremover&&b.observerremover.disconnect();b.events=[];b.cursor&&(b.cursor.remove(),b.cursor=null);b.cursorh&&(b.cursorh.remove(),b.cursorh=null);b.rail&&(b.rail.remove(),b.rail=null);b.railh&&(b.railh.remove(),b.railh=null);b.zoom&&(b.zoom.remove(),b.zoom=null);for(var d=0;d<b.saved.css.length;d++){var c=b.saved.css[d];c[0].css(c[1],"undefined"==typeof c[2]?"":c[2]);}b.saved=!1;b.me.data("__nicescroll","");b.me=null;b.doc=null;b.docscroll=null;b.win=null;return b;};this.scrollstart=function(d){this.onscrollstart=d;return b;};this.scrollend=function(d){this.onscrollend=d;return b;};this.scrollcancel=function(d){this.onscrollcancel=d;return b;};this.zoomin=function(d){this.onzoomin=d;return b;};this.zoomout=function(d){this.onzoomout=d;return b;};this.isScrollable=function(b){b=b.target?b.target:b;if("OPTION"==b.nodeName)return !0;for(;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=e(b),c=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(c))return b.clientHeight!=b.scrollHeight;b=b.parentNode?b.parentNode:!1;}return !1;};this.getViewport=function(b){for(b=b&&b.parentNode?b.parentNode:!1;b&&1==b.nodeType&&!/BODY|HTML/.test(b.nodeName);){var c=e(b),g=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(g)&&b.clientHeight!=b.scrollHeight||0<c.getNiceScroll().length)return c;b=b.parentNode?b.parentNode:!1;}return !1;};this.onmousewheel=function(d){if(b.locked)return !0;if(b.rail.drag)return b.cancelEvent(d);if(!b.rail.scrollable)return b.railh&&b.railh.scrollable?b.onmousewheelhr(d):!0;var c=+new Date(),g=!1;b.opt.preservenativescrolling&&b.checkarea+600<c&&(b.nativescrollingarea=b.isScrollable(d),g=!0);b.checkarea=c;if(b.nativescrollingarea)return !0;if(d=t(d,!1,g))b.checkarea=0;return d;};this.onmousewheelhr=function(d){if(b.locked||!b.railh.scrollable)return !0;if(b.rail.drag)return b.cancelEvent(d);var c=+new Date(),g=!1;b.opt.preservenativescrolling&&b.checkarea+600<c&&(b.nativescrollingarea=b.isScrollable(d),g=!0);b.checkarea=c;return b.nativescrollingarea?!0:b.locked?b.cancelEvent(d):t(d,!0,g);};this.stop=function(){b.cancelScroll();b.scrollmon&&b.scrollmon.stop();b.cursorfreezed=!1;b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y));b.noticeCursor();return b;};this.getTransitionSpeed=function(c){var f=Math.round(10*b.opt.scrollspeed);c=Math.min(f,Math.round(c/20*b.opt.scrollspeed));return 20<c?c:0;};b.opt.smoothscroll?b.ishwscroll&&f.hastransition&&b.opt.usetransition?(this.prepareTransition=function(c,e){var g=e?20<c?c:0:b.getTransitionSpeed(c),h=g?f.prefixstyle+"transform "+g+"ms ease-out":"";if(!b.lasttransitionstyle||b.lasttransitionstyle!=h)b.lasttransitionstyle=h,b.doc.css(f.transitionstyle,h);return g;},this.doScrollLeft=function(c,f){var g=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(c,g,f);},this.doScrollTop=function(c,f){var g=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(g,c,f);},this.doScrollPos=function(c,e,g){var h=b.getScrollTop(),l=b.getScrollLeft();(0>(b.newscrolly-h)*(e-h)||0>(b.newscrollx-l)*(c-l))&&b.cancelScroll();!1==b.opt.bouncescroll&&(0>e?e=0:e>b.page.maxh&&(e=b.page.maxh),0>c?c=0:c>b.page.maxw&&(c=b.page.maxw));if(b.scrollrunning&&c==b.newscrollx&&e==b.newscrolly)return !1;b.newscrolly=e;b.newscrollx=c;b.newscrollspeed=g||!1;if(b.timer)return !1;b.timer=setTimeout(function(){var g=b.getScrollTop(),h=b.getScrollLeft(),l,k;l=c-h;k=e-g;l=Math.round(Math.sqrt(Math.pow(l,2)+Math.pow(k,2)));l=b.newscrollspeed&&1<b.newscrollspeed?b.newscrollspeed:b.getTransitionSpeed(l);b.newscrollspeed&&1>=b.newscrollspeed&&(l*=b.newscrollspeed);b.prepareTransition(l,!0);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);0<l&&(!b.scrollrunning&&b.onscrollstart&&b.onscrollstart.call(b,{type:"scrollstart",current:{x:h,y:g},request:{x:c,y:e},end:{x:b.newscrollx,y:b.newscrolly},speed:l}),f.transitionend?b.scrollendtrapped||(b.scrollendtrapped=!0,b.bind(b.doc,f.transitionend,b.onScrollEnd,!1)):(b.scrollendtrapped&&clearTimeout(b.scrollendtrapped),b.scrollendtrapped=setTimeout(b.onScrollEnd,l)),b.timerscroll={bz:new BezierClass(g,b.newscrolly,l,0,0,0.58,1),bh:new BezierClass(h,b.newscrollx,l,0,0,0.58,1)},b.cursorfreezed||(b.timerscroll.tm=setInterval(function(){b.showCursor(b.getScrollTop(),b.getScrollLeft());},60)));b.synched("doScroll-set",function(){b.timer=0;b.scrollendtrapped&&(b.scrollrunning=!0);b.setScrollTop(b.newscrolly);b.setScrollLeft(b.newscrollx);if(!b.scrollendtrapped)b.onScrollEnd();});},50);},this.cancelScroll=function(){if(!b.scrollendtrapped)return !0;var c=b.getScrollTop(),e=b.getScrollLeft();b.scrollrunning=!1;f.transitionend||clearTimeout(f.transitionend);b.scrollendtrapped=!1;b._unbind(b.doc,f.transitionend,b.onScrollEnd);b.prepareTransition(0);b.setScrollTop(c);b.railh&&b.setScrollLeft(e);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);b.timerscroll=!1;b.cursorfreezed=!1;b.showCursor(c,e);return b;},this.onScrollEnd=function(){b.scrollendtrapped&&b._unbind(b.doc,f.transitionend,b.onScrollEnd);b.scrollendtrapped=!1;b.prepareTransition(0);b.timerscroll&&b.timerscroll.tm&&clearInterval(b.timerscroll.tm);b.timerscroll=!1;var c=b.getScrollTop(),e=b.getScrollLeft();b.setScrollTop(c);b.railh&&b.setScrollLeft(e);b.noticeCursor(!1,c,e);b.cursorfreezed=!1;0>c?c=0:c>b.page.maxh&&(c=b.page.maxh);0>e?e=0:e>b.page.maxw&&(e=b.page.maxw);if(c!=b.newscrolly||e!=b.newscrollx)return b.doScrollPos(e,c,b.opt.snapbackspeed);b.onscrollend&&b.scrollrunning&&b.onscrollend.call(b,{type:"scrollend",current:{x:e,y:c},end:{x:b.newscrollx,y:b.newscrolly}});b.scrollrunning=!1;}):(this.doScrollLeft=function(c,f){var g=b.scrollrunning?b.newscrolly:b.getScrollTop();b.doScrollPos(c,g,f);},this.doScrollTop=function(c,f){var g=b.scrollrunning?b.newscrollx:b.getScrollLeft();b.doScrollPos(g,c,f);},this.doScrollPos=function(c,f,g){function e(){if(b.cancelAnimationFrame)return !0;b.scrollrunning=!0;if(r=1-r)return b.timer=v(e)||1;var c=0,d=sy=b.getScrollTop();if(b.dst.ay){var d=b.bzscroll?b.dst.py+b.bzscroll.getNow()*b.dst.ay:b.newscrolly,g=d-sy;if(0>g&&d<b.newscrolly||0<g&&d>b.newscrolly)d=b.newscrolly;b.setScrollTop(d);d==b.newscrolly&&(c=1);}else c=1;var f=sx=b.getScrollLeft();if(b.dst.ax){f=b.bzscroll?b.dst.px+b.bzscroll.getNow()*b.dst.ax:b.newscrollx;g=f-sx;if(0>g&&f<b.newscrollx||0<g&&f>b.newscrollx)f=b.newscrollx;b.setScrollLeft(f);f==b.newscrollx&&(c+=1);}else c+=1;2==c?(b.timer=0,b.cursorfreezed=!1,b.bzscroll=!1,b.scrollrunning=!1,0>d?d=0:d>b.page.maxh&&(d=b.page.maxh),0>f?f=0:f>b.page.maxw&&(f=b.page.maxw),f!=b.newscrollx||d!=b.newscrolly?b.doScrollPos(f,d):b.onscrollend&&b.onscrollend.call(b,{type:"scrollend",current:{x:sx,y:sy},end:{x:b.newscrollx,y:b.newscrolly}})):b.timer=v(e)||1;}f="undefined"==typeof f||!1===f?b.getScrollTop(!0):f;if(b.timer&&b.newscrolly==f&&b.newscrollx==c)return !0;b.timer&&w(b.timer);b.timer=0;var h=b.getScrollTop(),l=b.getScrollLeft();(0>(b.newscrolly-h)*(f-h)||0>(b.newscrollx-l)*(c-l))&&b.cancelScroll();b.newscrolly=f;b.newscrollx=c;if(!b.bouncescroll||!b.rail.visibility)0>b.newscrolly?b.newscrolly=0:b.newscrolly>b.page.maxh&&(b.newscrolly=b.page.maxh);if(!b.bouncescroll||!b.railh.visibility)0>b.newscrollx?b.newscrollx=0:b.newscrollx>b.page.maxw&&(b.newscrollx=b.page.maxw);b.dst={};b.dst.x=c-l;b.dst.y=f-h;b.dst.px=l;b.dst.py=h;var k=Math.round(Math.sqrt(Math.pow(b.dst.x,2)+Math.pow(b.dst.y,2)));b.dst.ax=b.dst.x/k;b.dst.ay=b.dst.y/k;var n=0,q=k;0==b.dst.x?(n=h,q=f,b.dst.ay=1,b.dst.py=0):0==b.dst.y&&(n=l,q=c,b.dst.ax=1,b.dst.px=0);k=b.getTransitionSpeed(k);g&&1>=g&&(k*=g);b.bzscroll=0<k?b.bzscroll?b.bzscroll.update(q,k):new BezierClass(n,q,k,0,1,0,1):!1;if(!b.timer){(h==b.page.maxh&&f>=b.page.maxh||l==b.page.maxw&&c>=b.page.maxw)&&b.checkContentSize();var r=1;b.cancelAnimationFrame=!1;b.timer=1;b.onscrollstart&&!b.scrollrunning&&b.onscrollstart.call(b,{type:"scrollstart",current:{x:l,y:h},request:{x:c,y:f},end:{x:b.newscrollx,y:b.newscrolly},speed:k});e();(h==b.page.maxh&&f>=h||l==b.page.maxw&&c>=l)&&b.checkContentSize();b.noticeCursor();}},this.cancelScroll=function(){b.timer&&w(b.timer);b.timer=0;b.bzscroll=!1;b.scrollrunning=!1;return b;}):(this.doScrollLeft=function(c,f){var g=b.getScrollTop();b.doScrollPos(c,g,f);},this.doScrollTop=function(c,f){var g=b.getScrollLeft();b.doScrollPos(g,c,f);},this.doScrollPos=function(c,f,g){var e=c>b.page.maxw?b.page.maxw:c;0>e&&(e=0);var h=f>b.page.maxh?b.page.maxh:f;0>h&&(h=0);b.synched("scroll",function(){b.setScrollTop(h);b.setScrollLeft(e);});},this.cancelScroll=function(){});this.doScrollBy=function(c,f){var g=0,g=f?Math.floor((b.scroll.y-c)*b.scrollratio.y):(b.timer?b.newscrolly:b.getScrollTop(!0))-c;if(b.bouncescroll){var e=Math.round(b.view.h/2);g<-e?g=-e:g>b.page.maxh+e&&(g=b.page.maxh+e);}b.cursorfreezed=!1;py=b.getScrollTop(!0);if(0>g&&0>=py)return b.noticeCursor();if(g>b.page.maxh&&py>=b.page.maxh)return b.checkContentSize(),b.noticeCursor();b.doScrollTop(g);};this.doScrollLeftBy=function(c,f){var g=0,g=f?Math.floor((b.scroll.x-c)*b.scrollratio.x):(b.timer?b.newscrollx:b.getScrollLeft(!0))-c;if(b.bouncescroll){var e=Math.round(b.view.w/2);g<-e?g=-e:g>b.page.maxw+e&&(g=b.page.maxw+e);}b.cursorfreezed=!1;px=b.getScrollLeft(!0);if(0>g&&0>=px||g>b.page.maxw&&px>=b.page.maxw)return b.noticeCursor();b.doScrollLeft(g);};this.doScrollTo=function(c,f){f&&Math.round(c*b.scrollratio.y);b.cursorfreezed=!1;b.doScrollTop(c);};this.checkContentSize=function(){var c=b.getContentSize();(c.h!=b.page.h||c.w!=b.page.w)&&b.resize(!1,c);};b.onscroll=function(c){b.rail.drag||b.cursorfreezed||b.synched("scroll",function(){b.scroll.y=Math.round(b.getScrollTop()*(1/b.scrollratio.y));b.railh&&(b.scroll.x=Math.round(b.getScrollLeft()*(1/b.scrollratio.x)));b.noticeCursor();});};b.bind(b.docscroll,"scroll",b.onscroll);this.doZoomIn=function(c){if(!b.zoomactive){b.zoomactive=!0;b.zoomrestore={style:{}};var h="position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight".split(" "),g=b.win[0].style,l;for(l in h){var k=h[l];b.zoomrestore.style[k]="undefined"!=typeof g[k]?g[k]:"";}b.zoomrestore.style.width=b.win.css("width");b.zoomrestore.style.height=b.win.css("height");b.zoomrestore.padding={w:b.win.outerWidth()-b.win.width(),h:b.win.outerHeight()-b.win.height()};f.isios4&&(b.zoomrestore.scrollTop=e(window).scrollTop(),e(window).scrollTop(0));b.win.css({position:f.isios4?"absolute":"fixed",top:0,left:0,"z-index":x+100,margin:"0px"});h=b.win.css("backgroundColor");(""==h||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(h))&&b.win.css("backgroundColor","#fff");b.rail.css({"z-index":x+101});b.zoom.css({"z-index":x+102});b.zoom.css("backgroundPosition","0px -18px");b.resizeZoom();b.onzoomin&&b.onzoomin.call(b);return b.cancelEvent(c);}};this.doZoomOut=function(c){if(b.zoomactive)return b.zoomactive=!1,b.win.css("margin",""),b.win.css(b.zoomrestore.style),f.isios4&&e(window).scrollTop(b.zoomrestore.scrollTop),b.rail.css({"z-index":b.zindex}),b.zoom.css({"z-index":b.zindex}),b.zoomrestore=!1,b.zoom.css("backgroundPosition","0px 0px"),b.onResize(),b.onzoomout&&b.onzoomout.call(b),b.cancelEvent(c);};this.doZoom=function(c){return b.zoomactive?b.doZoomOut(c):b.doZoomIn(c);};this.resizeZoom=function(){if(b.zoomactive){var c=b.getScrollTop();b.win.css({width:e(window).width()-b.zoomrestore.padding.w+"px",height:e(window).height()-b.zoomrestore.padding.h+"px"});b.onResize();b.setScrollTop(Math.min(b.page.maxh,c));}};this.init();e.nicescroll.push(this);},H=function(e){var c=this;this.nc=e;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=!1;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=-1;this.timer=this.chky=this.chkx=0;this.time=function(){return +new Date();};this.reset=function(e,l){c.stop();var k=c.time();c.steptime=0;c.lasttime=k;c.speedx=0;c.speedy=0;c.lastx=e;c.lasty=l;c.lastscrollx=-1;c.lastscrolly=-1;};this.update=function(e,l){var k=c.time();c.steptime=k-c.lasttime;c.lasttime=k;var k=l-c.lasty,t=e-c.lastx,b=c.nc.getScrollTop(),q=c.nc.getScrollLeft(),b=b+k,q=q+t;c.snapx=0>q||q>c.nc.page.maxw;c.snapy=0>b||b>c.nc.page.maxh;c.speedx=t;c.speedy=k;c.lastx=e;c.lasty=l;};this.stop=function(){c.nc.unsynched("domomentum2d");c.timer&&clearTimeout(c.timer);c.timer=0;c.lastscrollx=-1;c.lastscrolly=-1;};this.doSnapy=function(e,l){var k=!1;0>l?(l=0,k=!0):l>c.nc.page.maxh&&(l=c.nc.page.maxh,k=!0);0>e?(e=0,k=!0):e>c.nc.page.maxw&&(e=c.nc.page.maxw,k=!0);k&&c.nc.doScrollPos(e,l,c.nc.opt.snapbackspeed);};this.doMomentum=function(e){var l=c.time(),k=e?l+e:c.lasttime;e=c.nc.getScrollLeft();var t=c.nc.getScrollTop(),b=c.nc.page.maxh,q=c.nc.page.maxw;c.speedx=0<q?Math.min(60,c.speedx):0;c.speedy=0<b?Math.min(60,c.speedy):0;k=k&&50>=l-k;if(0>t||t>b||0>e||e>q)k=!1;e=c.speedx&&k?c.speedx:!1;if(c.speedy&&k&&c.speedy||e){var f=Math.max(16,c.steptime);50<f&&(e=f/50,c.speedx*=e,c.speedy*=e,f=50);c.demulxy=0;c.lastscrollx=c.nc.getScrollLeft();c.chkx=c.lastscrollx;c.lastscrolly=c.nc.getScrollTop();c.chky=c.lastscrolly;var r=c.lastscrollx,u=c.lastscrolly,d=function(){var e=600<c.time()-l?0.04:0.02;if(c.speedx&&(r=Math.floor(c.lastscrollx-c.speedx*(1-c.demulxy)),c.lastscrollx=r,0>r||r>q))e=0.1;if(c.speedy&&(u=Math.floor(c.lastscrolly-c.speedy*(1-c.demulxy)),c.lastscrolly=u,0>u||u>b))e=0.1;c.demulxy=Math.min(1,c.demulxy+e);c.nc.synched("domomentum2d",function(){c.speedx&&(c.nc.getScrollLeft()!=c.chkx&&c.stop(),c.chkx=r,c.nc.setScrollLeft(r));c.speedy&&(c.nc.getScrollTop()!=c.chky&&c.stop(),c.chky=u,c.nc.setScrollTop(u));c.timer||(c.nc.hideCursor(),c.doSnapy(r,u));});1>c.demulxy?c.timer=setTimeout(d,f):(c.stop(),c.nc.hideCursor(),c.doSnapy(r,u));};d();}else c.doSnapy(c.nc.getScrollLeft(),c.nc.getScrollTop());};},A=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(k,c,h){return (c=e.data(k,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollTop():A.call(k);},set:function(k,c){var h=e.data(k,"__nicescroll")||!1;h&&h.ishwscroll?h.setScrollTop(parseInt(c)):A.call(k,c);return this;}};e.fn.scrollTop=function(k){if("undefined"==typeof k){var c=this[0]?e.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollTop():A.call(this);}return this.each(function(){var c=e.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollTop(parseInt(k)):A.call(e(this),k);});};var B=e.fn.scrollLeft;e.cssHooks.pageXOffset={get:function(k,c,h){return (c=e.data(k,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollLeft():B.call(k);},set:function(k,c){var h=e.data(k,"__nicescroll")||!1;h&&h.ishwscroll?h.setScrollLeft(parseInt(c)):B.call(k,c);return this;}};e.fn.scrollLeft=function(k){if("undefined"==typeof k){var c=this[0]?e.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollLeft():B.call(this);}return this.each(function(){var c=e.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollLeft(parseInt(k)):B.call(e(this),k);});};var C=function(k){var c=this;this.length=0;this.name="nicescrollarray";this.each=function(e){for(var h=0;h<c.length;h++)e.call(c[h]);return c;};this.push=function(e){c[c.length]=e;c.length++;};this.eq=function(e){return c[e];};if(k)for(a=0;a<k.length;a++){var h=e.data(k[a],"__nicescroll")||!1;h&&(this[this.length]=h,this.length++);}return this;};(function(e,c,h){for(var l=0;l<c.length;l++)h(e,c[l]);})(C.prototype,"show hide toggle onResize resize remove stop doScrollPos".split(" "),function(e,c){e[c]=function(){var e=arguments;return this.each(function(){this[c].apply(this,e);});};});e.fn.getNiceScroll=function(k){return "undefined"==typeof k?new C(this):e.data(this[k],"__nicescroll")||!1;};e.extend(e.expr[":"],{nicescroll:function(k){return e.data(k,"__nicescroll")?!0:!1;}});e.fn.niceScroll=function(k,c){"undefined"==typeof c&&("object"==typeof k&&!("jquery" in k))&&(c=k,k=!1);var h=new C();"undefined"==typeof c&&(c={});k&&(c.doc=e(k),c.win=e(this));var l=!("doc" in c);!l&&!("win" in c)&&(c.win=e(this));this.each(function(){var k=e(this).data("__nicescroll")||!1;k||(c.doc=l?e(this):c.doc,k=new N(c,e(this)),e(this).data("__nicescroll",k));h.push(k);});return 1==h.length?h[0]:h;};window.NiceScroll={getjQuery:function(){return e;}};e.nicescroll||(e.nicescroll=new C(),e.nicescroll.options=F);})(jQuery);;
var annotate_shape="divCursor";var chartJSLineStyle=[];chartJSLineStyle.solid=[];chartJSLineStyle.dotted=[1,4];chartJSLineStyle.shortDash=[2,1];chartJSLineStyle.dashed=[4,2];chartJSLineStyle.dashSpace=[4,6];chartJSLineStyle.longDashDot=[7,2,1,2];chartJSLineStyle.longDashShortDash=[10,4,4,4];chartJSLineStyle.gradient=[1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,9,9,8,8,7,7,6,6,5,5,4,4,3,3,2,2,1];function lineStyleFn(a){if((typeof chartJSLineStyle[a])==="object")return chartJSLineStyle[a];else return chartJSLineStyle.solid;}if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(c){if(this==null)throw new TypeError();var d=Object(this);var a=d.length>>>0;if(a===0)return -1;var e=0;if(arguments.length>0){e=Number(arguments[1]);if(e!=e)e=0;else{if(e!=0&&e!=Infinity&&e!=-Infinity)e=(e>0||-1)*Math.floor(Math.abs(e));}}if(e>=a)return -1;var b=e>=0?e:Math.max(a-Math.abs(e),0);for(;b<a;b++)if(b in d&&d[b]===c)return b;return -1;};var charJSPersonalDefaultOptions={};var charJSPersonalDefaultOptionsLine={};var charJSPersonalDefaultOptionsRadar={};var charJSPersonalDefaultOptionsPolarArea={};var charJSPersonalDefaultOptionsPie={};var charJSPersonalDefaultOptionsDoughnut={};var charJSPersonalDefaultOptionsBar={};var charJSPersonalDefaultOptionsStackedBar={};var charJSPersonalDefaultOptionsHorizontalBar={};var charJSPersonalDefaultOptionsHorizontalStackedBar={};function roundToWithThousands(e,d,b){var f=1*unFormat(e,d);if(typeof (f)=="number"&&b!="none"){var c;if(b<=0){c=-b;f=+(Math.round(f+"e+"+c)+"e-"+c);}else{c=b;var a="1e+"+c;f=+(Math.round(f/a))*a;}}f=fmtChartJS(e,f,"none");return (f);}function unFormat(b,a){if((b.decimalSeparator!="."||b.thousandSeparator!="")&&typeof (a)=="string"){var c=""+a;if(b.thousandSeparator!="")while(c.indexOf(b.thousandSeparator)>=0)c=""+c.replace(b.thousandSeparator,"");if(b.decimalSeparator!=".")c=""+c.replace(b.decimalSeparator,".");return 1*c;}else return a;}var cachebis={};function fmtChartJSPerso(b,c,a){switch(a){case "SampleJS_Format":if(typeof (c)=="number")return_value="My Format : "+c.toString()+" $";else return_value=c+"XX";break;case "Change_Month":if(typeof (c)=="string")return_value=c.toString()+" 2014";else return_value=c.toString()+"YY";break;default:return_value=c;break;}return (return_value);}function fmtChartJS(c,f,d){var g;if(d=="notformatted")g=f;else if((d=="none"||d=="money")&&typeof (f)=="number"){if(c.roundNumber!="none"){var a;if(c.roundNumber<=0){a=-c.roundNumber;f=+(Math.round(f+"e+"+a)+"e-"+a);}else{a=c.roundNumber;var i="1e+"+a;f=+(Math.round(f/i))*i;}}if(c.decimalSeparator!="."||c.thousandSeparator!=""){g=f.toString().replace(/\./g,c.decimalSeparator);if(c.thousandSeparator!=""){var e=g;var b="";var h=e.indexOf(c.decimalSeparator);if(h>=0){b=e.substring(h+1,e.length);b=b.split("").reverse().join("");e=e.substring(0,h);}e=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,c.thousandSeparator);b=b.split("").reverse().join("");g=e;if(b!="")g=g+c.decimalSeparator+b;}}else g=f;if(d=="money")if(c.currencyPosition=="before")g=c.currency+g;else g=g+c.currency;}else if(d!="none"&&d!="notformatted")g=fmtChartJSPerso(c,f,d);else g=f;return (g);}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};dif=false;if(fctName.substr(-3)=="Dif"){fctName=fctName.substr(0,fctName.length-3);dif=true;}if(typeof eval(fctName)=="function"){var parameter=eval(fctList+"."+fctName);if(dif)return data.v3-window[fctName](parameter);return window[fctName](parameter);}return null;}function isNumber(a){return !isNaN(parseFloat(a))&&isFinite(a);}function tmplbis(c,b,a){newstr=c;if(newstr.substr(0,a.templatesOpenTag.length)==a.templatesOpenTag)newstr="<%="+newstr.substr(a.templatesOpenTag.length,newstr.length-a.templatesOpenTag.length);if(newstr.substr(newstr.length-a.templatesCloseTag.length,a.templatesCloseTag.length)==a.templatesCloseTag)newstr=newstr.substr(0,newstr.length-a.templatesCloseTag.length)+"%>";return tmplter(newstr,b);}function tmplter(e,d){var a=["mean","varianz","stddev","cv","median"];var c=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+a.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");while(c.test(e))e=e.replace(c,function(g,f,n,m,l){var i;if(m)i=m;else i=2;var h=addParameters2Function(d,n,"mathFunctions");if(isNumber(h))return "<%="+f+""+Math.round(Math.pow(10,i)*h)/Math.pow(10,i)+""+l+"%>";return "<%= %>";});var b=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e)?cachebis[e]=cachebis[e]||tmplter(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return d?b(d):b;}if(typeof CanvasRenderingContext2D!=="undefined"){CanvasRenderingContext2D.prototype.fillTextMultiLine=function(m,h,g,e,d,t,q,p,f,s,n,v,w,u){var a=(""+m).split("\n");if(e=="middle"){if(t)g-=((a.length-1)/2)*d;}else{if(e=="bottom")if(t)g-=(a.length-1)*d;}var b=g-d;for(var r=0;r<a.length;r++){this.fillText(a[r],h,g);g+=d;}if(q){var o=p.measureTextMultiLine(m,d);var l=[];var b=[];l.p1=n+h;b.p1=v+g-d;var c=(Math.PI/2)+s;if(p.textAlign=="left"&&e=="top"){l.p1+=d*Math.cos(c);b.p1+=d*Math.sin(c);}else if(p.textAlign=="left"&&e=="middle"){l.p1+=(d/2)*Math.cos(c);b.p1+=(d/2)*Math.sin(c);}else if(p.textAlign=="left"&&e=="bottom"){}else if(p.textAlign=="center"&&e=="top"){l.p1+=d*Math.cos(c)-(o.textWidth/2)*Math.cos(s);b.p1+=d*Math.sin(c)-(o.textWidth/2)*Math.sin(s);}else if(p.textAlign=="center"&&e=="middle"){l.p1+=(d/2)*Math.cos(c)-(o.textWidth/2)*Math.cos(s);b.p1+=(d/2)*Math.sin(c)-(o.textWidth/2)*Math.sin(s);}else if(p.textAlign=="center"&&e=="bottom"){l.p1-=(o.textWidth/2)*Math.cos(s);b.p1-=(o.textWidth/2)*Math.sin(s);}else if(p.textAlign=="right"&&e=="top"){l.p1+=(d*Math.cos(c)-o.textWidth*Math.cos(s));b.p1+=(d*Math.sin(c)-o.textWidth*Math.sin(s));}else if(p.textAlign=="right"&&e=="middle"){l.p1+=(d/2)*Math.cos(c)-o.textWidth*Math.cos(s);b.p1+=(d/2)*Math.sin(c)-o.textWidth*Math.sin(s);}else{if(p.textAlign=="right"&&e=="bottom"){l.p1-=o.textWidth*Math.cos(s);b.p1-=o.textWidth*Math.sin(s);}}l.p2=l.p1+o.textWidth*Math.cos(s);b.p2=b.p1+o.textWidth*Math.sin(s);l.p3=l.p1-d*Math.cos(c);b.p3=b.p1-d*Math.sin(c);l.p4=l.p3+o.textWidth*Math.cos(s);b.p4=b.p3+o.textWidth*Math.sin(s);jsTextMousePos[p.ChartNewId][jsTextMousePos[p.ChartNewId].length]=[f,m,l,b,s,o.textWidth,o.textHeight,w,u];}};CanvasRenderingContext2D.prototype.measureTextMultiLine=function(g,d){var f=0;var e=0;var b;var a=(""+g).replace(/<BR>/ig,"\n").split("\n");if(a.length>0)e=d+1.5*(a.length-1)*e;var e=a.length*d;for(var c=0;c<a.length;c++){b=this.measureText(a[c]).width;if(b>f)f=b;}return {textWidth:f,textHeight:e};};if(typeof CanvasRenderingContext2D.prototype.setLineDash!=="function")CanvasRenderingContext2D.prototype.setLineDash=function(a){return 0;};CanvasRenderingContext2D.prototype.drawRectangle=function(g){var d=this.fillStyle;if(typeof g.x=="undefined")g.x=0;if(g.width<0){g.x+=g.width;g.width*=-1;}if(g.height<0){g.y+=g.height;g.height*=-1;}if(typeof g.y=="undefined")g.y=0;if(typeof g.y=="undefined")g.y=0;if(typeof g.backgroundColor!="undefined")this.fillStyle=g.backgroundColor;if(typeof g.borderRadius=="undefined")g.borderRadius=0;if(typeof g.borderSelection=="undefined")g.borderSelection=15;var e=parseInt(g.borderRadius);if(g.borders&&g.bordersWidth>5&&this.fillStyle!="rgba(0,0,0,0)")e=0;if(g.borders&&g.fill&&g.borderSelection==15&&e>0)return this;if(e==0&&g.fill==true)this.fillRect(g.x,g.y,g.width,g.height);if(e==0&&g.borderSelection>=15&&g.stroke==true)this.strokeRect(g.x,g.y,g.width,g.height);if(e!=0||(g.borderSelection<15&&g.stroke==true)){if(e>g.width/2)e=g.width/2;if(g.height<g.width&&e>g.height/2)e=g.height/2;if(g.fill){this.beginPath();this.lineWidth=0;this.strokeStyle="rgba(0,0,0,0)";this.moveTo(g.x+e,g.y);this.lineTo(g.x+g.width-e,g.y);this.arc(g.x+g.width-e,g.y+e,e,1.5*Math.PI,0);this.lineTo(g.x+g.width,g.y+g.height-e);this.arc(g.x+g.width-e,g.y+g.height-e,e,0,0.5*Math.PI);this.lineTo(g.x+e,g.y+g.height);this.arc(g.x+e,g.y+g.height-e,e,0.5*Math.PI,1*Math.PI);this.lineTo(g.x,g.y+e);this.arc(g.x+e,g.y+e,e,1*Math.PI,1.5*Math.PI);this.closePath();this.fill();this.stroke();}if(g.stroke==true){var a=(isBorder(g.borderSelection,"LEFT")==false);var c=(isBorder(g.borderSelection,"RIGHT")==false);var b=(isBorder(g.borderSelection,"TOP")==false);var f=(isBorder(g.borderSelection,"BOTTOM")==false);if(b==false&&(a==true||g.borderSelection==15)){b=true;this.beginPath();this.moveTo(g.x+e,g.y);this.lineTo(g.x+g.width-e,g.y);if(isBorder(g.borderSelection,"RIGHT"))this.arc(g.x+g.width-e,g.y+e,e,1.5*Math.PI,0);else this.stroke();}if(c==false&&(b==true||g.borderSelection==15)){c=true;if(isBorder(g.borderSelection,"TOP")==false){this.beginPath();this.moveTo(g.x+g.width,g.y+e);}this.lineTo(g.x+g.width,g.y+g.height-e);if(isBorder(g.borderSelection,"BOTTOM"))this.arc(g.x+g.width-e,g.y+g.height-e,e,0,0.5*Math.PI);else this.stroke();}if(f==false&&(c==true||g.borderSelection==15)){f=true;if(isBorder(g.borderSelection,"RIGHT")==false){this.beginPath();this.moveTo(g.x+g.width-e,g.y+g.height);}this.lineTo(g.x+e,g.y+g.height);if(isBorder(g.borderSelection,"LEFT"))this.arc(g.x+e,g.y+g.height-e,e,0.5*Math.PI,1*Math.PI);else this.stroke();}if(a==false&&(f==true||g.borderSelection==15)){a=true;if(isBorder(g.borderSelection,"BOTTOM")==false){this.beginPath();this.moveTo(g.x,g.y+g.height-e);}this.lineTo(g.x,g.y+e);if(isBorder(g.borderSelection,"TOP")){this.arc(g.x+e,g.y+e,e,1*Math.PI,1.5*Math.PI);if(g.borderSelection==15){this.closePath();this.stroke();}}else this.stroke();}if(b==false&&(a==true||g.borderSelection==15)){b=true;if(isBorder(g.borderSelection,"LEFT")==false){this.beginPath();this.moveTo(g.x+e,g.y);}this.lineTo(g.x+g.width-e,g.y);if(isBorder(g.borderSelection,"RIGHT"))this.arc(g.x+g.width-e,g.y+e,e,1.5*Math.PI,0);else this.stroke();}if(c==false&&(b==true||g.borderSelection==15)){c=true;if(isBorder(g.borderSelection,"TOP")==false){this.beginPath();this.moveTo(g.x+g.width,g.y+e);}this.lineTo(g.x+g.width,g.y+g.height-e);if(isBorder(g.borderSelection,"BOTTOM"))this.arc(g.x+g.width-e,g.y+g.height-e,e,0,0.5*Math.PI);else this.stroke();}if(this.fillStyle!="rgba(0,0,0,0)"&&g.borderSelection==15)this.fill();}}this.fillStyle=d;return this;};}cursorDivCreated=false;function createCursorDiv(a){if(cursorDivCreated==false){var b=document.createElement(annotate_shape);b.id=annotate_shape;b.style.position="absolute";document.body.appendChild(b);cursorDivCreated=true;}}initChartJsResize=false;var jsGraphResize=new Array();function addResponsiveChart(d,a,c,b){if(initChartJsResize==false)if(window.addEventListener)window.addEventListener("resize",chartJsResize);else window.attachEvent("resize",chartJsResize);jsGraphResize[jsGraphResize.length]=[d,a.tpchart,a,c,b];}var container;function getMaximumWidth(a){if(a.parentNode!=null)if(a.parentNode!=undefined)container=a.parentNode;return container.clientWidth;}function getMaximumHeight(a){if(a.parentNode!=null)if(a.parentNode!=undefined)container=a.parentNode;return container.clientHeight;}function resizeCtxFunction(iter,ctx,data,config){if(isIE()<9&&isIE()!=false)return (true);var beforeWidth,afterWidth;var beforeHeight,afterHeight;beforeWidth=ctx.canvas.width;beforeHeight=ctx.canvas.height;afterWidth=beforeWidth;afterHeight=beforeHeight;var pxRatio=1;if(window.devicePixelRatio>1)pxRatio=window.devicePixelRatio;var maintainAspectRatio,responsiveMinWidth,responsiveMaxWidth,responsiveMaxHeight;if(typeof config.maintainAspectRatio=="undefined")maintainAspectRatio=true;else maintainAspectRatio=config.maintainAspectRatio;if(typeof config.responsiveMinWidth=="undefined")responsiveMinWidth=0;else responsiveMinWidth=config.responsiveMinWidth;if(typeof config.responsiveMinHeight=="undefined")responsiveMinHeight=0;else responsiveMinHeight=config.responsiveMinHeight;if(typeof config.responsiveMaxWidth=="undefined")responsiveMaxWidth=9999999;else responsiveMaxWidth=config.responsiveMaxWidth;if(typeof config.responsiveMaxHeight=="undefined")responsiveMaxHeight=9999999;else responsiveMaxHeight=config.responsiveMaxHeight;if(typeof ctx.initialSize=="undefined"){function getCSSText(className){if(typeof document.styleSheets!="object")return "";if(document.styleSheets.length<=0)return "";var classes=document.styleSheets[0].rules||document.styleSheets[0].cssRules;for(var x=0;x<classes.length;x++)if(classes[x].selectorText=="."+className||classes[x].selectorText=="#"+className)return ((classes[x].cssText)?(classes[x].cssText):(classes[x].style.cssText));return "";}function getCSSVal(source,srch){if(source.indexOf(" "+srch+":")>=0){value=source.substring(source.indexOf(" "+srch+":")+srch.length+2,100);value=value.substring(0,value.indexOf(";"));return value;}return "";}function getCSSWH(className){var styleVal=getCSSText(className);var width=getCSSVal(styleVal,"width");var height=getCSSVal(styleVal,"height");return {width,height};}ctx.initialSize={};ctx.initialSize.pxRatio=1;ctx.initialSize.width=ctx.canvas.width;ctx.initialSize.height=ctx.canvas.height;ctx.initialSize.styleWidth=ctx.canvas.style.width;ctx.initialSize.styleHeight=ctx.canvas.style.height;var cssVal={width:'',height:''};ctx.initialSize.cssWidth=cssVal.width;if(ctx.initialSize.cssWidth!="")ctx.initialSize.styleWidth="";ctx.initialSize.cssHeight=cssVal.height;if(ctx.initialSize.cssHeight!="")ctx.initialSize.styleHeight="";ctx.initialSize.computedWidth=window.getComputedStyle(ctx.canvas).getPropertyValue("width");ctx.initialSize.computedWidth=ctx.initialSize.computedWidth.substring(0,ctx.initialSize.computedWidth.indexOf("px"));if(ctx.initialSize.cssHeight!="")ctx.initialSize.computedHeight=ctx.initialSize.cssHeight;else if(ctx.initialSize.styleHeight!="")ctx.initialSize.computedHeight=ctx.initialSize.styleHeight;else ctx.initialSize.computedHeight=ctx.initialSize.height;if(typeof ctx.initialSize.computedHeight=="string"){if(ctx.initialSize.computedHeight.indexOf("px")>=0)ctx.initialSize.computedHeight=ctx.initialSize.computedHeight.substring(0,ctx.initialSize.computedHeight.indexOf("px"));if(ctx.initialSize.computedHeight.indexOf("%")>=0)ctx.initialSize.computedHeight="";}if(ctx.initialSize.computedHeight==""){ctx.initialSize.computedHeight=window.getComputedStyle(ctx.canvas).getPropertyValue("height");ctx.initialSize.computedHeight=ctx.initialSize.computedHeight.substring(0,ctx.initialSize.computedHeight.indexOf("px"));}ctx.chartTextScale=config.chartTextScale;ctx.chartLineScale=config.chartLineScale;ctx.chartSpaceScale=config.chartSpaceScale;ctx.initialSize.aspectRatio=ctx.canvas.width/ctx.canvas.height;if(1*config.forcedAspectRatio)ctx.initialSize.aspectRatio=1/config.forcedAspectRatio;ctx.initialSize.widthPct=0;ctx.initialSize.heightPct=0;if(ctx.initialSize.cssWidth.indexOf("%")>0)ctx.initialSize.widthPct=ctx.initialSize.cssWidth.substring(0,ctx.initialSize.cssWidth.indexOf("%"));else if(ctx.initialSize.cssWidth==""&&ctx.initialSize.styleWidth.indexOf("%")>0)ctx.initialSize.widthPct=ctx.initialSize.styleWidth.substring(0,ctx.initialSize.styleWidth.indexOf("%"));else{if(ctx.initialSize.cssWidth==""&&ctx.initialSize.styleWidth==""&&config.responsive)ctx.initialSize.widthPct=100;}if(ctx.initialSize.cssHeight.indexOf("%")>0)ctx.initialSize.heightPct=ctx.initialSize.cssHeight.substring(0,ctx.initialSize.cssHeight.indexOf("%"));else{if(ctx.initialSize.cssHeight==""&&ctx.canvas.style.height.indexOf("%")>0)ctx.initialSize.heightPct=ctx.canvas.style.height.substring(0,ctx.canvas.style.height.indexOf("%"));}ctx.canvas.style.width="";ctx.canvas.style.height="";afterWidth=ctx.initialSize.computedWidth;afterHeight=ctx.initialSize.computedHeight;}else{afterWidth=afterWidth/ctx.initialSize.pxRatio;afterHeight=afterHeight/ctx.initialSize.pxRatio;}if(ctx.initialSize.widthPct>0)afterWidth=(ctx.initialSize.widthPct/100)*(getMaximumWidth(ctx.canvas)*pxRatio);if(ctx.initialSize.heightPct>0)afterHeight=(ctx.initialSize.heightPct/100)*(getMaximumHeight(ctx.canvas)*pxRatio);if(ctx.initialSize.cssHeight=="")afterHeight=maintainAspectRatio?afterWidth/ctx.initialSize.aspectRatio:afterHeight;afterWidth=Math.min(responsiveMaxWidth,Math.max(responsiveMinWidth,afterWidth));afterHeight=Math.min(responsiveMaxHeight,Math.max(responsiveMinHeight,afterHeight));if(typeof ctx.chartTextScale!="undefined"&&config.responsiveScaleContent){ctx.chartTextScale=config.chartTextScale*(afterWidth/ctx.initialSize.computedWidth);ctx.chartLineScale=config.chartLineScale*(afterWidth/ctx.initialSize.computedWidth);ctx.chartSpaceScale=config.chartSpaceScale*(afterWidth/ctx.initialSize.computedWidth);}if(pxRatio>1||afterWidth!=beforeWidth)if(ctx.initialSize.cssWidth!=""&&ctx.initialSize.widthPct==0){ctx.canvas.width=afterWidth*pxRatio;ctx.canvas.style.width=afterWidth+"px";}else{ctx.canvas.width=afterWidth;ctx.canvas.style.width=eval(afterWidth/pxRatio)+"px";}if(pxRatio>1||afterHeight!=beforeHeight)if(ctx.initialSize.cssWidth!=""&&ctx.initialSize.widthPct==0){ctx.canvas.height=afterHeight*pxRatio;ctx.canvas.style.height=afterHeight+"px";}else{ctx.canvas.height=afterHeight;ctx.canvas.style.height=eval(afterHeight/pxRatio)+"px";}ctx.scale(pxRatio,pxRatio);ctx.initialSize.pxRatio=pxRatio;}function chartJsResize(){for(var a=0;a<jsGraphResize.length;a++)if(jsGraphResize[a][2].firstPass==0){}else if(jsGraphResize[a][2].firstPass==9){jsGraphResize[a][2].firstPass=2;resizeCtxFunction(1,jsGraphResize[a][2],jsGraphResize[a][3],jsGraphResize[a][4]);redrawGraph(jsGraphResize[a][2],jsGraphResize[a][3],jsGraphResize[a][4]);}else{if(jsGraphResize[a][2].firstPass<10)jsGraphResize[a][2].firstPass+=10;}}function testRedraw(a,c,b){if(a.firstPass>10){a.firstPass=2;if(b.responsive)resizeCtxFunction(1,a,c,b);redrawGraph(a,c,b);return true;}else return false;}function updateChart(a,e,b,d,f){a.addListener=false;if(a.firstPass==9){a.runanimationcompletefunction=f;if(d)a.firstPass=1;else a.firstPass=2;if(b.responsive)for(var c=0;c<jsGraphResize.length;c++)if(jsGraphResize[c][2].ChartNewId==a.ChartNewId){jsGraphResize[c][3]=e;jsGraphResize[c][4]=b;}redrawGraph(a,e,b);}}function redrawGraph(ctx,data,config){if(ctx.initialSize.pxRatio==1&&(ctx.firstPass==2||ctx.firstPass==9)&&!(isIE()<9&&isIE()!=false)&&(navigator.userAgent.indexOf("Safari")==-1)){var OSC;var tmpctx;OSC=document.createElement("canvas");tmpctx=OSC.getContext("2d");tmpctx.vctx=ctx;OSC.width=ctx.canvas.width;OSC.height=ctx.canvas.height;if(typeof ctx.vWidth=="number"){var canvasWidth=window.getComputedStyle(ctx.canvas).getPropertyValue("width");tmpctx.canvas.width=canvasWidth.substring(0,canvasWidth.indexOf("px"));ctx.canvas.width=tmpctx.canvas.width;tmpctx.vWidth=ctx.vWidth;}tmpctx.ChartNewId=ctx.ChartNewId;tmpctx.tpchart=ctx.tpchart;tmpctx.tpchartSub=ctx.tpchartSub;tmpctx.tpdata=ctx.tpdata;tmpctx.initialSize=ctx.initialSize;tmpctx.chartTextScale=ctx.chartTextScale;tmpctx.chartLineScale=ctx.chartLineScale;tmpctx.chartSpaceScale=ctx.chartSpaceScale;tmpctx.firstPass=ctx.firstPass;tmpctx.runanimationcompletefunction=ctx.runanimationcompletefunction;tmpctx.pieces_drawn=ctx.pieces_drawn;var myGraph=new Chart(tmpctx);eval("myGraph."+tmpctx.tpchartSub+"(data,config);");if(typeof ctx.vWidth=="number")ctx.vWidth=tmpctx.vWidth;ctx.ChartNewId=tmpctx.ChartNewId;ctx.tpchart=tmpctx.tpchart;ctx.tpchartSub=tmpctx.tpchartSub;ctx.tpdata=tmpctx.tpdata;ctx.initialSize=tmpctx.initialSize;ctx.chartTextScale=tmpctx.chartTextScale;ctx.chartLineScale=tmpctx.chartLineScale;ctx.chartSpaceScale=tmpctx.chartSpaceScale;ctx.firstPass=tmpctx.firstPass;ctx.runanimationcompletefunction=tmpctx.runanimationcompletefunction;ctx.pieces_drawn=tmpctx.pieces_drawn;ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);ctx.drawImage(OSC,0,0);}else{var myGraph=new Chart(ctx);eval("myGraph."+ctx.tpchartSub+"(data,config);");}}function checkBrowser(){this.ver=navigator.appVersion;this.dom=document.getElementById?1:0;this.ie5=(this.ver.indexOf("MSIE 5")>-1&&this.dom)?1:0;this.ie4=(document.all&&!this.dom)?1:0;this.ns5=(this.dom&&parseInt(this.ver)>=5)?1:0;this.ns4=(document.layers&&!this.dom)?1:0;this.bw=(this.ie5||this.ie4||this.ns4||this.ns5);return this;}bw=new checkBrowser();fromLeft=10;fromTop=10;function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop";if(bw.ns4)document.captureEvents(Event.MOUSEMOVE);}function makeCursorObj(config,obj,nest){createCursorDiv(config);nest=(!nest)?"":"document."+nest+".";this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0;this.moveIt=b_moveIt;cursorInit();return this;}function b_moveIt(a,b){this.x=a;this.y=b;this.css.left=this.x+"px";this.css.top=this.y+"px";}function isIE(){var a=navigator.userAgent.toLowerCase();return (a.indexOf("msie")!=-1)?parseInt(a.split("msie")[1]):false;}function mergeChartConfig(d,b){var a={};for(var c in d)a[c]=d[c];for(var e in b)a[e]=b[e];return a;}function addAnimationEasing(b){var a={};for(var c in b)a[c]=b[c];if(typeof a.animationYAxisEasing!=="object")a.animationYAxisEasing=[a.animationEasing];if(typeof a.animationRadiusEasing!=="object")a.animationRadiusEasing=[a.animationEasing];if(typeof a.animationRotateEasing!=="object")a.animationRotateEasing=[a.animationEasing];return a;}function sleep(a){var b=new Date();b.setTime(b.getTime()+a);while(new Date().getTime()<b.getTime()){}}function saveCanvas(b,d,c){cvSave=b.getImageData(0,0,b.canvas.width,b.canvas.height);var f={savePng:false,annotateDisplay:false,animation:false,dynamicDisplay:false};savePngConfig1=mergeChartConfig(c,f);savePngConfig1.clearRect=false;redrawGraph(b,d,savePngConfig1);var e;if(c.savePngOutput=="NewWindow"){e=b.canvas.toDataURL();b.putImageData(cvSave,0,0);window.open(e,"_blank");}if(c.savePngOutput=="CurrentWindow"){e=b.canvas.toDataURL();b.putImageData(cvSave,0,0);window.location.href=e;}if(c.savePngOutput=="Save"){e=b.canvas.toDataURL();var a=document.createElement("a");a.href=e;a.download=c.savePngName+".png";document.body.appendChild(a);a.click();document.body.removeChild(a);}}if(typeof String.prototype.trim!=="function")String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};var dynamicDisplay=new Array();var dynamicDisplayList=new Array();function dynamicFunction(d,c,a){if(isIE()<9&&isIE()!=false)return (true);if(c.dynamicDisplay&&a.firstPass==0){if(a.canvas.id==""){var e=new Date();var b=e.getTime();a.canvas.id="Canvas_"+b;}if(typeof (dynamicDisplay[a.canvas.id])=="undefined"){dynamicDisplayList[dynamicDisplayList.length]=a.canvas.id;dynamicDisplay[a.canvas.id]=[a,d,c];window.onscroll=scrollFunction;}if(!isScrolledIntoView(a.canvas,c))return false;}return true;}function isScrolledIntoView(c,b){var f=0;var d=0;var a,e;if(typeof c.recomputedHeight=="undefined")if(window.devicePixelRatio){c.recomputedHeight=c.height/window.devicePixelRatio;c.recomputedWidth=c.width/window.devicePixelRatio;}else{c.recomputedHeight=c.height;c.recomputedWidth=c.width;}a=c.recomputedWidth;e=c.recomputedHeight;elem=c;while(elem){f+=(elem.offsetLeft+elem.clientLeft);d+=(elem.offsetTop+elem.clientTop);elem=elem.offsetParent;}if(f+(a*b.dynamicDisplayXPartOfChart)>=window.pageXOffset&&f+(a*b.dynamicDisplayXPartOfChart)<=window.pageXOffset+window.innerWidth&&d+(e*b.dynamicDisplayYPartOfChart)>=window.pageYOffset&&d+(e*b.dynamicDisplayYPartOfChart)<=window.pageYOffset+window.innerHeight)return (true);else return false;}function scrollFunction(){for(var a=0;a<dynamicDisplayList.length;a++)if((dynamicDisplay[dynamicDisplayList[a]][0]).firstPass==0)redrawGraph(dynamicDisplay[dynamicDisplayList[a]][0],dynamicDisplay[dynamicDisplayList[a]][1],dynamicDisplay[dynamicDisplayList[a]][2]);}var jsGraphAnnotate=new Array();var jsTextMousePos=new Array();var mouseActionData=new Array();function clearAnnotate(a){jsGraphAnnotate[a]=[];jsTextMousePos[a]=[];}function getMousePos(b,a){var c=b.getBoundingClientRect();return {x:a.clientX-c.left,y:a.clientY-c.top};}function isHighLighted(a,b,f,h,e,c,g){var d;if(typeof f.special=="object")for(d=f.special.length-1;d>=0;d--)if(f.special[d].typespecial=="highLight"&&f.special[d].posi==e&&f.special[d].posj==c)return true;return false;}function isNotHighLighted(a,b,e,g,d,c,f){return (!isHighLighted(a,b,e,g,d,c,f));}function deleteHighLight(a,c){var b;if(typeof c.special=="object")for(b=c.special.length-1;b>=0;b--)if(c.special[b].typespecial=="highLight")c.special.splice(b,1);}function highLightAction(action,ctx,data,config,v1,v2){if(ctx.firstPass!=9)return;var currentlyDisplayed=[-1,-1];var redisplay=false;var i,j;if(typeof data.special=="object")for(i=0;i<data.special.length&&currentlyDisplayed[0]==-1;i++)if(data.special[i].typespecial=="highLight")currentlyDisplayed=[data.special[i].posi,data.special[i].posj];var deleteOld=false;var addNew=false;var property;var output;var fndoldspec=false;var fndnewspec=false;if(action=="HIDE"&&currentlyDisplayed[0]!=-1)deleteOld=true;else if(action!="HIDE"&&config.highLightFullLine=="group"&&(currentlyDisplayed[1]!=v2)){if(currentlyDisplayed[0]!=-1)deleteOld=true;addNew=true;}else if(action!="HIDE"&&config.highLightFullLine==false&&(currentlyDisplayed[0]!=v1||currentlyDisplayed[1]!=v2)){if(currentlyDisplayed[0]!=-1)deleteOld=true;addNew=true;}else{if(action!="HIDE"&&config.highLightFullLine==true&&(currentlyDisplayed[0]!=v1)){if(currentlyDisplayed[0]!=-1)deleteOld=true;addNew=true;}}if(deleteOld){redisplay=true;for(i=data.special.length-1;i>=0;i--)if(data.special[i].typespecial=="highLight"){data.special.splice(i,1);fndoldspec=true;}}if(addNew){redisplay=true;if(typeof data.special=="undefined")data.special=[];if(config.highLightFullLine=="group"){for(j=0;j<data.datasets.length;j++)if(!(data.datasets[j].mouseDetection==false)){output="";for(property in config.highLightSet){if(output!="")output=output+",";if(typeof config.highLightSet[property]=="string")output+=property+': "'+config.highLightSet[property]+'"';else output+=property+": "+config.highLightSet[property];}fndnewspec=true;eval("data.special[data.special.length]={"+output+"};");data.special[data.special.length-1].posi=j;data.special[data.special.length-1].posj=v2;data.special[data.special.length-1].typespecial="highLight";}}else if(config.highLightFullLine==true){if(!(data.datasets[v1].mouseDetection==false))for(j=0;j<data.datasets[v1].data.length;j++){output="";for(property in config.highLightSet){if(output!="")output=output+",";if(typeof config.highLightSet[property]=="string")output+=property+': "'+config.highLightSet[property]+'"';else output+=property+": "+config.highLightSet[property];}fndnewspec=true;eval("data.special[data.special.length]={"+output+"};");data.special[data.special.length-1].posi=v1;data.special[data.special.length-1].posj=j;data.special[data.special.length-1].typespecial="highLight";}}else{if(!(data.datasets[v1].mouseDetection==false)){output="";for(property in config.highLightSet){if(output!="")output=output+",";if(typeof config.highLightSet[property]=="string")output+=property+': "'+config.highLightSet[property]+'"';else output+=property+": "+config.highLightSet[property];}fndnewspec=true;eval("data.special[data.special.length]={"+output+"};");data.special[data.special.length-1].posi=v1;data.special[data.special.length-1].posj=v2;data.special[data.special.length-1].typespecial="highLight";}}}if(redisplay==true)updateChart(ctx,data,config,false,config.highLightRerunEndFunction);}var inMouseAction=new Array();function initAnnotateDiv(c,b,a){c.className=(b.annotateClassName)?b.annotateClassName:"";c.style.border=(b.annotateClassName)?"":b.annotateBorder;c.style.padding=(b.annotateClassName)?"":b.annotatePadding;c.style.borderRadius=(b.annotateClassName)?"":b.annotateBorderRadius;c.style.backgroundColor=(b.annotateClassName)?"":b.annotateBackgroundColor;c.style.color=(b.annotateClassName)?"":b.annotateFontColor;c.style.fontFamily=(b.annotateClassName)?"":b.annotateFontFamily;c.style.fontSize=(b.annotateClassName)?"":(Math.ceil(a.chartTextScale*b.annotateFontSize)).toString()+"pt";c.style.fontStyle=(b.annotateClassName)?"":b.annotateFontStyle;c.style.zIndex=999;}function displayAnnotate(ctx,data,config,rect,event,annotateDIV,jsGraphAnnotate,piece,myStatData,statData){if(jsGraphAnnotate[ctx.ChartNewId][piece.piece][0]=="ARC")dispString=tmplbis(setOptionValue(true,true,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][piece.piece][3],undefined,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][piece.piece][1],-1,{otherVal:true}),myStatData,config);else dispString=tmplbis(setOptionValue(true,true,1,"ANNOTATELABEL",ctx,data,jsGraphAnnotate[ctx.ChartNewId][piece.piece][3],undefined,config.annotateLabel,"annotateLabel",jsGraphAnnotate[ctx.ChartNewId][piece.piece][1],jsGraphAnnotate[ctx.ChartNewId][piece.piece][2],{otherVal:true}),myStatData,config);textMsr=ctx.measureTextMultiLine(dispString,1*annotateDIV.style.fontSize.replace("pt",""));ctx.restore();annotateDIV.innerHTML=dispString;x=bw.ns4||bw.ns5?event.pageX:event.x;y=bw.ns4||bw.ns5?event.pageY:event.y;if(bw.ie4||bw.ie5)y=y+eval(scrolled);if(config.annotateRelocate===true){var relocateX,relocateY;relocateX=0;relocateY=0;if(x+fromLeft+textMsr.textWidth>window.innerWidth-rect.left-fromLeft)relocateX=-textMsr.textWidth;if(y+fromTop+textMsr.textHeight>1*window.innerHeight-1*rect.top+fromTop)relocateY-=(textMsr.textHeight+2*fromTop);oCursor.moveIt(Math.max(8-rect.left,x+fromLeft+relocateX),Math.max(8-rect.top,y+fromTop+relocateY));}else oCursor.moveIt(x+fromLeft,y+fromTop);annotateDIV.style.display=true?"":"none";}function doMouseAction(V,z,c){if(z.firstPass!=9)return;if(c=="mousedown")c=c+" "+V.which;if(z.mouseAction.indexOf(c)<0)return;var K=mouseActionData[z.ChartNewId].config;var Q=mouseActionData[z.ChartNewId].data;var L,O,l;var C,o,H,P,n,G,q,X,W,U,T;var R=[];var D=[];var A,u,r,d,t,E;var m=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";var S=getMousePos(z.canvas,V);var e,I;var p,b;if(c=="mousedown 1")e="mousedown left";else if(c=="mousedown 2")e="mousedown middle";else if(c=="mousedown 3")e="mousedown right";else if(c==m)e="mousewheel";else e=c;for(L=0;L<jsGraphAnnotate[z.ChartNewId]["length"];L++)if(jsGraphAnnotate[z.ChartNewId][L][0]=="ARC"){myStatData=jsGraphAnnotate[z.ChartNewId][L][3][jsGraphAnnotate[z.ChartNewId][L][1]];A=Math.sqrt((S.x-myStatData.midPosX)*(S.x-myStatData.midPosX)+(S.y-myStatData.midPosY)*(S.y-myStatData.midPosY));if(A>myStatData.int_radius&&A<myStatData.radiusOffset){u=(Math.acos((S.x-myStatData.midPosX)/A)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(S.y<myStatData.midPosY)u=-u;u=(((u+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);myStatData.startAngle=(((myStatData.startAngle+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);myStatData.endAngle=(((myStatData.endAngle+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(myStatData.endAngle<myStatData.startAngle)myStatData.endAngle+=2*Math.PI;if((u>myStatData.startAngle&&u<myStatData.endAngle)||(u>myStatData.startAngle-2*Math.PI&&u<myStatData.endAngle-2*Math.PI)||(u>myStatData.startAngle+2*Math.PI&&u<myStatData.endAngle+2*Math.PI)){myStatData.graphPosX=S.x;myStatData.graphPosY=S.y;R[R.length]={piece:L,i:jsGraphAnnotate[z.ChartNewId][L][1],j:jsGraphAnnotate[z.ChartNewId][L][2],myStatData};}}}else if(jsGraphAnnotate[z.ChartNewId][L][0]=="MARC"){myStatData=jsGraphAnnotate[z.ChartNewId][L][3][jsGraphAnnotate[z.ChartNewId][L][1]][jsGraphAnnotate[z.ChartNewId][L][2]];A=Math.sqrt((S.x-myStatData.midPosX)*(S.x-myStatData.midPosX)+(S.y-myStatData.midPosY)*(S.y-myStatData.midPosY));if(A>myStatData.int_radius&&A<myStatData.radiusOffset){u=(Math.acos((S.x-myStatData.midPosX)/A)%(2*Math.PI)+2*Math.PI)%(2*Math.PI);if(S.y<myStatData.midPosY)u=-u;u=(((u+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);myStatData.startAngle=(((myStatData.startAngle+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);myStatData.endAngle=(((myStatData.endAngle+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(myStatData.endAngle<myStatData.startAngle)myStatData.endAngle+=2*Math.PI;if((u>myStatData.startAngle&&u<myStatData.endAngle)||(u>myStatData.startAngle-2*Math.PI&&u<myStatData.endAngle-2*Math.PI)||(u>myStatData.startAngle+2*Math.PI&&u<myStatData.endAngle+2*Math.PI)){myStatData.graphPosX=S.x;myStatData.graphPosY=S.y;R[R.length]={piece:L,i:jsGraphAnnotate[z.ChartNewId][L][1],j:jsGraphAnnotate[z.ChartNewId][L][2],myStatData};}}}else if(jsGraphAnnotate[z.ChartNewId][L][0]=="RECT"){myStatData=jsGraphAnnotate[z.ChartNewId][L][3][jsGraphAnnotate[z.ChartNewId][L][1]][jsGraphAnnotate[z.ChartNewId][L][2]];r=Math.max(myStatData.yPosBottom,myStatData.yPosTop);d=Math.min(myStatData.yPosBottom,myStatData.yPosTop);if(r-d<K.annotateBarMinimumDetectionHeight){r=(r+d+K.annotateBarMinimumDetectionHeight)/2;d=r-K.annotateBarMinimumDetectionHeight;}t=Math.min(myStatData.xPosLeft,myStatData.xPosRight);E=Math.max(myStatData.xPosLeft,myStatData.xPosRight);if(E-t<K.annotateBarMinimumDetectionHeight){E=(E+t+K.annotateBarMinimumDetectionHeight)/2;t=E-K.annotateBarMinimumDetectionHeight;}if(S.x>t&&S.x<E&&S.y<r&&S.y>d){myStatData.graphPosX=S.x;myStatData.graphPosY=S.y;R[R.length]={piece:L,i:jsGraphAnnotate[z.ChartNewId][L][1],j:jsGraphAnnotate[z.ChartNewId][L][2],myStatData};}}else{if(jsGraphAnnotate[z.ChartNewId][L][0]=="POINT"){myStatData=jsGraphAnnotate[z.ChartNewId][L][3][jsGraphAnnotate[z.ChartNewId][L][1]][jsGraphAnnotate[z.ChartNewId][L][2]];I=0;if(typeof myStatData.markerRadius!="undefined")I=myStatData.markerRadius;if(K.detectAnnotateOnFullLine)if(S.x<Math.min(myStatData.annotateStartPosX,myStatData.annotateEndPosX)-Math.ceil(z.chartSpaceScale*K.pointHitDetectionRadius)||S.x>Math.max(myStatData.annotateStartPosX,myStatData.annotateEndPosX)+Math.ceil(z.chartSpaceScale*K.pointHitDetectionRadius)||S.y<Math.min(myStatData.annotateStartPosY,myStatData.annotateEndPosY)-Math.ceil(z.chartSpaceScale*K.pointHitDetectionRadius)||S.y>Math.max(myStatData.annotateStartPosY,myStatData.annotateEndPosY)+Math.ceil(z.chartSpaceScale*K.pointHitDetectionRadius))A=Math.ceil(z.chartSpaceScale*K.pointHitDetectionRadius)+1;else if(typeof myStatData.D1A=="undefined")A=Math.abs(S.x-myStatData.posX);else if(typeof myStatData.D2A=="undefined")A=Math.abs(S.y-myStatData.posY);else{var f=-myStatData.D2A*S.x+S.y;var N=-(myStatData.D1B-f)/(myStatData.D1A-myStatData.D2A);var M=myStatData.D2A*N+f;A=Math.sqrt((S.x-N)*(S.x-N)+(S.y-M)*(S.y-M));}else A=Math.sqrt((S.x-myStatData.posX)*(S.x-myStatData.posX)+(S.y-myStatData.posY)*(S.y-myStatData.posY));if(A<Math.max(I,Math.ceil(z.chartSpaceScale*K.pointHitDetectionRadius))){myStatData.graphPosX=S.x;myStatData.graphPosY=S.y;R[R.length]={piece:L,i:jsGraphAnnotate[z.ChartNewId][L][1],j:jsGraphAnnotate[z.ChartNewId][L][2],myStatData};}}}if(K.detectMouseOnText)for(L=0;L<jsTextMousePos[z.ChartNewId]["length"];L++){C=true;if(Math.abs(jsTextMousePos[z.ChartNewId][L][3].p1-jsTextMousePos[z.ChartNewId][L][3].p2)<K.zeroValue){if(S.x<Math.min(jsTextMousePos[z.ChartNewId][L][2].p1,jsTextMousePos[z.ChartNewId][L][2].p2))C=false;if(S.x>Math.max(jsTextMousePos[z.ChartNewId][L][2].p1,jsTextMousePos[z.ChartNewId][L][2].p2))C=false;if(S.y<Math.min(jsTextMousePos[z.ChartNewId][L][3].p1,jsTextMousePos[z.ChartNewId][L][3].p3))C=false;if(S.y>Math.max(jsTextMousePos[z.ChartNewId][L][3].p1,jsTextMousePos[z.ChartNewId][L][3].p3))C=false;}else if(Math.abs(jsTextMousePos[z.ChartNewId][L][2].p1-jsTextMousePos[z.ChartNewId][L][2].p2)<K.zeroValue){if(S.x<Math.min(jsTextMousePos[z.ChartNewId][L][2].p1,jsTextMousePos[z.ChartNewId][L][2].p3))C=false;if(S.x>Math.max(jsTextMousePos[z.ChartNewId][L][2].p1,jsTextMousePos[z.ChartNewId][L][2].p3))C=false;if(S.y<Math.min(jsTextMousePos[z.ChartNewId][L][3].p1,jsTextMousePos[z.ChartNewId][L][3].p2))C=false;if(S.y>Math.max(jsTextMousePos[z.ChartNewId][L][3].p1,jsTextMousePos[z.ChartNewId][L][3].p2))C=false;}else{o=Math.tan(jsTextMousePos[z.ChartNewId][L][4]);H=jsTextMousePos[z.ChartNewId][L][3].p1-o*jsTextMousePos[z.ChartNewId][L][2].p1;P=jsTextMousePos[z.ChartNewId][L][3].p3-o*jsTextMousePos[z.ChartNewId][L][2].p3;n=-1/o;G=jsTextMousePos[z.ChartNewId][L][3].p1-n*jsTextMousePos[z.ChartNewId][L][2].p1;q=jsTextMousePos[z.ChartNewId][L][3].p4-n*jsTextMousePos[z.ChartNewId][L][2].p4;X=o*S.x+H;W=o*S.x+P;U=n*S.x+G;T=n*S.x+q;if(S.y<Math.min(X,W))C=false;if(S.y>Math.max(X,W))C=false;if(S.y<Math.min(U,T))C=false;if(S.y>Math.max(U,T))C=false;}if(C)D[D.length]=L;}function a(g,h){return (g==h||(g=="mousemove"&&(h=="mousewheel"||h=="mouseout")));}if(K.savePng&&a(K.savePngFunction,e))saveCanvas(z,Q,K);var s=-1;var J=-1;var v=false;var w=false;for(L=R.length-1;L>=0;L--){if(jsGraphAnnotate[z.ChartNewId][R[L].piece][4])if(v==false){if(s==-1)s=L;if(jsGraphAnnotate[z.ChartNewId][R[L].piece][0]=="POINT"){s=L;v=true;}}if(w==false){if(J==-1)J=L;if(jsGraphAnnotate[z.ChartNewId][R[L].piece][0]=="POINT"){J=L;w=true;}}}if((K.annotateDisplay||typeof K.annotateDisplay=="function")&&a(K.annotateFunction,e)){p=document.getElementById(annotate_shape);p.style.display=false?"":"none";if(R.length>0){initAnnotateDiv(p,K,z);z.save();z.font=p.style.fontStyle+" "+p.style.fontSize+" "+p.style.fontFamily;var F=z.canvas.getBoundingClientRect();b=false;if(s!=-1)if(jsGraphAnnotate[z.ChartNewId][R[s].piece][4]){displayAnnotate(z,Q,K,F,V,p,jsGraphAnnotate,R[s],R[s].myStatData,jsGraphAnnotate[z.ChartNewId][R[s].piece][3]);b=true;}}}if(inMouseAction[z.ChartNewId]==false&&mouseActionData[z.ChartNewId].prevShow>=0&&a("mousemove",e)&&(R.length==0||mouseActionData[z.ChartNewId].prevShow!=R[R.length-1].piece)){inMouseAction[z.ChartNewId]=true;prevShow=mouseActionData[z.ChartNewId].prevShow;mouseActionData[z.ChartNewId].prevShow=-1;if(K.highLight&&a(K.highLightMouseFunction,e)&&R.length==0)highLightAction("HIDE",z,Q,K,null,null);if(typeof K.annotateFunctionOut=="function")if(jsGraphAnnotate[z.ChartNewId][prevShow][0]=="ARC")K.annotateFunctionOut("OUTANNOTATE",z,Q,jsGraphAnnotate[z.ChartNewId][prevShow][3],jsGraphAnnotate[z.ChartNewId][prevShow][1],-1,null);else K.annotateFunctionOut("OUTANNOTATE",z,Q,jsGraphAnnotate[z.ChartNewId][prevShow][3],jsGraphAnnotate[z.ChartNewId][prevShow][1],jsGraphAnnotate[z.ChartNewId][prevShow][2],null);inMouseAction[z.ChartNewId]=false;}if(R.length>0&&inMouseAction[z.ChartNewId]==false&&mouseActionData[z.ChartNewId].prevShow!=R[J].piece&&a("mousemove",e)){inMouseAction[z.ChartNewId]=true;prevShow=mouseActionData[z.ChartNewId].prevShow;if(K.highLight&&a(K.highLightMouseFunction,e))if(J!=-1)if(jsGraphAnnotate[z.ChartNewId][R[J].piece][0]=="ARC")highLightAction("ARC",z,Q,K,jsGraphAnnotate[z.ChartNewId][R[J].piece][1],-1);else highLightAction(jsGraphAnnotate[z.ChartNewId][R[J].piece][0],z,Q,K,jsGraphAnnotate[z.ChartNewId][R[J].piece][1],jsGraphAnnotate[z.ChartNewId][R[J].piece][2]);if(typeof K.annotateFunctionIn=="function")if(jsGraphAnnotate[z.ChartNewId][R[R.length-1].piece][0]=="ARC")K.annotateFunctionIn("INANNOTATE",z,Q,jsGraphAnnotate[z.ChartNewId][R[R.length-1].piece][3],jsGraphAnnotate[z.ChartNewId][R[R.length-1].piece][1],-1,null);else K.annotateFunctionIn("INANNOTATE",z,Q,jsGraphAnnotate[z.ChartNewId][R[R.length-1].piece][3],jsGraphAnnotate[z.ChartNewId][R[R.length-1].piece][1],jsGraphAnnotate[z.ChartNewId][R[R.length-1].piece][2],null);inMouseAction[z.ChartNewId]=false;mouseActionData[z.ChartNewId].prevShow=R[J].piece;}if(K.highLight&&a(K.highLightMouseFunction,e)&&a("mousemove",e)==false)if(R.length==0)highLightAction("HIDE",z,Q,K,null,null);else{if(J!=-1)if(jsGraphAnnotate[z.ChartNewId][R[J].piece][0]=="ARC")highLightAction("ARC",z,Q,K,jsGraphAnnotate[z.ChartNewId][R[J].piece][1],-1);else highLightAction(jsGraphAnnotate[z.ChartNewId][R[J].piece][0],z,Q,K,jsGraphAnnotate[z.ChartNewId][R[J].piece][1],jsGraphAnnotate[z.ChartNewId][R[J].piece][2]);}function B(h){var g;for(g=0;g<R.length;g++)h(V,z,K,Q,R[g].myStatData);for(g=0;g<D.length;g++)h(V,z,K,Q,{type:"CLICKONTEXT",values:jsTextMousePos[z.ChartNewId][D[g]]});if(R.length==0&&D.length==0)h(V,z,K,Q,null);}if(typeof K.mouseMove=="function"&&a("mousemove",e))B(K.mouseMove);if(typeof K.mouseDownLeft=="function"&&a("mousedown left",e))B(K.mouseDownLeft);if(typeof K.mouseDownRight=="function"&&a("mousedown right",e))B(K.mouseDownRight);if(typeof K.mouseDownMiddle=="function"&&a("mousedown middle",e))B(K.mouseDownMiddle);if(typeof K.mouseWheel=="function"&&a("mousewheel",e))B(K.mouseWheel);if(typeof K.mouseOut=="function"&&a("mouseout",e))B(K.mouseOut);if(typeof K.mouseDblClick=="function"&&a("dblclick",e))B(K.mouseDblClick);}window.Chart=function(context){var chart=this;var width=context.canvas.width;var height=context.canvas.height;this.PolarArea=function(data,options){chart.PolarArea.defaults=chart.defaults.PolarAreaV2;chart.PolarArea.defaults=mergeChartConfig(chart.defaults.PolarArea,chart.PolarArea.defaults);if(isIE()<9&&isIE()!=false)chart.PolarArea.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.PolarArea.defaults);chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults);chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions);chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var config=(options)?mergeChartConfig(chart.PolarArea.defaults,options):chart.PolarArea.defaults;config=addAnimationEasing(config);return new PolarArea(data,config,context);};this.Radar=function(data,options){chart.Radar.defaults={highLightSet:{pointDotRadius:15,pointDot:true},inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleGridLinesStep:1,scaleOverlay:false,scaleOverride:false,scaleOverride2:false,forceSecondScale:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:false,scaleShowLabels2:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:true,angleLineColor:"rgba(0,0,0,.1)",angleLineStyle:"solid",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,pointDotStrokeStyle:"solid",datasetFill:true,datasetStrokeWidth:2,datasetStrokeStyle:"solid",animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10,startAngle:90};if(isIE()<9&&isIE()!=false)chart.Radar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Radar.defaults);chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults);chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions);chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var config=(options)?mergeChartConfig(chart.Radar.defaults,options):chart.Radar.defaults;config=addAnimationEasing(config);return new Radar(data,config,context);};this.Pie=function(data,options){chart.Pie.defaults=chart.defaults.PieAndDoughnutV2;chart.Pie.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Pie.defaults);if(isIE()<9&&isIE()!=false)chart.Pie.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Pie.defaults);chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults);chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions);chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);var config=(options)?mergeChartConfig(chart.Pie.defaults,options):chart.Pie.defaults;config=addAnimationEasing(config);return new Pie(data,config,context);};this.Doughnut=function(data,options){chart.Doughnut.defaults=chart.defaults.PieAndDoughnutV2;chart.Doughnut.defaults=mergeChartConfig(chart.defaults.PieAndDoughnut,chart.Doughnut.defaults);if(isIE()<9&&isIE()!=false)chart.Doughnut.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Doughnut.defaults);chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults);chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions);chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var config=(options)?mergeChartConfig(chart.Doughnut.defaults,options):chart.Doughnut.defaults;config=addAnimationEasing(config);return new Doughnut(data,config,context);};this.Bubble=function(data,options){chart.Bubble.defaults={highLightSet:{pointDotStrokeWidth:5,pointStrokeColor:"red"},annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + (vbubble=='' ? '' : ' / '+vbubble)%>",inGraphDataTmpl:"<%=v3+(vbubble=='' ? '' : '/'+vbubble)%>",inGraphDataAlign:"center",inGraphDataVAlign:"middle",inGraphDataPaddingX:0,inGraphDataPaddingY:0,saveBackImage:true,bubbleMaxVal:"max",bubbleMinVal:0,bubbleMaxRadius:0.2,pointDotRadius:15,animationEasing:"linear"};if(isIE()<9&&isIE()!=false)chart.Bubble.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Bubble.defaults);chart.Bubble.defaults=mergeChartConfig(chart.defaults.Line_and_Bubble,chart.Bubble.defaults);chart.Bubble.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bubble.defaults);chart.Bubble.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bubble.defaults);chart.Bubble.defaults=mergeChartConfig(chart.Bubble.defaults,charJSPersonalDefaultOptions);chart.Bubble.defaults=mergeChartConfig(chart.Bubble.defaults,charJSPersonalDefaultOptionsLine);var config=(options)?mergeChartConfig(chart.Bubble.defaults,options):chart.Bubble.defaults;config=addAnimationEasing(config);return new Bubble(data,config,context);};this.Line=function(data,options){chart.Line.defaults={};if(isIE()<9&&isIE()!=false)chart.Line.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Line.defaults);chart.Line.defaults=mergeChartConfig(chart.defaults.Line_and_Bubble,chart.Line.defaults);chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults);chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults);chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions);chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var config=(options)?mergeChartConfig(chart.Line.defaults,options):chart.Line.defaults;config=addAnimationEasing(config);return new Line(data,config,context);};this.StackedBar=function(data,options){chart.StackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:true},inGraphDataShow:false,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:false,scaleOverride:false,scaleOverride2:false,forceSecondScale:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:true,scaleShowLabels2:true,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",rotateTLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,pointDot:true,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,barShowStroke:true,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,bezierCurve:true,linkType:0,bezierCurveTension:0.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10};if(isIE()<9&&isIE()!=false)chart.StackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.StackedBar.defaults);chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults);chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults);chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions);chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var config=(options)?mergeChartConfig(chart.StackedBar.defaults,options):chart.StackedBar.defaults;config=addAnimationEasing(config);return new StackedBar(data,config,context);};this.HorizontalStackedBar=function(data,options){chart.HorizontalStackedBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:true},inGraphDataShow:false,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:false,scaleOverride:false,scaleOverride2:false,forceSecondScale:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:true,scaleShowLabels2:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:true,rotateLabels:"smart",rotateTLabels:"smart",barShowStroke:true,barValueSpacing:5,barDatasetSpacing:1,spaceBetweenBar:0,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:false};if(isIE()<9&&isIE()!=false)chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalStackedBar.defaults);chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults);chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults);chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions);chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var config=(options)?mergeChartConfig(chart.HorizontalStackedBar.defaults,options):chart.HorizontalStackedBar.defaults;config=addAnimationEasing(config);return new HorizontalStackedBar(data,config,context);};this.Bar=function(data,options){chart.Bar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:true},inGraphDataShow:false,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:false,scaleOverride:false,scaleOverride2:false,forceSecondScale:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:true,scaleShowLabels2:true,scaleLabel:"<%=value%>",scaleLabel2:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleGridLineStyle:"solid",showYAxisMin:true,rotateLabels:"smart",rotateTLabels:"smart",logarithmic:false,logarithmic2:false,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:true,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,complementaryBar:false,complementaryBarFullHeight:false,complementaryColor:"rgba(100,100,100,0.3)",complementaryStrokeColor:"rgba(100,100,100,0.1)",pointDot:true,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,extrapolateMissingData:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,bezierCurve:true,linkType:0,bezierCurveTension:0.4,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",pointHitDetectionRadius:10};if(isIE()<9&&isIE()!=false)chart.Bar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.Bar.defaults);chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults);chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults);chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions);chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var config=(options)?mergeChartConfig(chart.Bar.defaults,options):chart.Bar.defaults;config=addAnimationEasing(config);return new Bar(data,config,context);};this.HorizontalBar=function(data,options){chart.HorizontalBar.defaults={annotateBarMinimumDetectionHeight:0,highLightSet:{pointDotRadius:15,barStrokeWidth:5,pointDot:true},inGraphDataShow:false,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,logarithmic:false,scaleOverlay:false,scaleOverride:false,scaleOverride2:false,forceSecondScale:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:true,scaleShowLabels2:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:true,rotateLabels:"smart",rotateTLabels:"smart",barShowStroke:true,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,complementaryBar:false,complementaryColor:"rgba(100,100,100,0.3)",complementaryStrokeColor:"rgba(100,100,100,0.1)",animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:false};if(isIE()<9&&isIE()!=false)chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.IExplorer8,chart.HorizontalBar.defaults);chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults);chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults);chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions);chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var config=(options)?mergeChartConfig(chart.HorizontalBar.defaults,options):chart.HorizontalBar.defaults;config=addAnimationEasing(config);return new HorizontalBar(data,config,context);};chart.defaults={};chart.defaults.IExplorer8={annotateBackgroundColor:"black",annotateFontColor:"white"};chart.defaults.Line_and_Bubble={inGraphDataShow:false,highLightSet:{pointDotRadius:15,pointDot:true},inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",scaleOverlay:false,scaleOverride:false,scaleOverride2:false,forceSecondScale:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineStyle:"solid",scaleLineWidth:1,scaleShowLabels:true,scaleShowLabels2:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineStyle:"solid",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",rotateTLabels:"smart",logarithmic:false,logarithmic2:false,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:true,linkType:0,bezierCurveTension:0.4,pointDot:true,pointDotRadius:4,pointDotStrokeStyle:"solid",pointDotStrokeWidth:2,datasetStrokeStyle:"solid",datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:true,onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",pointHitDetectionRadius:10};chart.defaults.commonOptions={addListener:true,saveBackImage:false,generateConvertedData:false,displayData:true,showZeroValue:true,chartTextScale:1,chartLineScale:1,chartSpaceScale:1,multiGraph:false,forceGraphMin:true,forceGraphMax:true,forceGraphMin2:true,forceGraphMax2:true,forceScale:"none",forceScale2:"none",clearRect:true,dynamicDisplay:false,dynamicDisplayXPartOfChart:0.5,dynamicDisplayYPartOfChart:0.5,animationForceSetTimeOut:false,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:false,canvasBackgroundColor:"none",canvasBordersRadius:0,canvasBordersSelection:15,canvasBordersWidth:3,canvasBordersStyle:"solid",canvasBordersColor:"black",zeroValue:1e-10,graphTitle:"",graphTitleAlign:"center",graphTitleShift:10,graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphTitleBorders:false,graphTitleBordersRadius:0,graphTitleBordersColor:"black",graphTitleBordersXSpace:3,graphTitleBordersYSpace:3,graphTitleBordersSelection:15,graphTitleBordersWidth:1,graphTitleBordersStyle:"solid",graphTitleBackgroundColor:"none",graphSubTitle:"",graphSubTitleAlign:"center",graphSubTitleShift:10,graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,graphSubTitleBorders:false,graphSubTitleBordersColor:"black",graphSubTitleBordersRadius:0,graphSubTitleBordersXSpace:3,graphSubTitleBordersYSpace:3,graphSubTitleBordersSelection:15,graphSubTitleBordersWidth:1,graphSubTitleBordersStyle:"solid",graphSubTitleBackgroundColor:"none",footNote:"",footNoteAlign:"center",footNoteShift:10,footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,footNoteBorders:false,footNoteBordersColor:"black",footNoteBordersRadius:0,footNoteBordersXSpace:3,footNoteBordersYSpace:3,footNoteBordersSelection:15,footNoteBordersWidth:1,footNoteBordersStyle:"solid",footNoteBackgroundColor:"none",legend:false,legendWhenToDraw:"all",legendDrawEmptyData:true,showSingleLegend:false,maxLegendCols:999,maxLegendLines:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBlockRadius:0,legendBorders:true,legendBordersStyle:"solid",legendBordersWidth:1,legendBordersSelection:15,legendBordersColors:"#666",legendBordersRadius:0,legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,inGraphDataBorders:false,inGraphDataBordersRadius:0,inGraphDataBordersColor:"black",inGraphDataBordersXSpace:3,inGraphDataBordersYSpace:3,inGraphDataBordersSelection:15,inGraphDataBordersWidth:1,inGraphDataBordersStyle:"solid",inGraphDataBackgroundColor:"none",annotateDisplay:false,annotateRelocate:false,savePng:false,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",annotateFunctionIn:null,annotateFunctionOut:null,detectMouseOnText:false,crossText:[""],crossTextIter:["all"],crossTextOverlay:[true],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossTextBorders:[false],crossTextBordersColor:["black"],crossTextBordersRadius:[0],crossTextBordersXSpace:[3],crossTextBordersYSpace:[3],crossTextBordersSelection:[15],crossTextBordersWidth:[1],crossTextBordersStyle:["solid"],crossTextBackgroundColor:["none"],crossImage:[undefined],crossImageIter:["all"],crossImageOverlay:[true],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",currency:"\u20AC",currencyPosition:"after",roundNumber:"none",roundPct:-1,templatesOpenTag:"<%=",templatesCloseTag:"%>",fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV6T:"none",fmtV7:"none",fmtV8:"none",fmtV8T:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtV14:"none",fmtV15:"none",fmtXLabel:"none",fmtTopXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",fmtVbubble:"none",animationYAxis:[1,0,1],animationRadius:[1,0,1],animationRotate:[1,0,1],animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:false,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:false,animationByDataset:false,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",defaultLineWidth:2,graphMaximized:false,contextMenu:true,mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseDblClick:null,mouseWheel:null,highLight:false,highLightMouseFunction:"mousemove",highLightFullLine:false,highLightRerunEndFunction:false,savePngName:"canvas",responsive:false,responsiveMinWidth:0,responsiveMinHeight:0,responsiveMaxWidth:9999999,responsiveMaxHeight:9999999,maintainAspectRatio:true,forcedAspectRadio:0,responsiveScaleContent:false,responsiveWindowInitialWidth:false,markerShape:"circle",barStrokeWidth:2,initFunction:null,beforeLabelsFunction:null,afterLabelsFunction:null,beforeDrawFunction:null,endDrawDataFunction:null,endDrawScaleFunction:null};chart.defaults.PolarAreaV1={highLightSet:{color:"red"},inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>"};chart.defaults.PolarAreaV2={highLightSet:{fillColor:"red"},inGraphDataTmpl:"<%=(data.labels.length == 1 ? (v1 == '' ? '' : v1+':') + v3 + ' (' + v6 + ' %)' : (i==0 ? v2 : '') )%>",annotateLabel:"<%=(v2 == '' ? '' : v2) + (v2!='' && v1 !='' ? ' - ' : '')+(v1 == '' ? '' : v1)+(v2!='' || v1 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"};chart.defaults.PolarArea={angleShowLineOut:false,inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:true,scaleOverride:false,scaleOverride2:false,forceSecondScale:false,scaleGridLinesStep:1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleLineStyle:"solid",scaleShowLabels:true,scaleShowLabels2:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,animation:true,animationByData:"ByArc",animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,startAngle:90,totalAmplitude:360,radiusScale:1};chart.defaults.PieAndDoughnutV1={inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>"};chart.defaults.PieAndDoughnutV2={inGraphDataTmpl:"<%=(data.labels.length == 1 ? (v1 == '' ? '' : v1+':') + v3 + ' (' + v6 + ' %)' : (i==0 ? v2 : '') )%>",annotateLabel:"<%=(v2 == '' ? '' : v2) + (v2!='' && v1 !='' ? ' - ' : '')+(v1 == '' ? '' : v1)+(v2!='' || v1 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"};chart.defaults.PieAndDoughnut={highLightSet:{expandOutRadius:0.1,expandInRadius:-0.1},inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeStyle:"solid",segmentStrokeWidth:2,percentageInnerCutout:50,animation:true,animationByData:false,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,alwaysRunFunctionAtCompletion:false,startAngle:90,totalAmplitude:360,radiusScale:1,radiusDataWeight:1,radiusSpaceWeight:0.3};chart.defaults.xyAxisCommonOptions={maxBarWidth:-1,drawXScaleLine:[{position:"bottom"}],yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:true,yAxisRight:false,xAxisBottom:true,xAxisTop:false,xAxisSpaceBetweenLabels:5,fullWidthGraph:false,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontSize2:0,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisFontColor2:"",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,yAxisLabelBorders:false,yAxisLabelBordersColor:"black",yAxisLabelBordersRadius:0,yAxisLabelBordersXSpace:3,yAxisLabelBordersYSpace:3,yAxisLabelBordersSelection:15,yAxisLabelBordersWidth:1,yAxisLabelBordersStyle:"solid",yAxisLabelBackgroundColor:"none",xAxisLabel:"",xAxisLabel2:"",xTAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,xAxisLabelBorders:false,xAxisLabelBordersColor:"black",xAxisLabelBordersRadius:0,xAxisLabelBordersXSpace:3,xAxisLabelBordersYSpace:3,xAxisLabelBordersSelection:15,xAxisLabelBordersWidth:1,xAxisLabelBordersStyle:"solid",xAxisLabelBackgroundColor:"none",showXLabels:1,firstLabelToShow:1,showYLabels:1,firstYLabelToShow:1,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5,yAxisUnitBorders:false,yAxisUnitBordersColor:"black",yAxisUnitBordersradius:0,yAxisUnitBordersXSpace:3,yAxisUnitBordersYSpace:3,yAxisUnitBordersSelection:15,yAxisUnitBordersWidth:1,yAxisUnitBordersStyle:"solid",yAxisUnitBackgroundColor:"none",scaleMinorTickWidth:1,scaleMinorTickColor:"rgba(0,0,0,.05)",scaleMinorTickStyle:"solid",scaleMinorTickSizeTop:3,scaleMinorTickSizeBottom:3,scaleMinorTickSizeRight:3,scaleMinorTickSizeLeft:3,scaleMinorTickHorizontalCount:0,scaleMinorTickVerticalCount:0,scaleMinorTickVerticalLines:true,scaleMinorTickHorizontalLines:true,tickColor:"gridLine",minorTickColor:"gridLine",xAxisMiddle:false,yAxisMiddle:false};var clear=function(c){c.clearRect(0,0,width,height);};function init_and_start(ctx,data,config){var i;if(typeof ctx.initialSize=="undefined")resizeCtxFunction(0,ctx,data,config);if(typeof ctx.firstPass=="undefined"){ctx.firstPass=0;if(config.responsive&&!config.multiGraph)addResponsiveChart(ctx.ChartNewId,ctx,data,config);if(typeof data.labels=="undefined")data.labels=[];if(data.labels.length==0){var mxlgt=0;for(i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);for(i=0;i<mxlgt;i++)data.labels[i]="";}}if(typeof ctx.ChartNewId=="undefined"){ctx.runanimationcompletefunction=true;var cvdate=new Date();var cvmillsec=cvdate.getTime();ctx.ChartNewId=ctx.tpchart+"_"+cvmillsec;ctx._eventListeners={};}if(!dynamicFunction(data,config,ctx))return false;if(!config.multiGraph&&ctx.firstPass!=0)clearAnnotate(ctx.ChartNewId);if(typeof jsGraphAnnotate[ctx.ChartNewId]=="undefined"){jsGraphAnnotate[ctx.ChartNewId]=new Array();jsTextMousePos[ctx.ChartNewId]=new Array();}for(i=0;i<data.datasets.length;i++)if(typeof data.datasets[i].title=="undefined"&&typeof data.datasets[i].label!="undefined")data.datasets[i].title=data.datasets[i].label;defMouse(ctx,data,config);if(ctx.firstPass==0)if(config.animation)ctx.firstPass=1;else ctx.firstPass=2;setRect(ctx,config);return true;}function init_result(ctx,data,statData){var i,j;var total_data=0;var total_non_missing_data=0;for(i=0;i<data.datasets.length;i++)if(typeof data.datasets[i].xPos!=="undefined"&&ctx.tpchart=="Line"){total_data+=data.datasets[i].xPos.length;for(j=0;j<data.datasets[i].xPos.length;j++)total_non_missing_data+=(!(typeof (data.datasets[i].xPos[j])=="undefined"));}else{total_data+=data.labels.length;for(j=0;j<data.datasets[i].data.length;j++){if(((ctx.tpchart=="Pie"||ctx.tpchart=="Doughnut")&&1*data.datasets[i].data[j]<=0)||((ctx.tpchart=="StackedBar"||ctx.tpchart=="HorizontalStackedBar")&&Math.abs(1*data.datasets[i].data[j])<=0.001)||typeof data.datasets[i].data[j]=="undefined")continue;total_non_missing_data++;}}ctx.pieces_drawn={total_data,total_non_missing_data,total_missing_data:(total_data-total_non_missing_data),all_drawn:false,completed:false,total_drawn:0,points:0,rectangles:0,slices:0};}function close_result(ctx){ctx.pieces_drawn.completed=true;if(ctx.pieces_drawn.total_non_missing_data==ctx.pieces_drawn.total_drawn)ctx.pieces_drawn.all_drawn=true;}var MPolarArea=function(data,config,ctx){var maxSize,scaleHop,labelHeight,scaleHeight,labelTemplateString,msr,midPosX,midPosY;ctx.tpchart="PolarArea";ctx.tpchartSub="PolarArea";ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);var realCumulativeAngle=(((config.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);var realAmplitude=(((config.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(realAmplitude<=config.zeroValue)realAmplitude=2*Math.PI;var debAngle=((realCumulativeAngle-realAmplitude)+4*Math.PI)%(2*Math.PI);var finAngle=debAngle+realAmplitude;var scaleData=computeScale(false,false,false,false,false,false,data,config,ctx,statData,0);scaleData.labels1=[];populateLabels(scaleData.logarithm1,config.fmtYLabel,config,scaleData.labelTemplateString1,scaleData.labels1,scaleData.nbOfStepsAxis1,scaleData.minAxis1,scaleData.maxAxis1,scaleData.stepWidthAxis1);msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,scaleData.labels1,null,true,false,false,true,"PolarArea");var outerVal=scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1;var drwSize=calculatePieDrawingSize(ctx,msr,config,data,statData);midPosX=drwSize.midPieX;midPosY=drwSize.midPieY;scaleHop=Math.floor(drwSize.radius/scaleData.nbOfStepsAxis1);var calculatedScale={steps:scaleData.nbOfStepsAxis1,stepValue:scaleData.stepWidthAxis1,graphMin:scaleData.minAxis1,graphMax:scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1,labels:scaleData.labels1};ext_radius=scaleHop*scaleData.nbOfStepsAxis1;if(scaleHop>0){initPassVariableData_part2(statData,data,config,ctx,scaleData.logarithm1,scaleData.logarithm2,{midPosX,midPosY,int_radius:0,ext_radius:scaleHop*scaleData.nbOfStepsAxis1,calculatedScale,scaleHop,outerVal});animationLoop(config,msr.legendMsr,drawScale,drawAllSegments,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,midPosX,midPosY,midPosX-((Min([msr.availableHeight,msr.availableWidth])/2)-5),midPosY+((Min([msr.availableHeight,msr.availableWidth])/2)-5),data,statData);}else{testRedraw(ctx,data,config);if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,0,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}function drawAllSegments(animationDecimal){var fixAngle=0;var correctedAnimationDecimal;var firstAngle=statData[0][0].firstAngle;if(1*config.animationStartWithData>1&&1*config.animationStartWithData-1<data.length){fixAngle=(statData[config.animationStartWithData-1].startAngle-statData[0][0].firstAngle);firstAngle=statData[config.animationStartWithData-1].startAngle;}prevAngle=statData[0][0].firstAngle;for(var j=0;j<data.labels.length;j++){var scaleAnimation=1,rotateAnimation=1;for(var i=0;i<data.datasets.length;i++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"MPOLARAREA");if(config.animation){if(config.animateScale)scaleAnimation=correctedAnimationDecimal.radius;if(config.animateRotate)rotateAnimation=correctedAnimationDecimal.rotate;}if(!(typeof (data.datasets[i].data[j])=="undefined")){ctx.beginPath();if(config.animationByData=="ByArc"){endAngle=statData[i][j].startAngle+rotateAnimation*statData[i][j].segmentAngle;ctx.arc(midPosX,midPosY,scaleAnimation*statData[i][j].radiusOffset,statData[i][j].startAngle,endAngle,false);}else if(config.animationByData)if(i<1*config.animationStartWithData-1)ctx.arc(midPieX,midPieY,scaleAnimation*statData[i][j].radiusOffset,statData[i][j].startAngle,statData[i][j].endAngle,false);else if(statData[i][j].startAngle<=firstAngle+rotateAnimation*(2*Math.PI-fixAngle)){endAngle=statData[i][j].endAngle;if(statData[i][j].endAngle>firstAngle+rotateAnimation*(2*Math.PI-fixAngle))endAngle=firstAngle+rotateAnimation*(2*Math.PI-fixAngle);ctx.arc(midPieX,midPieY,scaleAnimation*statData[i][j].radiusOffset,statData[i][j].startAngle,endAngle,false);}else continue;else{ctx.arc(midPieX,midPieY,scaleAnimation*statData[i][j].radiusOffset,prevAngle,prevAngle+rotateAnimation*(statData[i][j].endAngle-statData[i][j].startAngle),false);prevAngle=prevAngle+rotateAnimation*(statData[i][j].endAngle-statData[i][j].startAngle);}ctx.lineTo(midPosX,midPosY);ctx.closePath();if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.slices++;ctx.pieces_drawn.total_drawn++;}ctx.fillStyle=setOptionValue(true,true,1,"FILLCOLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});ctx.fill();if(config.segmentShowStroke=="merge"){ctx.lineWidth=0;ctx.strokeStyle=setOptionValue(true,true,1,"FILLCOLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});ctx.setLineDash([]);ctx.stroke();}else{if(config.segmentShowStroke){ctx.strokeStyle=config.segmentStrokeColor;ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.segmentStrokeWidth);ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"SEGMENTSTROKESTYLE",ctx,data,statData,data.datasets[i].segmentStrokeStyle,config.segmentStrokeStyle,"segmentStrokeStyle",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation})));ctx.stroke();ctx.setLineDash([]);}}}}}if(animationDecimal.animationGlobal>=config.animationStopValue)for(i=0;i<data.datasets.length;i++)for(j=0;j<data.labels.length;j++){if(typeof (data.datasets[i].data[j])=="undefined")continue;jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["MARC",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){if(setOptionValue(true,true,1,"INGRAPHDATAANGLEPOSITION",ctx,data,statData,undefined,config.inGraphDataAnglePosition,"inGraphDataAnglePosition",i,j,{nullValue:true})==1)posAngle=statData[i][j].realStartAngle+setOptionValue(true,true,1,"INGRAPHDATAPADDINANGLE",ctx,data,statData,undefined,config.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",i,j,{nullValue:true})*(Math.PI/180);else if(setOptionValue(true,true,1,"INGRAPHDATAANGLEPOSITION",ctx,data,statData,undefined,config.inGraphDataAnglePosition,"inGraphDataAnglePosition",i,j,{nullValue:true})==2)posAngle=(2*statData[i][j].realStartAngle-statData[i][j].segmentAngle)/2+setOptionValue(true,true,1,"INGRAPHDATAPADDINANGLE",ctx,data,statData,undefined,config.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",i,j,{nullValue:true})*(Math.PI/180);else{if(setOptionValue(true,true,1,"INGRAPHDATAANGLEPOSITION",ctx,data,statData,undefined,config.inGraphDataAnglePosition,"inGraphDataAnglePosition",i,j,{nullValue:true})==3)posAngle=statData[i][j].realStartAngle-statData[i][j].segmentAngle+setOptionValue(true,true,1,"INGRAPHDATAPADDINANGLE",ctx,data,statData,undefined,config.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",i,j,{nullValue:true})*(Math.PI/180);}if(setOptionValue(true,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==1)labelRadius=0+setOptionValue(true,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==2)labelRadius=statData[i][j].radiusOffset/2+setOptionValue(true,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==3)labelRadius=statData[i][j].radiusOffset+setOptionValue(true,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==4)labelRadius=scaleHop*scaleData.nbOfStepsAxis1+setOptionValue(true,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});}ctx.save();if(setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true})=="off-center")if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2)ctx.textAlign="left";else ctx.textAlign="right";else if(setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true})=="to-center")if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2)ctx.textAlign="right";else ctx.textAlign="left";else ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});if(setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true})=="off-center")if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)ctx.textBaseline="top";else ctx.textBaseline="bottom";else if(setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true})=="to-center")if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)ctx.textBaseline="bottom";else ctx.textBaseline="top";else ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});var dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);ctx.translate(midPosX+labelRadius*Math.cos(posAngle),midPosY-labelRadius*Math.sin(posAngle));var rotateVal=0;if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis")rotateVal=2*Math.PI-posAngle;else if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxisRotateLabels")if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)rotateVal=3*Math.PI-posAngle;else rotateVal=2*Math.PI-posAngle;else rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,midPosX+labelRadius*Math.cos(posAngle),midPosY-labelRadius*Math.sin(posAngle),i,j);ctx.restore();}}}function drawScale(){for(var i=0;i<scaleData.nbOfStepsAxis1;i++){if(config.scaleShowLine&&(i+1)%config.scaleGridLinesStep==0){ctx.beginPath();ctx.arc(midPosX,midPosY,scaleHop*(i+1),4*Math.PI-debAngle,4*Math.PI-finAngle,true);ctx.strokeStyle=config.scaleLineColor;ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth);ctx.setLineDash(lineStyleFn(config.scaleLineStyle));ctx.stroke();ctx.setLineDash([]);}if(config.scaleShowLabels){if(Math.abs(config.totalAmplitude-360)<config.zeroValue)scaleAngle=Math.PI/2;else scaleAngle=(debAngle+finAngle)/2;ctx.textAlign="center";ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;var label=scaleData.labels1[i+1];if(config.scaleShowLabelBackdrop){var textWidth=ctx.measureTextMultiLine(label,Math.ceil(ctx.chartTextScale*config.scaleFontSize));ctx.fillStyle=config.scaleBackdropColor;ctx.beginPath();ctx.rect(Math.round(midPosX+Math.cos(scaleAngle)*(scaleHop*(i+1))-textWidth/2-Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingX)),Math.round(midPosY-Math.sin(scaleAngle)*(scaleHop*(i+1))-(Math.ceil(ctx.chartTextScale*config.scaleFontSize))*0.5-Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingY)),Math.round(textWidth+(Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingX)*2)),Math.round((Math.ceil(ctx.chartTextScale*config.scaleFontSize))+(Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingY)*2)));ctx.fill();}ctx.textBaseline="middle";ctx.fillStyle=config.scaleFontColor;ctx.fillTextMultiLine(label,midPosX+Math.cos(scaleAngle)*(scaleHop*(i+1)),midPosY-Math.sin(scaleAngle)*(scaleHop*(i+1)),ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"SCALE_TEXTMOUSE",0,0,0,i,-1);}}if(config.angleShowLineOut==true){ctx.beginPath();ctx.strokeStyle=config.scaleLineColor;ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth);ctx.setLineDash(lineStyleFn(config.scaleLineStyle));ctx.stroke();firstdone=false;for(j=0;j<data.labels.length;j++)for(i=0;i<data.datasets.length;i++)if(!(typeof (data.datasets[i].data[j])=="undefined")){if(firstdone==false){ctx.beginPath();ctx.moveTo(midPosX,midPosY);ctx.lineTo(midPosX+ext_radius*Math.cos(2*Math.PI-statData[i][j].startAngle),midPosY-ext_radius*Math.sin(2*Math.PI-statData[i][j].startAngle));ctx.stroke();firstdone=true;}ctx.beginPath();ctx.moveTo(midPosX,midPosY);ctx.lineTo(midPosX+ext_radius*Math.cos(2*Math.PI-(statData[i][j].startAngle+statData[i][j].segmentAngle)),midPosY-ext_radius*Math.sin(2*Math.PI-(statData[i][j].startAngle+statData[i][j].segmentAngle)));ctx.stroke();}ctx.setLineDash([]);}}return {data,config,ctx};};var PolarArea=function(data,config,ctx){if(typeof data.length!="undefined")return (MPolarArea(convertData(data,config.generateConvertedData),config,ctx));else return (MPolarArea(data,config,ctx));};var Radar=function(data,config,ctx){var maxSize,scaleHop,labelHeight,scaleHeight,labelTemplateString,msr,midPosX,midPosY;ctx.tpchart="Radar";ctx.tpchartSub="Radar";ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);if(!data.labels)data.labels=[];var scaleData=computeScale(false,false,false,false,false,false,data,config,ctx,statData,0);scaleData.labels1=[];populateLabels(scaleData.logarithm1,config.fmtYLabel,config,scaleData.labelTemplateString1,scaleData.labels1,scaleData.nbOfStepsAxis1,scaleData.minAxis1,scaleData.maxAxis1,scaleData.stepWidthAxis1);var calculatedScale={steps:scaleData.nbOfStepsAxis1,stepValue:scaleData.stepWidthAxis1,graphMin:scaleData.minAxis1,graphMax:scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1,labels:scaleData.labels1};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,scaleData.labels1,null,true,false,false,config.datasetFill,"Radar");calculateDrawingSizes();midPosY=msr.topNotUsableHeight+(msr.availableHeight/2);scaleHop=maxSize/(scaleData.nbOfStepsAxis1);initPassVariableData_part2(statData,data,config,ctx,scaleData.logarithm1,scaleData.logarithm2,{midPosX,midPosY,calculatedScale,scaleHop,maxSize,outerVal:-1});animationLoop(config,msr.legendMsr,drawScale,drawAllDataPoints,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,midPosX,midPosY,midPosX-maxSize,midPosY+maxSize,data,statData);function drawAllDataPoints(animationDecimal){var correctedAnimationDecimal;var rotationDegree=(2*Math.PI)/data.datasets[0].data.length;ctx.save();for(var i=0;i<data.datasets.length;i++){var fPt=-1;for(var j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"RADAR");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;var currentAnimPc=correctedAnimationDecimal.yAxis;if(currentAnimPc>1)currentAnimPc=currentAnimPc-1;if(!(typeof (data.datasets[i].data[j])=="undefined")){if(fPt==-1){ctx.beginPath();ctx.moveTo(midPosX+currentAnimPc*statData[i][j].offsetX,midPosY-currentAnimPc*statData[i][j].offsetY);fPt=j;}else ctx.lineTo(midPosX+currentAnimPc*statData[i][j].offsetX,midPosY-currentAnimPc*statData[i][j].offsetY);if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.points++;ctx.pieces_drawn.total_drawn++;}}}ctx.closePath();if(config.datasetFill)ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,-1,{animationValue:currentAnimPc,midPosX:statData[i][0].midPosX,midPosY:statData[i][0].midPosY,ext_radius:(config.animationLeftToRight?1:currentAnimPc)*(statData[i][0].calculated_offset_max)});else ctx.fillStyle="rgba(0,0,0,0)";ctx.strokeStyle=setOptionValue(true,true,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,-1,{nullvalue:null});ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"LINEWIDTH",ctx,data,statData,data.datasets[i].datasetStrokeWidth,config.datasetStrokeWidth,"datasetStrokeWidth",i,-1,{nullvalue:null}));ctx.fill();ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.beginPath();for(var k=0;k<data.datasets[i].data.length;k++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,k,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",k,-1,{nullvalue:null})==false)continue;if(!(typeof (data.datasets[i].data[k])=="undefined"))if(setOptionValue(true,true,1,"POINTDOT",ctx,data,statData,undefined,config.pointDot,"pointDot",i,k,{nullvalue:null})){ctx.beginPath();ctx.fillStyle=setOptionValue(true,true,1,"MARKERFILLCOLOR",ctx,data,statData,data.datasets[i].pointColor,config.defaultStrokeColor,"pointColor",i,k,{nullvalue:true});ctx.strokeStyle=setOptionValue(true,true,1,"MARKERSTROKESTYLE",ctx,data,statData,data.datasets[i].pointStrokeColor,config.defaultStrokeColor,"pointStrokeColor",i,k,{nullvalue:true});ctx.lineWidth=setOptionValue(true,true,ctx.chartLineScale,"MARKERLINEWIDTH",ctx,data,statData,data.datasets[i].pointDotStrokeWidth,config.pointDotStrokeWidth,"pointDotStrokeWidth",i,k,{nullvalue:true});var markerShape=setOptionValue(true,true,1,"MARKERSHAPE",ctx,data,statData,data.datasets[i].markerShape,config.markerShape,"markerShape",i,k,{nullvalue:true});var markerRadius=setOptionValue(true,true,ctx.chartSpaceScale,"MARKERRADIUS",ctx,data,statData,data.datasets[i].pointDotRadius,config.pointDotRadius,"pointDotRadius",i,k,{nullvalue:true});var markerStrokeStyle=setOptionValue(true,true,1,"MARKERSTROKESTYLE",ctx,data,statData,data.datasets[i].pointDotStrokeStyle,config.pointDotStrokeStyle,"pointDotStrokeStyle",i,k,{nullvalue:true});drawMarker(ctx,midPosX+currentAnimPc*statData[i][k].offsetX,midPosY-currentAnimPc*statData[i][k].offsetY,markerShape,markerRadius,markerStrokeStyle);}}}}ctx.restore();if(animationDecimal.animationGlobal>=config.animationStopValue)for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if(typeof (data.datasets[i].data[j])=="undefined")continue;jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["POINT",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){ctx.save();ctx.beginPath();ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});if(setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true})=="off-center")if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis"||(config.startAngle*Math.PI/180-j*rotationDegree+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(config.startAngle*Math.PI/180-j*rotationDegree+4*Math.PI)%(2*Math.PI)<=Math.PI/2)ctx.textAlign="left";else ctx.textAlign="right";else if(setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true})=="to-center")if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis"||(config.startAngle*Math.PI/180-j*rotationDegree+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(config.startAngle*Math.PI/180-j*rotationDegree+4*Math.PI)%(2*Math.PI)<Math.PI/2)ctx.textAlign="right";else ctx.textAlign="left";else ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});if(setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true})=="off-center")if((config.startAngle*Math.PI/180-j*rotationDegree+4*Math.PI)%(2*Math.PI)>Math.PI)ctx.textBaseline="bottom";else ctx.textBaseline="top";else if(setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true})=="to-center")if((config.startAngle*Math.PI/180-j*rotationDegree+4*Math.PI)%(2*Math.PI)>Math.PI)ctx.textBaseline="top";else ctx.textBaseline="bottom";else ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});var radiusPrt;if(setOptionValue(true,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==1)radiusPrt=0+setOptionValue(true,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==2)radiusPrt=(statData[i][j].calculated_offset)/2+setOptionValue(true,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==3)radiusPrt=(statData[i][j].calculated_offset)+setOptionValue(true,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});}var x_pos,y_pos;if(statData[i][j].calculated_offset>0){x_pos=midPosX+statData[i][j].offsetX*(radiusPrt/statData[i][j].calculated_offset);y_pos=midPosY-statData[i][j].offsetY*(radiusPrt/statData[i][j].calculated_offset);}else{x_pos=midPosX;y_pos=midPosY;}ctx.translate(x_pos,y_pos);var rotateVal=0;if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis")rotateVal=j*rotationDegree;else if(setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxisRotateLabels")if((j*rotationDegree+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(j*rotationDegree+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)rotateVal=3*Math.PI+j*rotationDegree;else rotateVal=2*Math.PI+j*rotationDegree;else rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);var dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,x_pos,y_pos,i,j);ctx.restore();}}}function drawScale(){var rotationDegree=(2*Math.PI)/data.datasets[0].data.length;ctx.save();ctx.translate(midPosX,midPosY);ctx.rotate((90-config.startAngle)*Math.PI/180);if(config.angleShowLineOut){ctx.strokeStyle=config.angleLineColor;ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.angleLineWidth);for(var h=0;h<data.datasets[0].data.length;h++){ctx.rotate(rotationDegree);ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(0,-maxSize);ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"ANGLELINESTYLE",ctx,data,statData,undefined,config.angleLineStyle,"angleLineStyle",h,-1,{nullValue:true})));ctx.stroke();ctx.setLineDash([]);}}for(var i=0;i<scaleData.nbOfStepsAxis1;i++){ctx.beginPath();if(config.scaleShowLine&&(i+1)%config.scaleGridLinesStep==0){ctx.strokeStyle=config.scaleLineColor;ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.scaleLineWidth);ctx.moveTo(0,-scaleHop*(i+1));for(var j=0;j<data.datasets[0].data.length;j++){ctx.rotate(rotationDegree);ctx.lineTo(0,-scaleHop*(i+1));}ctx.closePath();ctx.setLineDash(lineStyleFn(config.scaleLineStyle));ctx.stroke();ctx.setLineDash([]);}}ctx.rotate(-(90-config.startAngle)*Math.PI/180);if(config.scaleShowLabels)for(i=0;i<scaleData.nbOfStepsAxis1;i++){ctx.textAlign="center";ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;ctx.textBaseline="middle";if(config.scaleShowLabelBackdrop){var textWidth=ctx.measureTextMultiLine(scaleData.labels1[i+1],(Math.ceil(ctx.chartTextScale*config.scaleFontSize))).textWidth;ctx.fillStyle=config.scaleBackdropColor;ctx.beginPath();ctx.rect(Math.round(Math.cos(config.startAngle*Math.PI/180)*(scaleHop*(i+1))-textWidth/2-Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingX)),Math.round((-Math.sin(config.startAngle*Math.PI/180)*scaleHop*(i+1))-(Math.ceil(ctx.chartTextScale*config.scaleFontSize))*0.5-Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingY)),Math.round(textWidth+(Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingX)*2)),Math.round((Math.ceil(ctx.chartTextScale*config.scaleFontSize))+(Math.ceil(ctx.chartSpaceScale*config.scaleBackdropPaddingY)*2)));ctx.fill();}ctx.fillStyle=config.scaleFontColor;ctx.fillTextMultiLine(scaleData.labels1[i+1],Math.cos(config.startAngle*Math.PI/180)*(scaleHop*(i+1)),-Math.sin(config.startAngle*Math.PI/180)*scaleHop*(i+1),ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"SCALE_TEXTMOUSE",0,midPosX,midPosY,i,-1);}for(var k=0;k<data.labels.length;k++){ctx.font=config.pointLabelFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.pointLabelFontSize)).toString()+"px "+config.pointLabelFontFamily;ctx.fillStyle=config.pointLabelFontColor;var opposite=Math.sin((90-config.startAngle)*Math.PI/180+rotationDegree*k)*(maxSize+(Math.ceil(ctx.chartTextScale*config.pointLabelFontSize)));var adjacent=Math.cos((90-config.startAngle)*Math.PI/180+rotationDegree*k)*(maxSize+(Math.ceil(ctx.chartTextScale*config.pointLabelFontSize)));var vangle=(90-config.startAngle)*Math.PI/180+rotationDegree*k;while(vangle<0)vangle=vangle+2*Math.PI;while(vangle>2*Math.PI)vangle=vangle-2*Math.PI;if(vangle==Math.PI||vangle==0)ctx.textAlign="center";else if(vangle>Math.PI)ctx.textAlign="right";else ctx.textAlign="left";ctx.textBaseline="middle";ctx.fillTextMultiLine(data.labels[k],opposite,-adjacent,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.pointLabelFontSize)),true,config.detectMouseOnText,ctx,"LABEL_TEXTMOUSE",0,midPosX,midPosY,k,-1);}ctx.restore();}function calculateDrawingSizes(){var midX,mxlb,maxL,maxR,iter,nbiter,prevMaxSize,prevMidX,i,textMeasurement;var rotationDegree=(2*Math.PI)/data.datasets[0].data.length;var rotateAngle=config.startAngle*Math.PI/180;ctx.font=config.pointLabelFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.pointLabelFontSize)).toString()+"px "+config.pointLabelFontFamily;if(!config.graphMaximized){maxR=msr.availableWidth/2;maxL=msr.availableWidth/2;nbiter=1;}else{maxR=msr.availableWidth/2;maxL=msr.availableWidth/2;nbiter=40;for(i=0;i<data.labels.length;i++){textMeasurement=ctx.measureTextMultiLine(data.labels[i],(Math.ceil(ctx.chartTextScale*config.scaleFontSize))).textWidth+ctx.measureTextMultiLine(data.labels[i],(Math.ceil(ctx.chartTextScale*config.scaleFontSize))).textHeight;mxlb=(msr.availableWidth-textMeasurement)/(1+Math.abs(Math.cos(rotateAngle)));if((rotateAngle<Math.PI/2&&rotateAngle>-Math.PI/2)||rotateAngle>3*Math.PI/2){if(mxlb<maxR)maxR=mxlb;}else{if(Math.cos(rotateAngle)!=0)if(mxlb<maxL)maxL=mxlb;}rotateAngle-=rotationDegree;}}prevMaxSize=0;prevMidX=0;midPosX=maxR+msr.leftNotUsableWidth;for(midX=maxR,iter=0;iter<nbiter;++iter,midX+=(msr.availableWidth-maxL-maxR)/nbiter){maxSize=Max([midX,msr.availableWidth-midX]);rotateAngle=config.startAngle*Math.PI/180;mxlb=msr.available;for(i=0;i<data.labels.length;i++){textMeasurement=ctx.measureTextMultiLine(data.labels[i],(Math.ceil(ctx.chartTextScale*config.scaleFontSize))).textWidth+ctx.measureTextMultiLine(data.labels[i],(Math.ceil(ctx.chartTextScale*config.scaleFontSize))).textHeight;if((rotateAngle<Math.PI/2&&rotateAngle>-Math.PI/2)||rotateAngle>3*Math.PI/2)mxlb=((msr.availableWidth-midX)-textMeasurement)/Math.abs(Math.cos(rotateAngle));else{if(Math.cos(rotateAngle!=0))mxlb=(midX-textMeasurement)/Math.abs(Math.cos(rotateAngle));}if(mxlb<maxSize)maxSize=mxlb;if(Math.sin(rotateAngle)*msr.availableHeight/2>msr.availableHeight/2-(Math.ceil(ctx.chartTextScale*config.scaleFontSize))*2){mxlb=Math.sin(rotateAngle)*msr.availableHeight/2-1.5*(Math.ceil(ctx.chartTextScale*config.scaleFontSize));if(mxlb<maxSize)maxSize=mxlb;}rotateAngle-=rotationDegree;}if(maxSize>prevMaxSize){prevMaxSize=maxSize;midPosX=midX+msr.leftNotUsableWidth;}}maxSize=prevMaxSize-(Math.ceil(ctx.chartTextScale*config.scaleFontSize))/2;labelHeight=Default(labelHeight,5);}return {data,config,ctx};};var Pie=function(data,config,ctx){ctx.tpchart="Pie";ctx.tpchartSub="Pie";if(typeof data.length!="undefined")return (PieDoughnut(convertData(data,config.generateConvertedData),config,ctx,"Pie"));else return (PieDoughnut(data,config,ctx,"Pie"));};var Doughnut=function(data,config,ctx){ctx.tpchart="Doughnut";ctx.tpchartSub="Doughnut";if(typeof data.length!="undefined")return (PieDoughnut(convertData(data,config.generateConvertedData),config,ctx,"Doughnut"));else return (PieDoughnut(data,config,ctx,"Doughnut"));};var PieDoughnut=function(data,config,ctx,chartType){var msr,midPieX,midPieY,doughnutRadius,cutoutRadius;ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);var realCumulativeAngle=(((config.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"none","none",true,false,false,true,"Doughnut");var drwSize=calculatePieDrawingSize(ctx,msr,config,data,statData);midPieX=drwSize.midPieX;midPieY=drwSize.midPieY;doughnutRadius=drwSize.radius;if(chartType=="Pie")cutoutRadius=0;else cutoutRadius=doughnutRadius*(config.percentageInnerCutout/100);if(doughnutRadius>0){initPassVariableData_part2(statData,data,config,ctx,false,false,{midPosX:midPieX,midPosY:midPieY,int_radius:cutoutRadius,ext_radius:doughnutRadius,outerVal:-1});animationLoop(config,msr.legendMsr,null,drawPieSegments,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,midPieX,midPieY,midPieX-doughnutRadius,midPieY+doughnutRadius,data,statData);}else{testRedraw(ctx,data,config);if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,0,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}function drawPieSegments(animationDecimal){var dataCutoutRadius,dataDoughnutRadius;var rdataCutoutRadius,rdataDoughnutRadius;var correctedAnimationDecimal;var prevAngle,fixAngle,firstAngle,cumulativeAngle;prevAngle=[];fixAngle=[];firstAngle=[];cumulativeAngle=[];for(var i=0;i<data.datasets.length;i++){var scaleAnimation=1,rotateAnimation=1;for(j=0;j<data.labels.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"PIE");if(typeof prevAngle[j]=="undefined"&&typeof statData[i][j].firstAngle!="undefined"){prevAngle[j]=statData[i][j].firstAngle;fixAngle[j]=0;firstAngle[j]=statData[i][j].firstAngle;cumulativeAngle[j]=(((-config.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);}statData[i][j].inRadius=0;statData[i][j].outRadius=0;if(setOptionValue(false,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(false,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",-1,j,{nullvalue:null})==false)continue;if(typeof data.datasets[i].data[j]=="undefined"||1*data.datasets[i].data[j]<=0)continue;if(chartType=="Pie")dataCutoutRadius=cutoutRadius;else dataCutoutRadius=cutoutRadius;dataDoughnutRadius=doughnutRadius;rdataCutoutRadius=dataCutoutRadius+(dataDoughnutRadius-dataCutoutRadius)*statData[i][j].startRadius;rdataDoughnutRadius=dataCutoutRadius+(dataDoughnutRadius-dataCutoutRadius)*statData[i][j].stopRadius;dataCutoutRadius=rdataCutoutRadius;dataDoughnutRadius=rdataDoughnutRadius;if(chartType!="Pie"||j>0)rdataCutoutRadius=dataCutoutRadius-(dataDoughnutRadius-dataCutoutRadius)*setOptionValue(false,true,1,"EXPANDINRADIUS",ctx,data,statData,data.datasets[i].expandInRadius,0,"expandInRadius",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});rdataDoughnutRadius=dataDoughnutRadius+(dataDoughnutRadius-dataCutoutRadius)*setOptionValue(false,true,1,"EXPANDOUTRADIUS",ctx,data,statData,data.datasets[i].expandOutRadius,0,"expandOutRadius",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});dataCutoutRadius=rdataCutoutRadius;dataDoughnutRadius=rdataDoughnutRadius;statData[i][j].inRadius=dataCutoutRadius;statData[i][j].outRadius=dataDoughnutRadius;if(config.animation){if(config.animateScale)scaleAnimation=correctedAnimationDecimal.radius;if(config.animateRotate)rotateAnimation=correctedAnimationDecimal.rotate;}ctx.beginPath();ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.segmentStrokeWidth);ctx.strokeStyle="rgba(0,0,0,0)";if(config.animationByData=="ByArc"){endAngle=statData[i][j].startAngle+rotateAnimation*statData[i][j].segmentAngle;ctx.arc(midPieX,midPieY,scaleAnimation*dataDoughnutRadius,statData[i][j].startAngle,endAngle,false);ctx.arc(midPieX,midPieY,scaleAnimation*dataCutoutRadius,endAngle,statData[i][j].startAngle,true);}else if(config.animationByData)if(i<0){ctx.arc(midPieX,midPieY,scaleAnimation*dataDoughnutRadius,statData[i][j].startAngle,statData[i].endAngle,false);ctx.arc(midPieX,midPieY,scaleAnimation*dataCutoutRadius,statData[i][j].endAngle,statData[i][j].startAngle,true);}else if(statData[i][j].startAngle<=firstAngle[j]+rotateAnimation*(2*Math.PI-fixAngle[j])){endAngle=statData[i][j].endAngle;if(statData[i][j].endAngle>firstAngle[j]+rotateAnimation*(2*Math.PI-fixAngle[j]))endAngle=firstAngle[j]+rotateAnimation*(2*Math.PI-fixAngle[j]);ctx.arc(midPieX,midPieY,scaleAnimation*dataDoughnutRadius,statData[i][j].startAngle,endAngle,false);ctx.arc(midPieX,midPieY,scaleAnimation*dataCutoutRadius,endAngle,statData[i][j].startAngle,true);}else continue;else{ctx.arc(midPieX,midPieY,scaleAnimation*dataDoughnutRadius,prevAngle[j],prevAngle[j]+rotateAnimation*(statData[i][j].endAngle-statData[i][j].startAngle),false);ctx.arc(midPieX,midPieY,scaleAnimation*dataCutoutRadius,prevAngle[j]+rotateAnimation*(statData[i][j].endAngle-statData[i][j].startAngle),prevAngle[j],true);prevAngle[j]=prevAngle[j]+rotateAnimation*(statData[i][j].endAngle-statData[i][j].startAngle);}ctx.closePath();ctx.fillStyle=setOptionValue(false,true,1,"FILLCOLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});ctx.fill();if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.slices++;ctx.pieces_drawn.total_drawn++;}if(config.segmentShowStroke=="merge"){ctx.lineWidth=1.5;ctx.strokeStyle=setOptionValue(false,true,1,"FILLCOLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});ctx.setLineDash([]);ctx.stroke();}else{if(config.segmentShowStroke){ctx.lineWidth=Math.ceil(ctx.chartLineScale*config.segmentStrokeWidth);ctx.strokeStyle=config.segmentStrokeColor;ctx.setLineDash(lineStyleFn(setOptionValue(false,true,1,"SEGMENTSTROKESTYLE",ctx,data,statData,data.datasets[i].segmentStrokeStyle,config.segmentStrokeStyle,"segmentStrokeStyle",i,-1,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation})));ctx.stroke();ctx.setLineDash([]);}}}}if(animationDecimal.animationGlobal>=config.animationStopValue)for(var i=0;i<data.datasets.length;i++)for(j=0;j<data.labels.length;j++){if(setOptionValue(false,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(false,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",-1,j,{nullvalue:null})==false)continue;if(typeof data.datasets[i].data[j]=="undefined"||1*data.datasets[i].data[j]<=0)continue;if(chartType=="Pie")dataCutoutRadius=cutoutRadius;else dataCutoutRadius=cutoutRadius-(doughnutRadius-cutoutRadius)*setOptionValue(false,true,1,"EXPANDINRADIUS",ctx,data,statData,data.datasets[i].expandInRadius,0,"expandInRadius",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});dataDoughnutRadius=doughnutRadius+(doughnutRadius-cutoutRadius)*setOptionValue(false,true,1,"EXPANDOUTRADIUS",ctx,data,statData,data.datasets[i].expandOutRadius,0,"expandOutRadius",i,j,{animationDecimal:animationDecimal.animationGlobal,scaleAnimation});rdataCutoutRadius=dataCutoutRadius+(dataDoughnutRadius-dataCutoutRadius)*statData[i][j].startRadius;rdataDoughnutRadius=dataCutoutRadius+(dataDoughnutRadius-dataCutoutRadius)*statData[i][j].stopRadius;dataCutoutRadius=rdataCutoutRadius;dataDoughnutRadius=rdataDoughnutRadius;jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["MARC",i,j,statData,setOptionValue(false,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(false,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})&&statData[i][j].segmentAngle>=(Math.PI/180)*setOptionValue(false,true,1,"INGRAPHDATAMINIMUMANGLE",ctx,data,statData,undefined,config.inGraphDataMinimumAngle,"inGraphDataMinimumAngle",i,j,{nullValue:true})){if(setOptionValue(false,true,1,"INGRAPHDATAANGLEPOSITION",ctx,data,statData,undefined,config.inGraphDataAnglePosition,"inGraphDataAnglePosition",i,j,{nullValue:true})==1)posAngle=statData[i][j].realStartAngle+setOptionValue(false,true,1,"INGRAPHDATAPADDINANGLE",ctx,data,statData,undefined,config.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",i,j,{nullValue:true})*(Math.PI/180);else if(setOptionValue(false,true,1,"INGRAPHDATAANGLEPOSITION",ctx,data,statData,undefined,config.inGraphDataAnglePosition,"inGraphDataAnglePosition",i,j,{nullValue:true})==2)posAngle=statData[i][j].realStartAngle-statData[i][j].segmentAngle/2+setOptionValue(false,true,1,"INGRAPHDATAPADDINANGLE",ctx,data,statData,undefined,config.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",i,j,{nullValue:true})*(Math.PI/180);else{if(setOptionValue(false,true,1,"INGRAPHDATAANGLEPOSITION",ctx,data,statData,undefined,config.inGraphDataAnglePosition,"inGraphDataAnglePosition",i,j,{nullValue:true})==3)posAngle=statData[i][j].realStartAngle-statData[i][j].segmentAngle+setOptionValue(false,true,1,"INGRAPHDATAPADDINANGLE",ctx,data,statData,undefined,config.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",i,j,{nullValue:true})*(Math.PI/180);}if(setOptionValue(false,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==1)labelRadius=dataCutoutRadius+setOptionValue(false,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});else if(setOptionValue(false,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==2)labelRadius=dataCutoutRadius+(dataDoughnutRadius-dataCutoutRadius)/2+setOptionValue(false,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});else{if(setOptionValue(false,true,1,"INGRAPHDATARADIUSPOSITION",ctx,data,statData,undefined,config.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",i,j,{nullValue:true})==3)labelRadius=dataDoughnutRadius+setOptionValue(false,true,1,"INGRAPHDATAPADDINGRADIUS",ctx,data,statData,undefined,config.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",i,j,{nullValue:true});}ctx.save();if(setOptionValue(false,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true})=="off-center")if(setOptionValue(false,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2)ctx.textAlign="left";else ctx.textAlign="right";else if(setOptionValue(false,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true})=="to-center")if(setOptionValue(false,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>=3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<=Math.PI/2)ctx.textAlign="right";else ctx.textAlign="left";else ctx.textAlign=setOptionValue(false,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});if(setOptionValue(false,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true})=="off-center")if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)ctx.textBaseline="top";else ctx.textBaseline="bottom";else if(setOptionValue(false,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true})=="to-center")if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)ctx.textBaseline="bottom";else ctx.textBaseline="top";else ctx.textBaseline=setOptionValue(false,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(false,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(false,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(false,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(false,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});var dispString=tmplbis(setOptionValue(false,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);ctx.translate(midPieX+labelRadius*Math.cos(posAngle),midPieY-labelRadius*Math.sin(posAngle));var rotateVal=0;if(setOptionValue(false,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxis")rotateVal=2*Math.PI-posAngle;else if(setOptionValue(false,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})=="inRadiusAxisRotateLabels")if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)rotateVal=3*Math.PI-posAngle;else rotateVal=2*Math.PI-posAngle;else rotateVal=setOptionValue(false,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(false,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(false,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(false,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(false,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(false,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(false,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(false,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(false,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(false,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,midPieX+labelRadius*Math.cos(posAngle),midPieY-labelRadius*Math.sin(posAngle),i,j);ctx.restore();}}}return {data,config,ctx};};var Bubble=function(data,config,ctx){ctx.tpchart="Line";ctx.tpchartSub="Bubble";return (LineBubble(data,config,ctx,"Pie"));};var Line=function(data,config,ctx){ctx.tpchart="Line";ctx.tpchartSub="Line";return (LineBubble(data,config,ctx,"Pie"));};var LineBubble=function(data,config,ctx){var maxSize,scaleHop,scaleHop2,labelHeight,scaleHeight,labelTemplateString,labelTemplateString2;var valueHop,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr;var zeroY=0;var zeroY2=0;ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;var mxlgt=0;for(var i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(mxlgt==1){if(typeof (data.labels[0])=="string")data.labels=["",data.labels[0],""];for(i=0;i<data.datasets.length;i++)if(typeof (data.datasets[i].data[0]!="undefined"))data.datasets[i].data=[undefined,data.datasets[i].data[0],undefined];mxlgt=3;}var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);for(i=0;i<data.datasets.length;i++)if(ctx.tpchartSub=="Line"||data.datasets[i].type=="Line")statData[i][0].tpchart="Line";else statData[i][0].tpchart="Bubble";msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil","nihil",false,false,true,(ctx.tpchartSub=="Line"?config.datasetFill:true),"Line");var scaleData=computeScale(true,true,false,true,true,false,data,config,ctx,statData,msr.availableHeight);scaleData.labels1=[];scaleData.labels2=[];populateLabels(scaleData.logarithm1,config.fmtYLabel,config,scaleData.labelTemplateString1,scaleData.labels1,scaleData.nbOfStepsAxis1,scaleData.minAxis1,scaleData.maxAxis1,scaleData.stepWidthAxis1);populateLabels(scaleData.logarithm2,config.fmtYLabel2,config,scaleData.labelTemplateString2,scaleData.labels2,scaleData.nbOfStepsAxis2,scaleData.minAxis2,scaleData.maxAxis2,scaleData.stepWidthAxis2);if(scaleData.maxSteps>0&&scaleData.minSteps>0){var calculatedScale={steps:scaleData.nbOfStepsAxis1,stepValue:scaleData.stepWidthAxis1,graphMin:scaleData.minAxis1,graphMax:scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1,labels:scaleData.labels1};var calculatedScale2={steps:scaleData.nbOfStepsAxis2,stepValue:scaleData.stepWidthAxis2,graphMin:scaleData.minAxis2,graphMax:scaleData.minAxis2+scaleData.nbOfStepsAxis2*scaleData.stepWidthAxis2,labels:scaleData.labels2};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,scaleData.labels1,scaleData.labels2,false,false,true,(ctx.tpchartSub=="Line"?config.datasetFill:true),"Line");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeBottom,config.scaleMinorTickSizeBottom*(config.scaleMinorTickHorizontalCount>0)))-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeTop,config.scaleMinorTickSizeTop*(config.scaleMinorTickHorizontalCount>0)));msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeLeft,config.scaleMinorTickSizeLeft*(config.scaleMinorTickVerticalCount>0)))-Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeRight,config.scaleMinorTickSizeRight*(config.scaleMinorTickVerticalCount>0)));scaleHop=Math.floor(msr.availableHeight/scaleData.nbOfStepsAxis1);scaleHop2=Math.floor(msr.availableHeight/scaleData.nbOfStepsAxis2);valueHop=Math.floor(msr.availableWidth/(data.labels.length-1));if(valueHop==0||config.fullWidthGraph)valueHop=(msr.availableWidth/(data.labels.length-1));msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop);msr.topNotUsableHeight+=(msr.availableHeight-(scaleData.nbOfStepsAxis1)*scaleHop);msr.rightNotUsableWidth+=(msr.availableWidth-(data.labels.length-1)*valueHop);msr.availableWidth=(data.labels.length-1)*valueHop;msr.availableHeight=(scaleData.nbOfStepsAxis1)*scaleHop;yAxisPosX=msr.leftNotUsableWidth+Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeLeft,config.scaleMinorTickSizeLeft*(config.scaleMinorTickVerticalCount>0)));xAxisPosY=msr.topNotUsableHeight+msr.availableHeight+Math.ceil(ctx.chartLineScale*Math.max(config.scaleTickSizeTop,config.scaleMinorTickSizeTop*(config.scaleMinorTickHorizontalCount>0)));zeroY=calculateOffset(scaleData.logarithm1,0,calculatedScale,scaleHop);zeroY2=calculateOffset(scaleData.logarithm2,0,calculatedScale2,scaleHop2);initPassVariableData_part2(statData,data,config,ctx,scaleData.logarithm1,scaleData.logarithm2,{graphMin:calculatedScale.graphMin,graphMax:calculatedScale.graphMax,graphMin2:calculatedScale2.graphMin,graphMax2:calculatedScale2.graphMax,xAxisPosY,yAxisPosX,valueHop,nbValueHop:data.labels.length-1,scaleHop,zeroY,calculatedScale,logarithmic:scaleData.logarithm1,scaleHop2,zeroY2,msr,calculatedScale2,logarithmic2:scaleData.logarithm12});if(typeof config.beforeLabelsFunction=="function")config.beforeLabelsFunction("BEFORELABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});drawLabels();if(typeof config.afterLabelsFunction=="function")config.afterLabelsFunction("AFTERLABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});animationLoop(config,msr.legendMsr,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData);}else{testRedraw(ctx,data,config);if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,0,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}function drawLines(animationDecimal){switch(ctx.tpchartSub){case "Bubble":drawBubblesDataset(animationDecimal,data,config,ctx,statData,{xAxisPosY,yAxisPosX,valueHop,nbValueHop:data.labels.length-1});drawLinesDataset(animationDecimal,data,config,ctx,statData,{xAxisPosY,yAxisPosX,valueHop,nbValueHop:data.labels.length-1});break;case "Line":default:drawLinesDataset(animationDecimal,data,config,ctx,statData,{xAxisPosY,yAxisPosX,valueHop,nbValueHop:data.labels.length-1});if(animationDecimal.animationGlobal>=1)if(typeof drawMath=="function")drawMath(ctx,config,data,msr,{xAxisPosY,yAxisPosX,valueHop,scaleHop,zeroY,calculatedScale,calculateOffset,statData});break;}}function drawScale(){drawGridScale(ctx,data,config,msr,yAxisPosX,xAxisPosY,zeroY,valueHop,scaleHop,scaleData.nbOfStepsAxis1,data.labels.length+0);}function drawLabels(){var decal,subloop;ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;if(config.xAxisTop||config.xAxisBottom){ctx.textBaseline="top";ctx.fillStyle=config.scaleFontColor;if(config.xAxisBottom){if(msr.rotateLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";decal=0;subloop=0;if(config.xAxisMiddle==true){decal=valueHop/2;subloop=1;}for(var i=0;i<data.labels.length-subloop;i++)if(showLabels(ctx,data,config,i)){ctx.save();if(msr.rotateLabels>0){ctx.translate(yAxisPosX+i*valueHop-msr.highestXLabel/2+decal,msr.xLabelPos);ctx.rotate(-((msr.rotateLabels+180*(msr.rotateLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,data.labels[i],config.fmtXLabel),0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+i*valueHop-msr.highestXLabel/2+decal,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(fmtChartJS(config,data.labels[i],config.fmtXLabel),yAxisPosX+i*valueHop+decal,msr.xLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}if(config.xAxisTop){if(msr.rotateTLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateTLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";var label;if(typeof data.labels2=="object")label=data.labels2;else label=data.labels;decal=0;subloop=0;if(config.xAxisMiddle==true){decal=valueHop/2;subloop=1;}for(var i=0;i<label.length-subloop;i++)if(showLabels(ctx,data,config,i)){ctx.save();if(msr.rotateTLabels>0){ctx.translate(yAxisPosX+i*valueHop-msr.highestXLabel/2+decal,msr.xTLabelPos);ctx.rotate(-((msr.rotateTLabels+180*(msr.rotateTLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,label[i],config.fmtXLabel),0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",-(msr.rotateTLabels*(Math.PI/180)),yAxisPosX+i*valueHop-msr.highestXLabel/2,msr.xTLabelPos,i,-1);}else ctx.fillTextMultiLine(fmtChartJS(config,label[i],config.fmtXLabel),yAxisPosX+i*valueHop,msr.xTLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XSCALE_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}}ctx.textAlign="right";ctx.textBaseline="middle";decal=0;subloop=0;if(config.yAxisMiddle==true){decal=scaleHop/2;subloop=1;}for(var j=((config.showYAxisMin)?-1:0);j<scaleData.nbOfStepsAxis1-subloop;j++)if(config.scaleShowLabels)if(showYLabels(ctx,data,config,j+1,scaleData.labels1[j+1])){if(config.yAxisLeft){ctx.textAlign="right";ctx.fillTextMultiLine(scaleData.labels1[j+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop)-decal,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,j);}if(config.yAxisRight&&!(scaleData.dbAxis||config.forceSecondScale)){ctx.textAlign="left";ctx.fillTextMultiLine(scaleData.labels1[j+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop)-decal,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}if(config.yAxisRight&&(scaleData.dbAxis||config.forceSecondScale))for(j=((config.showYAxisMin)?-1:0);j<scaleData.nbOfStepsAxis2;j++)if(config.scaleShowLabels){ctx.textAlign="left";ctx.fillTextMultiLine(scaleData.labels2[j+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop2),ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}return {data,config,ctx};};var StackedBar=function(data,config,ctx){var maxSize,scaleHop,scaleHop2,labelHeight,scaleHeight,labelTemplateString,valueHop,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;ctx.tpchart="StackedBar";ctx.tpchartSub="StackedBar";ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);var nrOfBars=data.datasets.length;for(var i=0;i<data.datasets.length;i++)if(data.datasets[i].type=="Line"){statData[i][0].tpchart="Line";nrOfBars--;}else statData[i][0].tpchart="Bar";msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil","nihil",true,false,true,true,"StackedBar");var scaleData=computeScale(false,true,true,false,true,true,data,config,ctx,statData,msr.availableHeight);scaleData.labels1=[];scaleData.labels2=[];populateLabels(scaleData.logarithm1,config.fmtYLabel,config,scaleData.labelTemplateString1,scaleData.labels1,scaleData.nbOfStepsAxis1,scaleData.minAxis1,scaleData.maxAxis1,scaleData.stepWidthAxis1);populateLabels(scaleData.logarithm2,config.fmtYLabel2,config,scaleData.labelTemplateString2,scaleData.labels2,scaleData.nbOfStepsAxis2,scaleData.minAxis2,scaleData.maxAxis2,scaleData.stepWidthAxis2);if(scaleData.maxSteps>0&&scaleData.minSteps>0){var calculatedScale={steps:scaleData.nbOfStepsAxis1,stepValue:scaleData.stepWidthAxis1,graphMin:scaleData.minAxis1,graphMax:scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1,labels:scaleData.labels1};var calculatedScale2={steps:scaleData.nbOfStepsAxis2,stepValue:scaleData.stepWidthAxis2,graphMin:scaleData.minAxis2,graphMax:scaleData.minAxis2+scaleData.nbOfStepsAxis2*scaleData.stepWidthAxis2,labels:scaleData.labels2};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,scaleData.labels1,scaleData.labels2,true,false,true,true,"StackedBar");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight);scaleHop=Math.floor(msr.availableHeight/scaleData.nbOfStepsAxis1);scaleHop2=Math.floor(msr.availableHeight/scaleData.nbOfStepsAxis2);valueHop=Math.floor(msr.availableWidth/(data.labels.length));if(valueHop==0||config.fullWidthGraph)valueHop=(msr.availableWidth/data.labels.length);msr.topNotUsableHeight+=(msr.availableHeight-(scaleData.nbOfStepsAxis1)*scaleHop);msr.rightNotUsableWidth+=(msr.availableWidth-(data.labels.length)*valueHop);msr.clrwidth=msr.clrwidth-(msr.availableWidth-((data.labels.length)*valueHop));msr.availableWidth=(data.labels.length)*valueHop;msr.availableHeight=(scaleData.nbOfStepsAxis1)*scaleHop;yAxisPosX=msr.leftNotUsableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft);xAxisPosY=msr.topNotUsableHeight+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);barWidth=(valueHop-Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth)*2-(Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)*2)-(Math.ceil(ctx.chartSpaceScale*config.barDatasetSpacing)*1-1)-(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2)-1);if(barWidth>=0&&barWidth<=1)barWidth=1;if(barWidth<0&&barWidth>=-1)barWidth=-1;var additionalSpaceBetweenBars;if(1*config.maxBarWidth>0&&barWidth>1*config.maxBarWidth){additionalSpaceBetweenBars=(barWidth-1*config.maxBarWidth)/2;barWidth=1*config.maxBarWidth;}else additionalSpaceBetweenBars=0;var zeroY=0;var zeroY2=0;zeroY=calculateOffset(scaleData.logarithm1,0,calculatedScale,scaleHop);zeroY2=calculateOffset(scaleData.logarithm2,0,calculatedScale2,scaleHop2);initPassVariableData_part2(statData,data,config,ctx,scaleData.logarithm1,scaleData.logarithm2,{graphMin:calculatedScale.graphMin,graphMax:calculatedScale.graphMax,graphMin2:calculatedScale2.graphMin,graphMax2:calculatedScale2.graphMax,msr,zeroY,zeroY2,logarithmic:false,logarithmic2:false,calculatedScale,calculatedScale2,additionalSpaceBetweenBars,scaleHop,scaleHop2,valueHop,yAxisPosX,xAxisPosY,barWidth});if(typeof config.beforeLabelsFunction=="function")config.beforeLabelsFunction("BEFORELABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});drawLabels();if(typeof config.afterLabelsFunction=="function")config.afterLabelsFunction("AFTERLABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});animationLoop(config,msr.legendMsr,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData);}else{testRedraw(ctx,data,config);if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,0,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}function drawBars(animationDecimal){var prevTopPos=new Array();var prevTopNeg=new Array();var correctedAnimationDecimal;for(var i=0;i<data.datasets.length;i++){if(data.datasets[i].type=="Line")continue;for(var j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"STACKEDBAR");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;var currentAnimPc=correctedAnimationDecimal.yAxis;if(currentAnimPc>1)currentAnimPc=currentAnimPc-1;if((typeof data.datasets[i].data[j]=="undefined")||1*data.datasets[i].data[j]==0)continue;if(Math.abs(data.datasets[i].data[j])<config.zeroValue&&config.showZeroValue==false)continue;if(typeof prevTopPos[j]=="undefined"){prevTopPos[j]=statData[statData[i][j].firstNotMissing][j].yPosBottom;prevTopNeg[j]=statData[statData[i][j].firstNotMissing][j].yPosBottom;}var botBar,topBar;if(1*data.datasets[i].data[j]>0)botBar=prevTopPos[j];else botBar=prevTopNeg[j];topBar=botBar+currentAnimPc*(statData[i][j].yPosTop-statData[i][j].yPosBottom);if(1*data.datasets[i].data[j]>0)prevTopPos[j]=topBar;else prevTopNeg[j]=topBar;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;ctx.save();ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[i].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:botBar,xPosRight:statData[i][j].xPosRight,yPosTop:topBar}));ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:botBar,xPosRight:statData[i][j].xPosRight,yPosTop:topBar});ctx.strokeStyle=setOptionValue(true,true,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,j,{nullvalue:null});if(currentAnimPc!=0&&botBar!=topBar){ctx.beginPath();ctx.moveTo(statData[i][j].xPosLeft,botBar+(topBar-botBar)/2);ctx.lineTo(statData[i][j].xPosLeft,topBar);ctx.lineTo(statData[i][j].xPosRight,topBar);ctx.lineTo(statData[i][j].xPosRight,botBar);ctx.lineTo(statData[i][j].xPosLeft,botBar);ctx.lineTo(statData[i][j].xPosLeft,botBar+(topBar-botBar)/2);if(config.barShowStroke){ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"STROKESTYLE",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);}ctx.closePath();ctx.fill();}if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.rectangles++;ctx.pieces_drawn.total_drawn++;}ctx.restore();}}drawLinesDataset(animationDecimal,data,config,ctx,statData,{xAxisPosY,yAxisPosX,valueHop,nbValueHop:data.labels.length});if(animationDecimal.animationGlobal>=config.animationStopValue){var yPos=0,xPos=0;for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if(typeof (data.datasets[i].data[j])=="undefined")continue;jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){ctx.save();ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});var dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);ctx.beginPath();ctx.beginPath();yPos=0;xPos=0;if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==1)xPos=statData[i][j].xPosLeft+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==2)xPos=statData[i][j].xPosLeft+barWidth/2+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==3)xPos=statData[i][j].xPosLeft+barWidth+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});}if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==1)yPos=statData[i][j].yPosBottom-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==2)yPos=(statData[i][j].yPosTop+statData[i][j].yPosBottom)/2-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==3)yPos=statData[i][j].yPosTop-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});}if(yPos>msr.topNotUsableHeight){ctx.translate(xPos,yPos);var rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,xPos,yPos,i,j);}ctx.restore();}}}}function drawScale(){drawGridScale(ctx,data,config,msr,yAxisPosX,xAxisPosY,zeroY,valueHop,scaleHop,scaleData.nbOfStepsAxis1,data.labels.length+1);}function drawLabels(){ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;if(config.xAxisTop||config.xAxisBottom){ctx.textBaseline="top";ctx.fillStyle=config.scaleFontColor;if(config.xAxisBottom){if(msr.rotateLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";for(var i=0;i<data.labels.length;i++)if(showLabels(ctx,data,config,i)){ctx.save();if(msr.rotateLabels>0){ctx.translate(yAxisPosX+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)+i*valueHop+additionalSpaceBetweenBars+(barWidth/2)-msr.highestXLabel/2,msr.xLabelPos);ctx.rotate(-((msr.rotateLabels+180*(msr.rotateLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,data.labels[i],config.fmtXLabel),0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)+i*valueHop+additionalSpaceBetweenBars+(barWidth/2)-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(fmtChartJS(config,data.labels[i],config.fmtXLabel),yAxisPosX+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)+i*valueHop+additionalSpaceBetweenBars+(barWidth/2),msr.xLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}if(config.xAxisTop){if(msr.rotateTLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateTLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";var label;if(typeof data.labels2=="object")label=data.labels2;else label=data.labels;for(var i=0;i<label.length;i++)if(showLabels(ctx,data,config,i)){ctx.save();if(msr.rotateTLabels>0){ctx.translate(yAxisPosX+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)+i*valueHop+additionalSpaceBetweenBars+(barWidth/2)-msr.highestTXLabel/2,msr.xTLabelPos);ctx.rotate(-((msr.rotateTLabels+180*(msr.rotateTLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,label[i],config.fmtXLabel),0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)+i*valueHop+additionalSpaceBetweenBars+(barWidth/2)-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(fmtChartJS(config,label[i],config.fmtXLabel),yAxisPosX+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)+i*valueHop+additionalSpaceBetweenBars+(barWidth/2),msr.xTLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}}ctx.textAlign="right";ctx.textBaseline="middle";subloop=0;decal=0;if(config.yAxisMiddle==true){decal=scaleHop/2;subloop=1;}for(var j=((config.showYAxisMin)?-1:0);j<scaleData.nbOfStepsAxis1-subloop;j++)if(config.scaleShowLabels)if(showYLabels(ctx,data,config,j+1,scaleData.labels1[j+1])){if(config.yAxisLeft){ctx.textAlign="right";ctx.fillTextMultiLine(scaleData.labels1[j+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop)-decal,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,j);}if(config.yAxisRight&&!(scaleData.dbAxis||config.forceSecondScale)){ctx.textAlign="left";ctx.fillTextMultiLine(scaleData.labels1[j+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop)-decal,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}if(config.yAxisRight&&(scaleData.dbAxis||config.forceSecondScale)){subloop=0;decal=0;if(config.yAxisMiddle==true){decal=valueHop/2;subloop=1;}for(j=((config.showYAxisMin)?-1:0);j<scaleData.nbOfStepsAxis2-subloop;j++)if(config.scaleShowLabels){ctx.textAlign="left";ctx.fillTextMultiLine(scaleData.labels2[j+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop2)-decal,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}}return {data,config,ctx};};function reverseData(data){data.labels=data.labels.reverse();for(var i=0;i<data.datasets.length;i++)for(var key in data.datasets[i])if(Array.isArray(data.datasets[i][key]))data.datasets[i][key]=data.datasets[i][key].reverse();return data;}var HorizontalStackedBar=function(data,config,ctx){var maxSize,scaleHop,labelHeight,scaleHeight,labelTemplateString,valueHop,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;if(config.reverseOrder&&typeof ctx.reversed=="undefined"){ctx.reversed=true;data=reverseData(data);}ctx.tpchart="HorizontalStackedBar";ctx.tpchartSub="HorizontalStackedBar";ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil","nihil",true,true,true,true,"HorizontalStackedBar");var scaleData=computeScale(false,true,false,false,true,true,data,config,ctx,statData,msr.availableHeight);scaleData.labels1=[];scaleData.labels2=[];populateLabels(scaleData.logarithm1,config.fmtYLabel,config,scaleData.labelTemplateString1,scaleData.labels1,scaleData.nbOfStepsAxis1,scaleData.minAxis1,scaleData.maxAxis1,scaleData.stepWidthAxis1);populateLabels(scaleData.logarithm2,config.fmtYLabel2,config,scaleData.labelTemplateString2,scaleData.labels2,scaleData.nbOfStepsAxis2,scaleData.minAxis2,scaleData.maxAxis2,scaleData.stepWidthAxis2);if(scaleData.maxSteps>0&&scaleData.minSteps>0){var calculatedScale={steps:scaleData.nbOfStepsAxis1,stepValue:scaleData.stepWidthAxis1,graphMin:scaleData.minAxis1,graphMax:scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1,labels:scaleData.labels1};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,scaleData.labels1,scaleData.labels2,true,true,true,true,"HorizontalStackedBar");msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight);scaleHop=Math.floor(msr.availableHeight/data.labels.length);valueHop=Math.floor(msr.availableWidth/(scaleData.nbOfStepsAxis1));if(valueHop==0||config.fullWidthGraph)valueHop=(msr.availableWidth/(scaleData.nbOfStepsAxis1));msr.clrwidth=msr.clrwidth-(msr.availableWidth-(scaleData.nbOfStepsAxis1*valueHop));msr.topNotUsableHeight+=(msr.availableHeight-data.labels.length*scaleHop);msr.rightNotUsableWidth+=(msr.availableWidth-scaleData.nbOfStepsAxis1*valueHop);msr.availableWidth=scaleData.nbOfStepsAxis1*valueHop;msr.availableHeight=data.labels.length*scaleHop;yAxisPosX=msr.leftNotUsableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft);xAxisPosY=msr.topNotUsableHeight+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);barWidth=(scaleHop-Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth)*2-(Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)*2)-(Math.ceil(ctx.chartSpaceScale*config.barDatasetSpacing)*1-1)-(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2)-1);if(barWidth>=0&&barWidth<=1)barWidth=1;if(barWidth<0&&barWidth>=-1)barWidth=-1;var additionalSpaceBetweenBars;if(1*config.maxBarWidth>0&&barWidth>1*config.maxBarWidth){additionalSpaceBetweenBars=(barWidth-1*config.maxBarWidth)/2;barWidth=1*config.maxBarWidth;}else additionalSpaceBetweenBars=0;var zeroY=HorizontalCalculateOffset(0,calculatedScale,scaleHop);initPassVariableData_part2(statData,data,config,ctx,scaleData.logarithm1,scaleData.logarithm2,{graphMin:calculatedScale.graphMin,graphMax:calculatedScale.graphMax,yAxisPosX,additionalSpaceBetweenBars,xAxisPosY,barWidth,zeroY,scaleHop,valueHop,calculatedScale});if(typeof config.beforeLabelsFunction=="function")config.beforeLabelsFunction("BEFORELABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});drawLabels();if(typeof config.afterLabelsFunction=="function")config.afterLabelsFunction("AFTERLABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});animationLoop(config,msr.legendMsr,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData);}else{testRedraw(ctx,data,config);if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,0,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}function HorizontalCalculateOffset(val,calculatedScale,scaleHop){var outerValue=scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1;var adjustedValue=val-scaleData.minAxis1;var scalingFactor=CapValue(adjustedValue/outerValue,1,0);return (scaleHop*scaleData.nbOfStepsAxis1)*scalingFactor;}function drawBars(animationDecimal){var prevLeftPos=new Array();var prevLeftNeg=new Array();var correctedAnimationDecimal;for(var i=0;i<data.datasets.length;i++)for(var j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"HORIZONTALSTACKEDBAR");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[i].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",i,j,{animationValue:currentAnimPc,xPosLeft:leftBar,yPosBottom:statData[i][j].yPosBottom,xPosRight:rightBar,yPosTop:statData[i][j].yPosBottom}));var currentAnimPc=correctedAnimationDecimal.yAxis;if(currentAnimPc>1)currentAnimPc=currentAnimPc-1;if((typeof (data.datasets[i].data[j])=="undefined")||1*data.datasets[i].data[j]==0)continue;if(Math.abs(data.datasets[i].data[j])<config.zeroValue&&config.showZeroValue==false)continue;if(typeof prevLeftPos[j]=="undefined"){prevLeftPos[j]=statData[statData[i][j].firstNotMissing][j].xPosLeft;prevLeftNeg[j]=statData[statData[i][j].firstNotMissing][j].xPosLeft;}var leftBar,rightBar;if(1*data.datasets[i].data[j]>0)leftBar=prevLeftPos[j];else leftBar=prevLeftNeg[j];rightBar=leftBar+currentAnimPc*(statData[i][j].xPosRight-statData[i][j].xPosLeft);if(1*data.datasets[i].data[j]>0)prevLeftPos[j]=rightBar;else prevLeftNeg[j]=rightBar;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationValue:currentAnimPc,xPosLeft:leftBar,yPosBottom:statData[i][j].yPosBottom,xPosRight:rightBar,yPosTop:statData[i][j].yPosBottom});ctx.strokeStyle=setOptionValue(true,true,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,j,{nullvalue:null});if(currentAnimPc!=0&&statData[i][j].xPosLeft!=statData[i][j].xPosRight){ctx.beginPath();ctx.moveTo(leftBar+(rightBar-leftBar)/2,statData[i][j].yPosTop);ctx.lineTo(rightBar,statData[i][j].yPosTop);ctx.lineTo(rightBar,statData[i][j].yPosBottom);ctx.lineTo(leftBar,statData[i][j].yPosBottom);ctx.lineTo(leftBar,statData[i][j].yPosTop);ctx.lineTo(leftBar+(rightBar-leftBar)/2,statData[i][j].yPosTop);if(config.barShowStroke){ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"STROKESTYLE",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);}ctx.closePath();ctx.fill();}if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.rectangles++;ctx.pieces_drawn.total_drawn++;}}if(animationDecimal.animationGlobal>=config.animationStopValue){var yPos=0,xPos=0;for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if((typeof (data.datasets[i].data[j])=="undefined"))continue;jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){ctx.save();ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});var dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);ctx.beginPath();yPos=0;xPos=0;if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==1)xPos=statData[i][j].xPosLeft+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==2)xPos=statData[i][j].xPosLeft+(statData[i][j].xPosRight-statData[i][j].xPosLeft)/2+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==3)xPos=statData[i][j].xPosRight+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});}if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==1)yPos=statData[i][j].yPosBottom-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==2)yPos=statData[i][j].yPosBottom-barWidth/2-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==3)yPos=statData[i][j].yPosTop-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});}ctx.translate(xPos,yPos);rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,xPos,yPos,i,j);ctx.restore();}}}}function drawScale(){drawGridScale(ctx,data,config,msr,yAxisPosX,xAxisPosY,zeroY,valueHop,scaleHop,data.labels.length+0,scaleData.nbOfStepsAxis1+1);}function drawLabels(){ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;if(config.scaleShowLabels&&(config.xAxisTop||config.xAxisBottom)){ctx.textBaseline="top";ctx.fillStyle=config.scaleFontColor;if(config.xAxisBottom){if(msr.rotateLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";subloop=0;decal=0;if(config.yAxisMiddle==true){decal=valueHop/2;subloop=1;}for(var i=((config.showYAxisMin)?-1:0);i<scaleData.nbOfStepsAxis1-subloop;i++)if(showYLabels(ctx,data,config,i+1,scaleData.labels1[i+1])){ctx.save();if(msr.rotateLabels>0){ctx.translate(yAxisPosX+(i+1)*valueHop-msr.highestXLabel/2+decal,msr.xLabelPos);ctx.rotate(-((msr.rotateLabels+180*(msr.rotateLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(scaleData.labels1[i+1],0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+(i+1)*valueHop-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(scaleData.labels1[i+1],yAxisPosX+((i+1)*valueHop)+decal,msr.xLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}if(config.xAxisTop){if(msr.rotateTLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateTLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";subloop=0;decal=0;if(config.yAxisMiddle==true){decal=valueHop/2;subloop=1;}for(var i=((config.showYAxisMin)?-1:0);i<scaleData.nbOfStepsAxis1-subloop;i++)if(showYLabels(ctx,data,config,i+1,scaleData.labels1[i+1])){ctx.save();if(msr.rotateTLabels>0){ctx.translate(yAxisPosX+(i+1)*valueHop-msr.highestTXLabel/2+decal,msr.xTLabelPos);ctx.rotate(-((msr.rotateTLabels+180*(msr.rotateTLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(scaleData.labels1[i+1],0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+(i+1)*valueHop-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(scaleData.labels1[i+1],yAxisPosX+((i+1)*valueHop)+decal,msr.xTLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}}for(var j=0;j<data.labels.length;j++)if(showLabels(ctx,data,config,j)){if(config.yAxisLeft){ctx.textAlign="right";ctx.textBaseline="middle";ctx.fillTextMultiLine(fmtChartJS(config,data.labels[j],config.fmtXLabel),yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)-scaleHop*(j+1)+additionalSpaceBetweenBars+barWidth/2,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,j);}if(config.yAxisRight){ctx.textAlign="left";ctx.textBaseline="middle";ctx.fillTextMultiLine(fmtChartJS(config,data.labels[j],config.fmtXLabel),yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY+Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)-scaleHop*(j+1)+additionalSpaceBetweenBars+barWidth/2,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}}return {data,config,ctx};};var Bar=function(data,config,ctx){var maxSize,scaleHop,scaleHop2,labelHeight,scaleHeight,labelTemplateString,labelTemplateString2,valueHop,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;ctx.tpchart="Bar";ctx.tpchartSub="Bar";ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);var nrOfBars=data.datasets.length;for(var i=0;i<data.datasets.length;i++)if(data.datasets[i].type=="Line"){statData[i][0].tpchart="Line";nrOfBars--;}else statData[i][0].tpchart="Bar";var bufferDataset,l=0;msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil","nihil",true,false,true,true,"Bar");var scaleData=computeScale(true,true,true,true,true,false,data,config,ctx,statData,msr.availableHeight);scaleData.labels1=[];scaleData.labels2=[];populateLabels(scaleData.logarithm1,config.fmtYLabel,config,scaleData.labelTemplateString1,scaleData.labels1,scaleData.nbOfStepsAxis1,scaleData.minAxis1,scaleData.maxAxis1,scaleData.stepWidthAxis1);populateLabels(scaleData.logarithm2,config.fmtYLabel2,config,scaleData.labelTemplateString2,scaleData.labels2,scaleData.nbOfStepsAxis2,scaleData.minAxis2,scaleData.maxAxis2,scaleData.stepWidthAxis2);if(scaleData.maxSteps>0&&scaleData.minSteps>0){var calculatedScale={steps:scaleData.nbOfStepsAxis1,stepValue:scaleData.stepWidthAxis1,graphMin:scaleData.minAxis1,graphMax:scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1,labels:scaleData.labels1};var calculatedScale2={steps:scaleData.nbOfStepsAxis2,stepValue:scaleData.stepWidthAxis2,graphMin:scaleData.minAxis2,graphMax:scaleData.minAxis2+scaleData.nbOfStepsAxis2*scaleData.stepWidthAxis2,labels:scaleData.labels2};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,scaleData.labels1,scaleData.labels2,true,false,true,true,"Bar");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight);scaleHop=Math.floor(msr.availableHeight/scaleData.nbOfStepsAxis1);if(scaleData.nbOfStepsAxis2!="undefined"&&scaleData.nbOfStepsAxis2>0)scaleHop2=Math.floor(msr.availableHeight/scaleData.nbOfStepsAxis2);valueHop=Math.floor(msr.availableWidth/data.labels.length);if(valueHop==0||config.fullWidthGraph)valueHop=(msr.availableWidth/data.labels.length);msr.topNotUsableHeight+=(msr.availableHeight-(scaleData.nbOfStepsAxis1)*scaleHop);msr.rightNotUsableWidth+=(msr.availableWidth-(data.labels.length)*valueHop);msr.clrwidth=msr.clrwidth-(msr.availableWidth-((data.labels.length)*valueHop));msr.availableWidth=(data.labels.length)*valueHop;msr.availableHeight=(scaleData.nbOfStepsAxis1)*scaleHop;yAxisPosX=msr.leftNotUsableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft);xAxisPosY=msr.topNotUsableHeight+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);barWidth=(valueHop-Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth)*2-(Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)*2)-(Math.ceil(ctx.chartSpaceScale*config.barDatasetSpacing)*nrOfBars-1)-((Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2)*nrOfBars-1))/nrOfBars;if(barWidth>=0&&barWidth<=1)barWidth=1;if(barWidth<0&&barWidth>=-1)barWidth=-1;var additionalSpaceBetweenBars;if(1*config.maxBarWidth>0&&barWidth>1*config.maxBarWidth){additionalSpaceBetweenBars=nrOfBars*(barWidth-1*config.maxBarWidth)/2;barWidth=1*config.maxBarWidth;}else additionalSpaceBetweenBars=0;var zeroY2=0;var zeroY=calculateOffset(scaleData.logarithm1,0,calculatedScale,scaleHop);zeroY2=calculateOffset(scaleData.logarithm2,0,calculatedScale2,scaleHop2);initPassVariableData_part2(statData,data,config,ctx,scaleData.logarithm1,scaleData.logarithm2,{graphMin:calculatedScale.graphMin,graphMax:calculatedScale.graphMax,graphMin2:calculatedScale2.graphMin,graphMax2:calculatedScale2.graphMax,msr,yAxisPosX,xAxisPosY,valueHop,nbValueHop:data.labels.length-1,barWidth,additionalSpaceBetweenBars,zeroY,zeroY2,calculatedScale,calculatedScale2,scaleHop,scaleHop2});if(typeof config.beforeLabelsFunction=="function")config.beforeLabelsFunction("BEFORELABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});drawLabels();if(typeof config.afterLabelsFunction=="function")config.afterLabelsFunction("AFTERLABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});animationLoop(config,msr.legendMsr,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData);}else{testRedraw(ctx,data,config);if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,0,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}function drawBars(animationDecimal){var t1,t2,t3,correctedAnimationDecimal,complementaryBar,otherBarHeight,barHeight,i,j,currentAnimPc,fullHeight,sizeTop,sizeBottom,decal;for(i=0;i<data.datasets.length;i++){if(data.datasets[i].type=="Line")continue;for(j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"BAR");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;ctx.save();ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[i].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:statData[i][j].yPosBottom,xPosRight:statData[i][j].xPosLeft+barWidth,yPosTop:statData[i][j].yPosBottom-barHeight}));if(!(typeof (data.datasets[i].data[j])=="undefined"))if(Math.abs(data.datasets[i].data[j])>=config.zeroValue||config.showZeroValue==true){currentAnimPc=correctedAnimationDecimal.yAxis;if(currentAnimPc>1)currentAnimPc=currentAnimPc-1;if(1*data.datasets[i].data[j]>=0)barHeight=currentAnimPc*(statData[i][j].barHeight)-(Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2);else barHeight=currentAnimPc*(statData[i][j].barHeight)+(Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2);ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:statData[i][j].yPosBottom,xPosRight:statData[i][j].xPosLeft+barWidth,yPosTop:statData[i][j].yPosBottom-barHeight});ctx.strokeStyle=setOptionValue(true,true,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,j,{nullvalue:null});roundRect(ctx,statData[i][j].xPosLeft,statData[i][j].yPosBottom,barWidth,barHeight,config.barShowStroke,config.barBorderRadius,i,j,(data.datasets[i].data[j]<0?-1:1));if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.rectangles++;ctx.pieces_drawn.total_drawn++;}}ctx.restore();}}for(i=0;i<data.datasets.length;i++){if(data.datasets[i].type=="Line")continue;for(j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"BAR");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;complementaryBar=setOptionValue(true,true,1,"COMPLEMENTARYBAR",ctx,data,statData,data.datasets[i].complementaryBar,config.complementaryBar,"complementaryBar",i,j,{nullvalue:null});if(complementaryBar==false)continue;ctx.save();ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[i].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:statData[i][j].yPosBottom,xPosRight:statData[i][j].xPosLeft+barWidth,yPosTop:statData[i][j].yPosBottom-barHeight}));currentAnimPc=correctedAnimationDecimal.yAxis;if(currentAnimPc>1)currentAnimPc=currentAnimPc-1;if(!(typeof (data.datasets[i].data[j])=="undefined"))if(1*data.datasets[i].data[j]>=0)barHeight=currentAnimPc*(statData[i][j].barHeight)-(Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2);else barHeight=currentAnimPc*(statData[i][j].barHeight)+(Math.ceil(ctx.chartLineScale*ctx.lineWidth)/2);else barHeight=0;fullHeight=msr.clrheight-Math.ceil(ctx.chartLineScale*(config.scaleTickSizeTop+config.scaleTickSizeBottom));sizeTop=statData[i][j].yPosBottom-msr.clry-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);sizeBottom=fullHeight-sizeTop;if(1*data.datasets[i].data[j]<0){otherBarHeight=-(sizeBottom+barHeight)+3*(ctx.lineWidth/2);otherBarHeight2=sizeTop-3*(ctx.lineWidth/2);decal=-(ctx.lineWidth/2);}else{otherBarHeight=(sizeTop-barHeight)-3*(ctx.lineWidth/2);otherBarHeight2=-(sizeBottom-3*(ctx.lineWidth/2));decal=+(ctx.lineWidth/2);}ctx.fillStyle=setOptionValue(true,true,1,"COMPLEMENTARYCOLOR",ctx,data,statData,data.datasets[i].complementaryColor,config.complementaryColor,"complementaryColor",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:statData[i][j].yPosBottom-barHeight,xPosRight:statData[i][j].xPosLeft+barWidth,yPosTop:statData[i][j].yPosBottom-barHeight-otherBarHeight});ctx.strokeStyle=setOptionValue(true,true,1,"COMPLEMENTARYSTROKECOLOR",ctx,data,statData,data.datasets[i].complementaryStrokeColor,config.complementaryStrokeColor,"strokeColor",i,j,{nullvalue:null});roundRect(ctx,statData[i][j].xPosLeft,statData[i][j].yPosBottom-barHeight-2*decal,barWidth,otherBarHeight,config.barShowStroke,config.barBorderRadius,i,j,(data.datasets[i].data[j]<0?-1:1));if(config.complementaryBarFullHeight)roundRect(ctx,statData[i][j].xPosLeft,statData[i][j].yPosBottom+2*decal,barWidth,otherBarHeight2,config.barShowStroke,config.barBorderRadius,i,j,(data.datasets[i].data[j]<0?-1:1));ctx.restore();}}drawLinesDataset(animationDecimal,data,config,ctx,statData,{xAxisPosY,yAxisPosX,valueHop,nbValueHop:data.labels.length});if(animationDecimal.animationGlobal>=config.animationStopValue)for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if(typeof (data.datasets[i].data[j])=="undefined")continue;if(data.datasets[i].type=="Line")continue;jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){ctx.save();ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});t1=statData[i][j].yPosBottom;t2=statData[i][j].yPosTop;ctx.beginPath();var yPos=0,xPos=0;if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==1)xPos=statData[i][j].xPosLeft+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==2)xPos=statData[i][j].xPosLeft+barWidth/2+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==3)xPos=statData[i][j].xPosLeft+barWidth+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});}if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==1)yPos=statData[i][j].yPosBottom-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==2)yPos=(statData[i][j].yPosBottom+statData[i][j].yPosTop)/2-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==3)yPos=statData[i][j].yPosTop-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});}ctx.translate(xPos,yPos);var dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,xPos,yPos,i,j);ctx.restore();}}if(animationDecimal.animationGlobal>=1&&typeof drawMath=="function")drawMath(ctx,config,data,msr,{xAxisPosY,yAxisPosX,valueHop,scaleHop,zeroY,calculatedScale,calculateOffset,additionalSpaceBetweenBars,barWidth});}function roundRect(ctx,x,y,w,h,stroke,radius,i,j,fact){ctx.beginPath();ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"STROKESTYLE",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.moveTo(x+(w/2),y);ctx.lineTo(x+w,y);ctx.lineTo(x+w,y-h+fact*radius);ctx.quadraticCurveTo(x+w,y-h,x+w-radius,y-h);ctx.lineTo(x+radius,y-h);ctx.quadraticCurveTo(x,y-h,x,y-h+fact*radius);ctx.lineTo(x,y);ctx.lineTo(x+(w/2),y);if(stroke)ctx.stroke();ctx.closePath();ctx.fill();ctx.setLineDash([]);}function drawScale(){drawGridScale(ctx,data,config,msr,yAxisPosX,xAxisPosY,zeroY,valueHop,scaleHop,scaleData.nbOfStepsAxis1,data.labels.length+1);}function drawLabels(){var decal,subloop;ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;if(config.xAxisTop||config.xAxisBottom){ctx.textBaseline="top";ctx.fillStyle=config.scaleFontColor;if(config.xAxisBottom){if(msr.rotateLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";subloop=0;decal=0;for(var i=0;i<data.labels.length;i++)if(showLabels(ctx,data,config,i)){ctx.save();if(msr.rotateLabels>0){ctx.translate(yAxisPosX+i*valueHop+(valueHop/2)-msr.highestXLabel/2,msr.xLabelPos);ctx.rotate(-((msr.rotateLabels+180*(msr.rotateLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,data.labels[i],config.fmtXLabel),0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+i*valueHop+(valueHop/2)-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(fmtChartJS(config,data.labels[i],config.fmtXLabel),yAxisPosX+i*valueHop+(valueHop/2)+decal,msr.xLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}if(config.xAxisTop){if(msr.rotateTLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateTLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";var label;if(typeof data.labels2=="object")label=data.labels2;else label=data.labels;for(var i=0;i<label.length;i++)if(showLabels(ctx,data,config,i)){ctx.save();if(msr.rotateTLabels>0){ctx.translate(yAxisPosX+i*valueHop+(valueHop/2)-msr.highestTXLabel/2,msr.xTLabelPos);ctx.rotate(-((msr.rotateTLabels+180*(msr.rotateTLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(fmtChartJS(config,label[i],config.fmtXLabel),0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+i*valueHop+(valueHop/2)-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(fmtChartJS(config,label[i],config.fmtXLabel),yAxisPosX+i*valueHop+(valueHop/2),msr.xTLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}}ctx.textAlign="right";ctx.textBaseline="middle";subloop=0;decal=0;if(config.yAxisMiddle==true){decal=scaleHop/2;subloop=1;}for(var j=((config.showYAxisMin)?-1:0);j<scaleData.nbOfStepsAxis1-subloop;j++)if(config.scaleShowLabels)if(showYLabels(ctx,data,config,j+1,scaleData.labels1[j+1])){if(config.yAxisLeft){ctx.textAlign="right";ctx.fillTextMultiLine(scaleData.labels1[j+1],yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop)-decal,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,j);}if(config.yAxisRight&&!(scaleData.dbAxis||config.forceSecondScale)){ctx.textAlign="left";ctx.fillTextMultiLine(scaleData.labels1[j+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-((j+1)*scaleHop)-decal,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}if(config.yAxisRight&&(scaleData.dbAxis||config.forceSecondScale)){subloop=0;decal=0;if(config.yAxisMiddle==true){decal=scaleHop/2;subloop=1;}for(j=((config.showYAxisMin)?-1:0);j<scaleData.nbOfStepsAxis2-subloop;j++)if(config.scaleShowLabels){ctx.textAlign="left";ctx.fillTextMultiLine(scaleData.labels2[j+1],yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight))-decal,xAxisPosY-((j+1)*scaleHop2),ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}}return {data,config,ctx};};var HorizontalBar=function(data,config,ctx){var maxSize,scaleHop,labelHeight,scaleHeight,labelTemplateString,valueHop,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr;ctx.tpchart="HorizontalBar";ctx.tpchartSub="HorizontalBar";ctx.tpdata=0;if(!init_and_start(ctx,data,config))return;if(config.reverseOrder&&typeof ctx.reversed=="undefined"){ctx.reversed=true;data=reverseData(data);}var statData=initPassVariableData_part1(data,config,ctx);init_result(ctx,data,statData);msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,"nihil","nihil",true,true,true,true,"StackedBar");var scaleData=computeScale(true,true,false,false,false,false,data,config,ctx,statData,msr.availableHeight);scaleData.labels1=[];scaleData.labels2=[];populateLabels(scaleData.logarithm1,config.fmtYLabel,config,scaleData.labelTemplateString1,scaleData.labels1,scaleData.nbOfStepsAxis1,scaleData.minAxis1,scaleData.maxAxis1,scaleData.stepWidthAxis1);populateLabels(scaleData.logarithm2,config.fmtYLabel2,config,scaleData.labelTemplateString2,scaleData.labels2,scaleData.nbOfStepsAxis2,scaleData.minAxis2,scaleData.maxAxis2,scaleData.stepWidthAxis2);if(scaleData.maxSteps>0&&scaleData.minSteps>0){var calculatedScale={steps:scaleData.nbOfStepsAxis1,stepValue:scaleData.stepWidthAxis1,graphMin:scaleData.minAxis1,graphMax:scaleData.minAxis1+scaleData.nbOfStepsAxis1*scaleData.stepWidthAxis1,labels:scaleData.labels1};msr=setMeasures(data,config,ctx,ctx.canvas.height,ctx.canvas.width,scaleData.labels1,scaleData.labels1,true,true,true,true,"HorizontalBar");msr.availableHeight=msr.availableHeight-Math.ceil(ctx.chartLineScale*config.scaleTickSizeBottom)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);msr.availableWidth=msr.availableWidth-Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight);scaleHop=Math.floor(msr.availableHeight/data.labels.length);valueHop=Math.floor(msr.availableWidth/(scaleData.nbOfStepsAxis1));if(valueHop==0||config.fullWidthGraph)valueHop=(msr.availableWidth/scaleData.nbOfStepsAxis1);msr.clrwidth=msr.clrwidth-(msr.availableWidth-(scaleData.nbOfStepsAxis1*valueHop));msr.topNotUsableHeight+=(msr.availableHeight-data.labels.length*scaleHop);msr.rightNotUsableWidth+=(msr.availableWidth-scaleData.nbOfStepsAxis1*valueHop);msr.availableWidth=(scaleData.nbOfStepsAxis1)*valueHop;msr.availableHeight=(data.labels.length)*scaleHop;yAxisPosX=msr.leftNotUsableWidth+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft);xAxisPosY=msr.topNotUsableHeight+msr.availableHeight+Math.ceil(ctx.chartLineScale*config.scaleTickSizeTop);barWidth=(scaleHop-Math.ceil(ctx.chartLineScale*config.scaleGridLineWidth)*2-(Math.ceil(ctx.chartSpaceScale*config.barValueSpacing)*2)-(Math.ceil(ctx.chartSpaceScale*config.barDatasetSpacing)*data.datasets.length-1)-((Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2)*data.datasets.length-1))/data.datasets.length;if(barWidth>=0&&barWidth<=1)barWidth=1;if(barWidth<0&&barWidth>=-1)barWidth=-1;var additionalSpaceBetweenBars;if(1*config.maxBarWidth>0&&barWidth>1*config.maxBarWidth){additionalSpaceBetweenBars=data.datasets.length*(barWidth-1*config.maxBarWidth)/2;barWidth=1*config.maxBarWidth;}else additionalSpaceBetweenBars=0;var zeroY=0;zeroY=calculateOffset(scaleData.logarithm1,0,calculatedScale,valueHop);initPassVariableData_part2(statData,data,config,ctx,scaleData.logarithm1,scaleData.logarithm2,{graphMin:calculatedScale.graphMin,graphMax:calculatedScale.graphMax,yAxisPosX,xAxisPosY,barWidth,additionalSpaceBetweenBars,zeroY,scaleHop,valueHop,calculatedScale});if(typeof config.beforeLabelsFunction=="function")config.beforeLabelsFunction("BEFORELABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});drawLabels();if(typeof config.afterLabelsFunction=="function")config.afterLabelsFunction("AFTERLABELSFUNCTION",ctx,data,statData,-1,-1,{animationValue:1,cntiter:0,config});animationLoop(config,msr.legendMsr,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data,statData);}else{testRedraw(ctx,data,config);if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,0,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}function drawBars(animationDecimal){var i,j,currentAnimPc,barHeight,fullHeight,sizeTop,sizeBottom,otherBarHeight,otherBarHeight2,decal;var correctedAnimationDecimal;for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"HORIZONTALBAR");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;ctx.save();ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[i].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:statData[i][j].yPosBottom,xPosRight:statData[i][j].xPosLeft+barWidth,yPosTop:statData[i][j].yPosBottom}));currentAnimPc=correctedAnimationDecimal.yAxis;if(currentAnimPc>1)currentAnimPc=currentAnimPc-1;if(1*data.datasets[i].data[j]>=0)barHeight=currentAnimPc*statData[i][j].barWidth-(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2);else barHeight=currentAnimPc*statData[i][j].barWidth+(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2);ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:statData[i][j].yPosBottom,xPosRight:statData[i][j].xPosLeft+barHeight,yPosTop:statData[i][j].yPosBottom});ctx.strokeStyle=setOptionValue(true,true,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,j,{nullvalue:null});if(!(typeof (data.datasets[i].data[j])=="undefined"))if(Math.abs(data.datasets[i].data[j])>=config.zeroValue||config.showZeroValue==true){roundRect(ctx,statData[i][j].yPosTop,statData[i][j].xPosLeft,barWidth,barHeight,config.barShowStroke,config.barBorderRadius,0,i,j,(data.datasets[i].data[j]<0?-1:1));if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.rectangles++;ctx.pieces_drawn.total_drawn++;}}ctx.restore();}for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"HORIZONTALBAR");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;complementaryBar=setOptionValue(true,true,1,"COMPLEMENTARYBAR",ctx,data,statData,data.datasets[i].complementaryBar,config.complementaryBar,"complementaryBar",i,j,{nullvalue:null});if(complementaryBar==false)continue;ctx.save();ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"BARSTROKEWIDTH",ctx,data,statData,data.datasets[i].barStrokeWidth,config.barStrokeWidth,"barStrokeWidth",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft,yPosBottom:statData[i][j].yPosBottom,xPosRight:statData[i][j].xPosLeft+barWidth,yPosTop:statData[i][j].yPosBottom-barHeight}));currentAnimPc=correctedAnimationDecimal.yAxis;if(currentAnimPc>1)currentAnimPc=currentAnimPc-1;if(1*data.datasets[i].data[j]>=0)barHeight=currentAnimPc*statData[i][j].barWidth-(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2);else barHeight=currentAnimPc*statData[i][j].barWidth+(Math.ceil(ctx.chartLineScale*config.barStrokeWidth)/2);fullHeight=msr.clrwidth-Math.ceil(ctx.chartLineScale*(config.scaleTickSizeLeft+config.scaleTickSizeRight));sizeTop=statData[i][j].xPosLeft-msr.clrx-Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight);sizeBottom=fullHeight-sizeTop;if(1*data.datasets[i].data[j]<0){otherBarHeight=-(msr.clrwidth-((statData[i][j].xPosLeft-msr.clrx)-barHeight))+Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft);otherBarHeight=-(sizeBottom+barHeight)+3*(ctx.lineWidth/2);otherBarHeight2=sizeTop-3*(ctx.lineWidth/2);decal=-(ctx.lineWidth/2);}else{otherBarHeight=msr.clrwidth-((statData[i][j].xPosLeft-msr.clrx)+barHeight+ctx.lineWidth);otherBarHeight=(sizeTop-barHeight)-3*(ctx.lineWidth/2);otherBarHeight2=-(sizeBottom-3*(ctx.lineWidth/2));decal=+(ctx.lineWidth/2);}ctx.fillStyle=setOptionValue(true,true,1,"COMPLEMENTARYCOLOR",ctx,data,statData,data.datasets[i].complementaryColor,config.complementaryColor,"complementaryColor",i,j,{animationValue:currentAnimPc,xPosLeft:statData[i][j].xPosLeft+barHeight,yPosBottom:statData[i][j].yPosBottom,xPosRight:statData[i][j].xPosLeft+barHeight+otherBarHeight,yPosTop:statData[i][j].yPosBottom});ctx.strokeStyle=setOptionValue(true,true,1,"COMPLEMENTARYSTROKECOLOR",ctx,data,statData,data.datasets[i].complementaryStrokeColor,config.complementaryStrokeColor,"strokeColor",i,j,{nullvalue:null});roundRect(ctx,statData[i][j].yPosTop,statData[i][j].xPosLeft+barHeight+2*decal,barWidth,otherBarHeight,config.barShowStroke,config.barBorderRadius,0,i,j,(data.datasets[i].data[j]<0?-1:1));if(animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.rectangles++;ctx.pieces_drawn.total_drawn++;}if(config.complementaryBarFullHeight)roundRect(ctx,statData[i][j].yPosTop,statData[i][j].xPosLeft-2*decal,barWidth,otherBarHeight2,config.barShowStroke,config.barBorderRadius,0,i,j,(data.datasets[i].data[j]<0?-1:1));ctx.restore();}if(animationDecimal.animationGlobal>=config.animationStopValue)for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if(typeof (data.datasets[i].data[j])=="undefined")continue;jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){ctx.save();ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});ctx.beginPath();var yPos=0,xPos=0;if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==1)yPos=statData[i][j].yPosTop-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true})+barWidth;else if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==2)yPos=statData[i][j].yPosTop+barWidth/2-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAYPOSITION",ctx,data,statData,undefined,config.inGraphDataYPosition,"inGraphDataYPosition",i,j,{nullValue:true})==3)yPos=statData[i][j].yPosTop-setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});}if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==1)xPos=statData[i][j].xPosLeft+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==2)xPos=(statData[i][j].xPosLeft+statData[i][j].xPosRight)/2+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});else{if(setOptionValue(true,true,1,"INGRAPHDATAXPOSITION",ctx,data,statData,undefined,config.inGraphDataXPosition,"inGraphDataXPosition",i,j,{nullValue:true})==3)xPos=statData[i][j].xPosRight+setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});}ctx.translate(xPos,yPos);var dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);var rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,xPos,yPos,i,j);ctx.restore();}}}function roundRect(ctx,x,y,w,h,stroke,radius,zeroY,i,j,fact){ctx.beginPath();ctx.moveTo(y+zeroY,x);ctx.lineTo(y+zeroY,x+w);ctx.lineTo(y+h-fact*radius,x+w);ctx.quadraticCurveTo(y+h,x+w,y+h,x+w-radius);ctx.lineTo(y+h,x+radius);ctx.quadraticCurveTo(y+h,x,y+h-fact*radius,x);ctx.lineTo(y+zeroY,x);ctx.quadraticCurveTo(y+zeroY,x,y+zeroY,x+w);if(stroke){ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"STROKESTYLE",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);}ctx.closePath();ctx.fill();}function drawScale(){drawGridScale(ctx,data,config,msr,yAxisPosX,xAxisPosY,zeroY,valueHop,scaleHop,data.labels.length+0,scaleData.nbOfStepsAxis1+1);}function drawLabels(){ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;if(config.scaleShowLabels&&(config.xAxisTop||config.xAxisBottom)){ctx.textBaseline="top";ctx.fillStyle=config.scaleFontColor;if(config.xAxisBottom){if(msr.rotateLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";subloop=0;decal=0;if(config.yAxisMiddle==true){decal=valueHop/2;subloop=1;}for(var i=((config.showYAxisMin)?-1:0);i<scaleData.nbOfStepsAxis1-subloop;i++)if(showYLabels(ctx,data,config,i+1,scaleData.labels1[i+1])){ctx.save();if(msr.rotateLabels>0){ctx.translate(yAxisPosX+(i+1)*valueHop-msr.highestXLabel/2+decal,msr.xLabelPos);ctx.rotate(-((msr.rotateLabels+180*(msr.rotateLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(scaleData.labels1[i+1],0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+(i+1)*valueHop-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(scaleData.labels1[i+1],yAxisPosX+(i+1)*valueHop+decal,msr.xLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}if(config.xAxisTop){if(msr.rotateTLabels>90){ctx.save();ctx.textAlign="left";}else if(msr.rotateTLabels>0){ctx.save();ctx.textAlign="right";}else ctx.textAlign="center";subloop=0;decal=0;if(config.yAxisMiddle==true){decal=valueHop/2;subloop=1;}for(var i=((config.showYAxisMin)?-1:0);i<scaleData.nbOfStepsAxis1-subloop;i++)if(showYLabels(ctx,data,config,i+1,scaleData.labels1[i+1])){ctx.save();if(msr.rotateTLabels>0){ctx.translate(yAxisPosX+(i+1)*valueHop-msr.highestTXLabel/2+decal,msr.xTLabelPos);ctx.rotate(-((msr.rotateTLabels+180*(msr.rotateTLabels>90))*(Math.PI/180)));ctx.fillTextMultiLine(scaleData.labels1[i+1],0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",-(msr.rotateLabels*(Math.PI/180)),yAxisPosX+(i+1)*valueHop-msr.highestXLabel/2,msr.xLabelPos,i,-1);}else ctx.fillTextMultiLine(scaleData.labels1[i+1],yAxisPosX+((i+1)*valueHop)+decal,msr.xTLabelPos,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"XAXIS_TEXTMOUSE",0,0,0,i,-1);ctx.restore();}}}ctx.textAlign="right";ctx.textBaseline="middle";for(var j=0;j<data.labels.length;j++)if(showLabels(ctx,data,config,j)){if(config.yAxisLeft){ctx.textAlign="right";ctx.fillTextMultiLine(fmtChartJS(config,data.labels[j],config.fmtXLabel),yAxisPosX-(Math.ceil(ctx.chartLineScale*config.scaleTickSizeLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(j*scaleHop)-scaleHop/2,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YLEFTAXIS_TEXTMOUSE",0,0,0,-1,j);}if(config.yAxisRight){ctx.textAlign="left";ctx.fillTextMultiLine(fmtChartJS(config,data.labels[j],config.fmtXLabel),yAxisPosX+msr.availableWidth+(Math.ceil(ctx.chartLineScale*config.scaleTickSizeRight)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight)),xAxisPosY-(j*scaleHop)-scaleHop/2,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.scaleFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXIS_TEXTMOUSE",0,0,0,-1,j);}}}return {data,config,ctx};};function calculateOffset(logarithmic,val,calculatedScale,scaleHop){if(!logarithmic){var outerValue=calculatedScale.steps*calculatedScale.stepValue;var adjustedValue=val-calculatedScale.graphMin;var scalingFactor=CapValue(adjustedValue/outerValue,1,0);return (scaleHop*calculatedScale.steps)*scalingFactor;}else return CapValue(log10(val)*scaleHop-log10(calculatedScale.graphMin)*scaleHop,undefined,0);}function animationLoopOld(config,legendMsr,drawScale,drawData,ctx,clrx,clry,clrwidth,clrheight,midPosX,midPosY,borderX,borderY,data,statData){var cntiter=0;var animationCount=1;var multAnim=1;if(config.animationStartValue<0||config.animationStartValue>1)config.animation.StartValue=0;if(config.animationStopValue<0||config.animationStopValue>1)config.animation.StopValue=1;if(config.animationStopValue<config.animationStartValue)config.animationStopValue=config.animationStartValue;if(isIE()<9&&isIE()!=false)config.animation=false;var animFrameAmount=(config.animation)?1/CapValue(config.animationSteps,Number.MAX_VALUE,1):1,easingFunction=animationOptions[config.animationEasing],percentAnimComplete=(config.animation)?0:1;if(config.animation&&config.animationStartValue>0&&config.animationStartValue<=1)while(percentAnimComplete<config.animationStartValue){cntiter++;percentAnimComplete+=animFrameAmount;}var beginAnim=cntiter;var beginAnimPct=percentAnimComplete;if(typeof drawScale!=="function")drawScale=function(){};if(config.saveBackImage)ctx.savedImage=ctx.getImageData(0,0,ctx.canvas.width,ctx.canvas.height);if(config.clearRect)if(ctx.firstPass%10!=1||config.animation==false)animLoop();else if(config.animationForceSetTimeOut)requestAnimFrameSetTimeOut(animLoop);else requestAnimFrame(animLoop);else animLoop();function animateFrame(){var easeAdjustedAnimationPercent=(config.animation)?CapValue(easingFunction(percentAnimComplete),null,0):1;if(1*cntiter>=1*CapValue(config.animationSteps,Number.MAX_VALUE,1)||config.animation==false||ctx.firstPass%10!=1)easeAdjustedAnimationPercent=1;else{if(easeAdjustedAnimationPercent>=1)easeAdjustedAnimationPercent=0.9999;}if(config.animation&&!(isIE()<9&&isIE()!=false)&&config.clearRect)ctx.clearRect(clrx,clry,clrwidth,clrheight);dispCrossImage(ctx,config,midPosX,midPosY,borderX,borderY,false,data,easeAdjustedAnimationPercent,cntiter);dispCrossText(ctx,config,midPosX,midPosY,borderX,borderY,false,data,easeAdjustedAnimationPercent,cntiter);if(typeof config.beforeDrawFunction=="function")config.beforeDrawFunction("BEFOREDRAWFUNCTION",ctx,data,statData,-1,-1,{animationValue:easeAdjustedAnimationPercent,cntiter,config,borderX,borderY,midPosX,midPosY});if(config.saveBackImage){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);ctx.putImageData(ctx.savedImage,0,0);}if(config.scaleOverlay){drawData(easeAdjustedAnimationPercent);if(typeof config.endDrawDataFunction=="function")config.endDrawDataFunction("ENDDATAFUNCTION",ctx,data,statData,-1,-1,{animationValue:easeAdjustedAnimationPercent,cntiter,config,borderX,borderY,midPosX,midPosY});drawScale();if(typeof config.endDrawScaleFunction=="function")config.endDrawScaleFunction("ENDSCALEFUNCTION",ctx,data,statData,-1,-1,{animationValue:easeAdjustedAnimationPercent,cntiter,config,borderX,borderY,midPosX,midPosY});}else{drawScale();if(typeof config.endDrawScaleFunction=="function")config.endDrawScaleFunction("ENDSCALEFUNCTION",ctx,data,statData,-1,-1,{animationValue:easeAdjustedAnimationPercent,cntiter,config,borderX,borderY,midPosX,midPosY});drawData(easeAdjustedAnimationPercent);if(typeof config.endDrawDataFunction=="function")config.endDrawDataFunction("ENDDATAFUNCTION",ctx,data,statData,-1,-1,{animationValue:easeAdjustedAnimationPercent,cntiter,config,borderX,borderY,midPosX,midPosY});}dispCrossImage(ctx,config,midPosX,midPosY,borderX,borderY,true,data,easeAdjustedAnimationPercent,cntiter);dispCrossText(ctx,config,midPosX,midPosY,borderX,borderY,true,data,easeAdjustedAnimationPercent,cntiter);drawLegend(legendMsr,data,config,ctx,ctx.tpchart,cntiter);}function animLoop(){cntiter+=multAnim;percentAnimComplete+=multAnim*animFrameAmount;if(cntiter==config.animationSteps||config.animation==false||ctx.firstPass%10!=1)percentAnimComplete=1;else{if(percentAnimComplete>=1)percentAnimComplete=0.999;}animateFrame();if(multAnim==-1&&cntiter<=beginAnim){if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true))config.onAnimationComplete(ctx,config,data,0,animationCount+1,statData);multAnim=1;if(config.animationForceSetTimeOut)requestAnimFrameSetTimeOut(animLoop);else requestAnimFrame(animLoop);}else if(percentAnimComplete<config.animationStopValue)if(config.animationForceSetTimeOut)requestAnimFrameSetTimeOut(animLoop);else requestAnimFrame(animLoop);else if((animationCount<config.animationCount||config.animationCount==0)&&(ctx.firstPass%10==1)){animationCount++;if(config.animationBackward&&multAnim==1){percentAnimComplete-=animFrameAmount;multAnim=-1;}else{multAnim=1;cntiter=beginAnim-1;percentAnimComplete=beginAnimPct-animFrameAmount;}window.setTimeout(animLoop,config.animationPauseTime*1000);}else{if(!testRedraw(ctx,data,config))if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,animationCount+1,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}}}function animationLoop(config,legendMsr,drawScale,drawData,ctx,clrx,clry,clrwidth,clrheight,midPosX,midPosY,borderX,borderY,data,statData){var cntiter=0;var animationCount=0-(config.animationCount==0);var backwardAnimation=false;var multIter=1;if(isIE()<9&&isIE()!=false)config.animation=false;var animationIncrementByIteration=(config.animation&&ctx.firstPass==1)?1/CapValue(config.animationSteps,Number.MAX_VALUE,1):1;var currentAnimationValue=(config.animation)?0:1;if(config.animation&&config.animationStartValue>0&&config.animationStartValue<=1)while(currentAnimationValue<config.animationStartValue){cntiter++;currentAnimationValue+=animationIncrementByIteration;}if(typeof drawScale!=="function")drawScale=function(){};if(config.saveBackImage)ctx.savedImage=ctx.getImageData(0,0,ctx.canvas.width,ctx.canvas.height);if(config.clearRect)if(ctx.firstPass%10!=1||config.animation==false)animLoop();else if(config.animationForceSetTimeOut)requestAnimFrameSetTimeOut(animLoop);else requestAnimFrame(animLoop);else animLoop();function animLoop(){var animationCompleted=false;currentAnimationValue+=animationIncrementByIteration;cntiter+=multIter;if(currentAnimationValue>=1-config.zeroValue)currentAnimationValue=1;drawFrame();if(currentAnimationValue>=config.animationStopValue-config.zeroValue){if(config.animationCount!=0)animationCount++;currentAnimationValue=0;if(config.animationBackward){backwardAnimation=(backwardAnimation==false);multIter=1-2*backwardAnimation;}if(config.animation==false||animationCount>=config.animationCount||ctx.firstPass%10!=1)animationCompleted=true;if(!animationCompleted){if(!config.animationBackward)cntiter=0;window.setTimeout(animLoop,config.animationPauseTime*1000);}else{if(!testRedraw(ctx,data,config))if(typeof config.onAnimationComplete=="function"&&(config.alwaysRunFunctionAtCompletion==true||ctx.runanimationcompletefunction==true)){config.onAnimationComplete(ctx,config,data,1,animationCount+1,statData);ctx.runanimationcompletefunction=false;}ctx.firstPass=9;close_result(ctx);}}else if(config.animationForceSetTimeOut)requestAnimFrameSetTimeOut(animLoop);else requestAnimFrame(animLoop);}function drawFrame(){var easingFunction=animationOptions[config.animationEasing];var easeAdjustedAnimationPercent=(config.animation)?CapValue(easingFunction(currentAnimationValue),null,0):1;if(1*cntiter>=1*CapValue(config.animationSteps,Number.MAX_VALUE,1)||config.animation==false||ctx.firstPass%10!=1)easeAdjustedAnimationPercent=1;else{if(easeAdjustedAnimationPercent>=1)easeAdjustedAnimationPercent=0.9999;}animationValues={animationGlobal:currentAnimationValue,yAxis:computeAnimation(currentAnimationValue,config,config.animationYAxis,config.animationYAxisEasing,-1,-1,null,null,""),radius:computeAnimation(currentAnimationValue,config,config.animationRadius,config.animationRadiusEasing,-1,-1,null,null,""),rotate:computeAnimation(currentAnimationValue,config,config.animationRotate,config.animationRotateEasing,-1,-1,null,null,"")};if(config.animation&&!(isIE()<9&&isIE()!=false)&&config.clearRect)ctx.clearRect(clrx,clry,clrwidth,clrheight);dispCrossImage(ctx,config,midPosX,midPosY,borderX,borderY,false,data,animationValues.animationGlobal,cntiter);dispCrossText(ctx,config,midPosX,midPosY,borderX,borderY,false,data,animationValues.animationGlobal,cntiter);if(typeof config.beforeDrawFunction=="function")config.beforeDrawFunction("BEFOREDRAWFUNCTION",ctx,data,statData,-1,-1,{animationValue:animationValues.animationGlobal,cntiter,config,borderX,borderY,midPosX,midPosY});if(config.saveBackImage){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);ctx.putImageData(ctx.savedImage,0,0);}if(config.scaleOverlay){drawData(animationValues);if(typeof config.endDrawDataFunction=="function")config.endDrawDataFunction("ENDDATAFUNCTION",ctx,data,statData,-1,-1,{animationValue:animationValues.animationGlobal,cntiter,config,borderX,borderY,midPosX,midPosY});drawScale();if(typeof config.endDrawScaleFunction=="function")config.endDrawScaleFunction("ENDSCALEFUNCTION",ctx,data,statData,-1,-1,{animationValue:animationValues.animationGlobal,cntiter,config,borderX,borderY,midPosX,midPosY});}else{drawScale();if(typeof config.endDrawScaleFunction=="function")config.endDrawScaleFunction("ENDSCALEFUNCTION",ctx,data,statData,-1,-1,{animationValue:animationValues.animationGlobal,cntiter,config,borderX,borderY,midPosX,midPosY});drawData(animationValues);if(typeof config.endDrawDataFunction=="function")config.endDrawDataFunction("ENDDATAFUNCTION",ctx,data,statData,-1,-1,{animationValue:animationValues.animationGlobal,cntiter,config,borderX,borderY,midPosX,midPosY});}dispCrossImage(ctx,config,midPosX,midPosY,borderX,borderY,true,data,animationValues.animationGlobal,cntiter);dispCrossText(ctx,config,midPosX,midPosY,borderX,borderY,true,data,animationValues.animationGlobal,cntiter);drawLegend(legendMsr,data,config,ctx,ctx.tpchart,cntiter);}}var requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};})();var requestAnimFrameSetTimeOut=(function(){return function(callback){window.setTimeout(callback,1000/60);};})();function computeScale(logarithm,steps_lim,mix_bar_line,mathFct,multAxis,cumulate,data,config,ctx,statData,availableHeight){var upperValue1=-Number.MAX_VALUE;var lowerValue1=Number.MAX_VALUE;var upperValue2=-Number.MAX_VALUE;var lowerValue2=Number.MAX_VALUE;var fnd_axis1;var fnd_axis2;var fnd_positif1;var fnd_negatif1;var fnd_positif2;var fnd_negatif2;var cum_positif1;var cum_negatif1;var cum_positif2;var cum_negatif2;var first_axis=false;var second_axis=false;var mathValueHeight;var first_positif1,first_negatif1;var first_positif2,first_negatif2;var i,j,maxi,axis;maxi=-1;var mathFctName;var mathValueHeightVal=[];if(mathFct)for(var i=0;i<data.datasets.length;i++){mathFctName=data.datasets[i].drawMathDeviation;if(typeof eval(mathFctName)=="function"){var parameter={data,datasetNr:i};mathValueHeightVal[i]=window[mathFctName](parameter);}else mathValueHeightVal[i]=0;}for(i=0;i<data.datasets.length;i++)maxi=Math.max(data.datasets[i].data.length,maxi);for(j=0;j<maxi;j++){cum_positif1=0;cum_negatif1=0;fnd_axis1=false;fnd_axis2=false;fnd_positif1=false;fnd_negatif1=false;cum_positif2=0;cum_negatif2=0;fnd_positif2=false;fnd_negatif2=false;for(i=0;i<data.datasets.length;i++){if(mathFct)if(typeof mathValueHeightVal[i]=="object")mathValueHeight=mathValueHeightVal[i][Math.min(mathValueHeightVal[i].length,j)];else mathValueHeight=mathValueHeightVal[i];else mathValueHeight=0;if(typeof data.datasets[i].data[j]=="undefined")continue;axis=1;if(!cumulate){if(multAxis&&data.datasets[i].axis==2)axis=2;}else{if(mix_bar_line&&multAxis&&cumulate&&data.datasets[i].axis==2&&data.datasets[i].type=="Line")axis=2;}if(!cumulate||(cumulate&&mix_bar_line&&data.datasets[i].type=="Line"))if(axis==1){first_axis=true;fnd_axis1=true;upperValue1=Math.max(upperValue1,1*data.datasets[i].data[j]+mathValueHeight);lowerValue1=Math.min(lowerValue1,1*data.datasets[i].data[j]-mathValueHeight);}else{fnd_axis2=true;second_axis=true;upperValue2=Math.max(upperValue2,1*data.datasets[i].data[j]+mathValueHeight);lowerValue2=Math.min(lowerValue2,1*data.datasets[i].data[j]-mathValueHeight);}else if(axis==1){fnd_axis1=true;first_axis=true;if(1*data.datasets[i].data[j]==0&&!first_positif1&&!first_negatif1){first_positif1=0;first_negatif1=0;fnd_positif1=true;fnd_negatif1=true;}else if(1*data.datasets[i].data[j]>0){if(!fnd_positif1)first_positif1=1*data.datasets[i].data[j];fnd_positif1=true;cum_positif1+=1*data.datasets[i].data[j];}else{if(1*data.datasets[i].data[j]<0){if(!fnd_negatif1)first_negatif1=1*data.datasets[i].data[j];fnd_negatif1=true;cum_negatif1+=1*data.datasets[i].data[j];}}}else{fnd_axis2=true;second_axis=true;if(1*data.datasets[i].data[j]==0&&!first_positif2&&!first_negatif2){first_positif2=0;fnd_positif2=true;}else if(1*data.datasets[i][j]>0){if(!fnd_positif2)first_positif2=1*data.datasets[i].data[j];fnd_positif2=true;cum_positif2+=1*data.datasets[i].data[j];}else{if(1*data.datasets[i][j]<0){if(!fnd_negatif2)first_negatif2=1*data.datasets[i].data[j];fnd_negatif2=true;cum_negatif2+=1*data.datasets[i].data[j];}}}}if(cumulate){if(fnd_axis1){if(fnd_positif1)upperValue1=Math.max(upperValue1,cum_positif1+mathValueHeight);else{if(fnd_negatif1)upperValue1=Math.max(upperValue1,cum_negatif1+mathValueHeight,first_negatif1);}if(fnd_negatif1)lowerValue1=Math.min(lowerValue1,cum_negatif1-mathValueHeight);else{if(fnd_positif1)lowerValue1=Math.min(lowerValue1,cum_positif1-mathValueHeight,first_positif1);}}if(fnd_axis2){if(fnd_positif2)upperValue2=Math.max(upperValue2,cum_positif2+mathValueHeight);else{if(fnd_negatif2)upperValue2=Math.max(upperValue2,cum_negatif2+mathValueHeight,first_negatif1);}if(fnd_negatif2)lowerValue2=Math.min(lowerValue2,cum_negatif2-mathValueHeight);else{if(fnd_positif2)lowerValue2=Math.min(lowerValue2,cum_positif2-mathValueHeight);}}}}if(!second_axis){upperValue2=upperValue1;lowerValue2=lowerValue1;}else{if(!first_axis){upperValue1=upperValue2;lowerValue1=lowerValue2;}}if(upperValue1<lowerValue1){if(upperValue2<lowerValue2){upperValue2=0;lowerValue2=0;}upperValue1=upperValue2;lowerValue1=lowerValue2;}if(upperValue2<lowerValue2){upperValue2=upperValue1;lowerValue2=upperValue2;}function correctValue(upperValue,lowerValue,config){if(Math.abs(upperValue-lowerValue)<config.zeroValue){if(Math.abs(upperValue)<config.zeroValue)upperValue=0.9;if(upperValue>0){upperValue=upperValue*1.1;lowerValue=lowerValue*0.9;}else{upperValue=upperValue*0.9;lowerValue=lowerValue*1.1;}}return {upperValue,lowerValue};}var value1=correctValue(upperValue1,lowerValue1,config);var value2=correctValue(upperValue2,lowerValue2,config);upperValue1=value1.upperValue;lowerValue1=value1.lowerValue;upperValue2=value2.upperValue;lowerValue2=value2.lowerValue;if(typeof config.graphMin=="function")lowerValue1=setOptionValue(true,true,1,"GRAPHMIN",ctx,data,statData,undefined,config.graphMin,"graphMin",-1,-1,{nullValue:true});else{if(!isNaN(config.graphMin))if(config.forceGraphMin)lowerValue1=config.graphMin;else lowerValue1=Math.min(lowerValue1,config.graphMin);}if(typeof config.graphMax=="function")upperValue1=setOptionValue(true,true,1,"GRAPHMAX",ctx,data,statData,undefined,config.graphMax,"graphMax",-1,-1,{nullValue:true});else{if(!isNaN(config.graphMax))if(config.forceGraphMax)upperValue1=config.graphMax;else upperValue1=Math.max(upperValue1,config.graphMax);}if(typeof config.graphMin2=="function")lowerValue2=setOptionValue(true,true,1,"GRAPHMIN",ctx,data,statData,undefined,config.graphMin2,"graphMin2",-1,-1,{nullValue:true});else{if(!isNaN(config.graphMin2))if(config.forceGraphMin2)lowerValue2=config.graphMin2;else lowerValue2=Math.min(lowerValue2,config.graphMin2);}if(typeof config.graphMax2=="function")upperValue2=setOptionValue(true,true,1,"GRAPHMAX",ctx,data,statData,undefined,config.graphMax2,"graphMax2",-1,-1,{nullValue:true});else{if(!isNaN(config.graphMax2))if(config.forceGraphMax2)upperValue2=config.graphMax2;else upperValue2=Math.max(upperValue2,config.graphMax2);}if(upperValue1<lowerValue1)lowerValue1=upperValue1-1;if(upperValue2<lowerValue2)lowerValue2=upperValue2-1;var maxSteps=undefined;var minSteps=undefined;if(steps_lim){labelHeight=(Math.ceil(ctx.chartTextScale*config.scaleFontSize));scaleHeight=availableHeight;maxSteps=Math.floor((scaleHeight/(labelHeight*0.66)));minSteps=Math.floor((scaleHeight/labelHeight*0.5));}else{}var logarithm1,logarithm2,orderOfMagnitude;if(!logarithm||config.logarithmic===false||lowerValue1<0||config.scaleOverride)logarithm1=false;else{logarithm1=true;OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(upperValue1)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(lowerValue1)));if(config.logarithmic=="fuzzy"&&OrderOfMagnitude<4)logarithmic1=false;}if(!logarithm||config.logarithmic2===false||lowerValue2<0||config.scaleOverride2)logarithm2=false;else{logarithm2=true;OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(upperValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(lowerValue2)));if(config.logarithmic2=="fuzzy"&&OrderOfMagnitude<4)logarithmic2=false;}var labelTemplateString1="";var labelTemplateString2="";var scaleStartValue,scaleSteps,scaleStepWidth;var scaleAxisData1,scaleAxisData2;labelTemplateString1=(config.scaleShowLabels)?config.scaleLabel:"";if(!config.scaleOverride)if((maxSteps>0&&minSteps>0)||typeof maxSteps=="undefined"){scaleAxisData1=calculateScale(logarithm1,config.yAxisMinimumInterval,config,maxSteps,minSteps,upperValue1,lowerValue1,steps_lim);if(config.forceScale=="steps"&&typeof config.scaleSteps=="number"){scaleSteps=setOptionValue(true,true,1,"SCALESTEPS",ctx,data,statData,undefined,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:true});if(scaleSteps<=0)scaleSteps=1;scaleAxisData1={nbOfStepsAxis:scaleSteps,stepWidth:(scaleAxisData1.maxAxis-scaleAxisData1.minAxis)/scaleSteps,minAxis:scaleAxisData1.minAxis,maxAxis:scaleAxisData1.maxAxis};}else{if(config.forceScale=="stepWidth"&&typeof config.scaleStepWidth=="number"){scaleStepWidth=setOptionValue(true,true,1,"SCALESTEPWIDTH",ctx,data,statData,undefined,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:true});if(scaleStepWidth<=0)scaleStepWidth=1;scaleSteps=Math.ceil((scaleAxisData1.maxAxis-scaleAxisData1.minAxis)/scaleStepWidth);scaleAxisData1.maxAxis=scaleAxisData1.minAxis+scaleSteps*scaleStepWidth;if(!second_axis)upperValue2=scaleAxisData1.maxAxis;scaleAxisData1={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleAxisData1.minAxis,maxAxis:scaleAxisData1.maxAxis};}}}else scaleAxisData1={nbOfStepsAxis:0,stepWidth:0,minAxis:0,maxAxis:0};else{scaleStartValue=setOptionValue(true,true,1,"SCALESTARTVALUE",ctx,data,statData,undefined,config.scaleStartValue,"scaleStartValue",-1,-1,{nullValue:true});if(scaleStartValue=="computed")scaleStartValue=lowerValue1;scaleSteps=setOptionValue(true,true,1,"SCALESTEPS",ctx,data,statData,undefined,config.scaleSteps,"scaleSteps",-1,-1,{nullValue:true});scaleStepWidth=setOptionValue(true,true,1,"SCALESTEPWIDTH",ctx,data,statData,undefined,config.scaleStepWidth,"scaleStepWidth",-1,-1,{nullValue:true});scaleAxisData1={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleStartValue,maxAxis:scaleStartValue+scaleSteps*scaleStepWidth};}labelTemplateString2=(config.scaleShowLabels2)?config.scaleLabel2:"";if(multAxis&&(second_axis||config.forceSecondScale))if(!config.scaleOverride2)if((maxSteps>0&&minSteps>0)||typeof maxSteps=="undefined"){scaleAxisData2=calculateScale(logarithm2,config.yAxisMinimumInterval2,config,maxSteps,minSteps,upperValue2,lowerValue2,steps_lim);if(config.forceScale2=="steps"&&typeof config.scaleSteps2=="number"){scaleSteps=setOptionValue(true,true,1,"SCALESTEPS2",ctx,data,statData,undefined,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:true});if(scaleSteps<=0)scaleSteps=1;scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:(scaleAxisData2.maxAxis-scaleAxisData2.minAxis)/scaleSteps,minAxis:scaleAxisData2.minAxis,maxAxis:scaleAxisData2.maxAxis};}else{if(config.forceScale2=="stepWidth"&&typeof config.scaleStepWidth2=="number"){scaleStepWidth=setOptionValue(true,true,1,"SCALESTEPWIDTH2",ctx,data,statData,undefined,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:true});if(scaleStepWidth<=0)scaleStepWidth=1;scaleSteps=Math.ceil((scaleAxisData2.maxAxis-scaleAxisData2.minAxis)/scaleStepWidth);scaleAxisData2.maxAxis=scaleAxisData2.minAxis+scaleSteps*scaleStepWidth;scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleAxisData2.minAxis,maxAxis:scaleAxisData2.maxAxis};}}}else scaleAxisData2={nbOfStepsAxis:0,stepWidth:0,minAxis:0,maxAxis:0};else{scaleStartValue=setOptionValue(true,true,1,"SCALESTARTVALUE2",ctx,data,statData,undefined,config.scaleStartValue2,"scaleStartValue2",-1,-1,{nullValue:true});scaleSteps=setOptionValue(true,true,1,"SCALESTEPS2",ctx,data,statData,undefined,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:true});scaleStepWidth=setOptionValue(true,true,1,"SCALESTEPWIDTH2",ctx,data,statData,undefined,config.scaleStepWidth2,"scaleStepWidth2",-1,-1,{nullValue:true});scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:scaleStepWidth,minAxis:scaleStartValue,maxAxis:scaleStartValue+scaleSteps*scaleStepWidth};}else{scaleAxisData2={nbOfStepsAxis:scaleAxisData1.nbOfStepsAxis,stepWidth:scaleAxisData1.stepWidth,minAxis:scaleAxisData1.minAxis,maxAxis:scaleAxisData1.maxAxis};if(config.forceNbOfStepsAxis2){scaleSteps=setOptionValue(true,true,1,"SCALESTEPS2",ctx,data,statData,undefined,config.scaleSteps2,"scaleSteps2",-1,-1,{nullValue:true});if(scaleSteps<=0)scaleSteps=1;scaleAxisData2={nbOfStepsAxis:scaleSteps,stepWidth:(scaleAxisData2.maxAxis-scaleAxisData2.minAxis)/scaleSteps,minAxis:scaleAxisData2.minAxis,maxAxis:scaleAxisData2.maxAxis};}}return {maxValue:upperValue1,minValue:lowerValue1,maxValue2:upperValue2,minValue2:lowerValue2,maxSteps,minSteps,dbAxis:second_axis,logarithm1,logarithm2,labelTemplateString1,labelTemplateString2,minAxis1:scaleAxisData1.minAxis,maxAxis1:scaleAxisData1.maxAxis,nbOfStepsAxis1:scaleAxisData1.nbOfStepsAxis,stepWidthAxis1:scaleAxisData1.stepWidth,minAxis2:scaleAxisData2.minAxis,maxAxis2:scaleAxisData2.maxAxis,nbOfStepsAxis2:scaleAxisData2.nbOfStepsAxis,stepWidthAxis2:scaleAxisData2.stepWidth};}function populateLabels(logarithm,fmtYLabel,config,labelTemplateString,labels,numberOfSteps,graphMin,graphMax,stepValue){var i;var value=graphMin;var decimalValue=stepValue;if(labelTemplateString)for(i=0;i<numberOfSteps+1;i++){if(logarithm)decimalValue=value;labels.push(tmpl(labelTemplateString,{value:fmtChartJS(config,1*value.toFixed(getDecimalPlaces(decimalValue)),fmtYLabel)},config));if(!logarithm)value+=stepValue;else value*=10;}}function getDecimalPlaces(num){var match=(""+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match)return 0;return Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0));}var cache={};function tmpl(str,data,config){newstr=str;if(newstr.substr(0,config.templatesOpenTag.length)==config.templatesOpenTag)newstr="<%="+newstr.substr(config.templatesOpenTag.length,newstr.length-config.templatesOpenTag.length);if(newstr.substr(newstr.length-config.templatesCloseTag.length,config.templatesCloseTag.length)==config.templatesCloseTag)newstr=newstr.substr(0,newstr.length-config.templatesCloseTag.length)+"%>";return tmplpart2(newstr,data);}function tmplpart2(str,data){var fn=!/\W/.test(str)?cache[str]=cache[str]||tmplpart2(document.getElementById(str).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return data?fn(data):fn;}function calculateScale(logarithmic,yAxisMinimumInterval,config,maxSteps,minSteps,maxValue,minValue,steps_lim){var graphMin,graphMax,graphRange,stepValue,numberOfSteps,valueRange,rangeOrderOfMagnitude,decimalNum;if(!logarithmic){valueRange=maxValue-minValue;rangeOrderOfMagnitude=calculateOrderOfMagnitude(valueRange);if(Math.abs(minValue)>config.zeroValue)graphMin=Math.floor(minValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude);else graphMin=0;if(Math.abs(maxValue)>config.zeroValue)graphMax=Math.ceil(maxValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude);else graphMax=0;if(typeof yAxisMinimumInterval=="number")if(graphMax>=0){graphMin=graphMin-(graphMin%yAxisMinimumInterval);while(graphMin>minValue)graphMin=graphMin-yAxisMinimumInterval;if(graphMax%yAxisMinimumInterval>config.zeroValue&&graphMax%yAxisMinimumInterval<yAxisMinimumInterval-config.zeroValue)graphMax=roundScale(config,(1+Math.floor(graphMax/yAxisMinimumInterval))*yAxisMinimumInterval);while(graphMax<maxValue)graphMax=graphMax+yAxisMinimumInterval;}}else{if(minValue==maxValue)maxValue=maxValue+1;if(minValue==0)minValue=0.01;var minMag=calculateOrderOfMagnitude(minValue);var maxMag=calculateOrderOfMagnitude(maxValue)+1;graphMin=Math.pow(10,minMag);graphMax=Math.pow(10,maxMag);rangeOrderOfMagnitude=maxMag-minMag;}graphRange=graphMax-graphMin;stepValue=Math.pow(10,rangeOrderOfMagnitude);numberOfSteps=Math.round(graphRange/stepValue);if(!logarithmic){var stopLoop=false;if(steps_lim)while(!stopLoop&&(numberOfSteps<minSteps||numberOfSteps>maxSteps))if(numberOfSteps<minSteps){if(typeof yAxisMinimumInterval=="number")if(stepValue/2<yAxisMinimumInterval){stopLoop=true;stepValue=yAxisMinimumInterval;numberOfSteps=Math.ceil(graphRange/stepValue);}if(!stopLoop){stepValue/=2;numberOfSteps=Math.round(graphRange/stepValue);}}else{stepValue*=2;numberOfSteps=Math.round(graphRange/stepValue);}if(typeof yAxisMinimumInterval=="number"){if(stepValue<yAxisMinimumInterval){stepValue=yAxisMinimumInterval;numberOfSteps=Math.ceil(graphRange/stepValue);}if(stepValue%yAxisMinimumInterval>config.zeroValue&&stepValue%yAxisMinimumInterval<yAxisMinimumInterval-config.zeroValue)if((2*stepValue)%yAxisMinimumInterval<config.zeroValue||(2*stepValue)%yAxisMinimumInterval>yAxisMinimumInterval-config.zeroValue){stepValue=2*stepValue;numberOfSteps=Math.ceil(graphRange/stepValue);}else{stepValue=roundScale(config,(1+Math.floor(stepValue/yAxisMinimumInterval))*yAxisMinimumInterval);numberOfSteps=Math.ceil(graphRange/stepValue);}}if(config.graphMaximized==true||config.graphMaximized=="bottom"||typeof config.graphMin!=="undefined")while(graphMin+stepValue<minValue&&numberOfSteps>=3){graphMin+=stepValue;numberOfSteps--;}if(config.graphMaximized==true||config.graphMaximized=="top"||typeof config.graphMax!=="undefined")while(graphMin+(numberOfSteps-1)*stepValue>=maxValue&&numberOfSteps>=3)numberOfSteps--;}else numberOfSteps=rangeOrderOfMagnitude;return {nbOfStepsAxis:numberOfSteps,stepWidth:stepValue,minAxis:graphMin,maxAxis:graphMin+numberOfSteps*stepValue};}function calculateOrderOfMagnitude(val){if(val==0)return 0;return Math.floor(Math.log(val)/Math.LN10);}function roundScale(config,value){var scldec=0;var sscl=""+config.yAxisMinimumInterval;if(sscl.indexOf(".")>0)scldec=sscl.substr(sscl.indexOf(".")).length;return (Math.round(value*Math.pow(10,scldec))/Math.pow(10,scldec));}function Max(array){return Math.max.apply(Math,array);}function Min(array){return Math.min.apply(Math,array);}function Default(userDeclared,valueIfFalse){if(!userDeclared)return valueIfFalse;else return userDeclared;}function CapValue(valueToCap,maxValue,minValue){if(isNumber(maxValue))if(valueToCap>maxValue)return maxValue;if(isNumber(minValue))if(valueToCap<minValue)return minValue;return valueToCap;}function mergeChartConfig(defaults,userDefined){var returnObj={};for(var attrname in defaults)returnObj[attrname]=defaults[attrname];for(var attrnameBis in userDefined)returnObj[attrnameBis]=userDefined[attrnameBis];return returnObj;}function dispCrossText(ctx,config,posX,posY,borderX,borderY,overlay,data,animPC,cntiter){var i,disptxt,txtposx,txtposy,textAlign,textBaseline;for(i=0;i<config.crossText.length;i++)if(config.crossText[i]!=""&&config.crossTextOverlay[Min([i,config.crossTextOverlay.length-1])]==overlay&&((cntiter==1&&config.crossTextIter[Min([i,config.crossTextIter.length-1])]=="first")||config.crossTextIter[Min([i,config.crossTextIter.length-1])]==cntiter||config.crossTextIter[Min([i,config.crossTextIter.length-1])]=="all"||(animPC==1&&config.crossTextIter[Min([i,config.crossTextIter.length-1])]=="last"))){ctx.save();ctx.beginPath();ctx.font=config.crossTextFontStyle[Min([i,config.crossTextFontStyle.length-1])]+" "+(Math.ceil(ctx.chartTextScale*config.crossTextFontSize[Min([i,config.crossTextFontSize.length-1])])).toString()+"px "+config.crossTextFontFamily[Min([i,config.crossTextFontFamily.length-1])];ctx.fillStyle=config.crossTextFontColor[Min([i,config.crossTextFontColor.length-1])];textAlign=config.crossTextAlign[Min([i,config.crossTextAlign.length-1])];textBaseline=config.crossTextBaseline[Min([i,config.crossTextBaseline.length-1])];txtposx=1*Math.ceil(ctx.chartSpaceScale*config.crossTextPosX[Min([i,config.crossTextPosX.length-1])]);txtposy=1*Math.ceil(ctx.chartSpaceScale*config.crossTextPosY[Min([i,config.crossTextPosY.length-1])]);switch(1*config.crossTextRelativePosX[Min([i,config.crossTextRelativePosX.length-1])]){case 0:if(textAlign=="default")textAlign="left";break;case 1:txtposx+=borderX;if(textAlign=="default")textAlign="right";break;case 2:txtposx+=posX;if(textAlign=="default")textAlign="center";break;case -2:txtposx+=context.canvas.width/2;if(textAlign=="default")textAlign="center";break;case 3:txtposx+=txtposx+2*posX-borderX;if(textAlign=="default")textAlign="left";break;case 4:txtposx+=context.canvas.width;if(textAlign=="default")textAlign="right";break;default:txtposx+=posX;if(textAlign=="default")textAlign="center";break;}switch(1*config.crossTextRelativePosY[Min([i,config.crossTextRelativePosY.length-1])]){case 0:if(textBaseline=="default")textBaseline="top";break;case 3:txtposy+=borderY;if(textBaseline=="default")textBaseline="top";break;case 2:txtposy+=posY;if(textBaseline=="default")textBaseline="middle";break;case -2:txtposy+=context.canvas.height/2;if(textBaseline=="default")textBaseline="middle";break;case 1:txtposy+=txtposy+2*posY-borderY;if(textBaseline=="default")textBaseline="bottom";break;case 4:txtposy+=context.canvas.height;if(textBaseline=="default")textBaseline="bottom";break;default:txtposy+=posY;if(textBaseline=="default")textBaseline="middle";break;}ctx.textAlign=textAlign;ctx.textBaseline=textBaseline;ctx.translate(1*txtposx,1*txtposy);var rotateVal=Math.PI*config.crossTextAngle[Min([i,config.crossTextAngle.length-1])]/180;ctx.rotate(rotateVal);if(config.crossText[i].substring(0,1)=="%"){if(typeof config.crossTextFunction=="function")disptxt=config.crossTextFunction(i,config.crossText[i],ctx,config,posX,posY,borderX,borderY,overlay,data,animPC);}else disptxt=config.crossText[i];setTextBordersAndBackground(ctx,disptxt,Math.ceil(ctx.chartTextScale*config.crossTextFontSize[Min([i,config.crossTextFontSize.length-1])]),0,0,config.crossTextBorders[Min([i,config.crossTextBorders.length-1])],config.crossTextBordersSelection[Min([i,config.crossTextBorders.length-1])],config.crossTextBordersColor[Min([i,config.crossTextBordersColor.length-1])],Math.ceil(ctx.chartLineScale*config.crossTextBordersWidth[Min([i,config.crossTextBordersWidth.length-1])]),Math.ceil(ctx.chartSpaceScale*config.crossTextBordersXSpace[Min([i,config.crossTextBordersXSpace.length-1])]),Math.ceil(ctx.chartSpaceScale*config.crossTextBordersYSpace[Min([i,config.crossTextBordersYSpace.length-1])]),config.crossTextBordersStyle[Min([i,config.crossTextBordersStyle.length-1])],config.crossTextBackgroundColor[Min([i,config.crossTextBackgroundColor.length-1])],"CROSSTEXT",config.crossTextBordersRadius);if((animPC==1&&config.crossTextIter[Min([i,config.crossTextIter.length-1])]=="all")||config.crossTextIter[Min([i,config.crossTextIter.length-1])]!="last")ctx.fillTextMultiLine(disptxt,0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.crossTextFontSize[Min([i,config.crossTextFontSize.length-1])]),true,config.detectMouseOnText,ctx,"CROSSTEXT_TEXTMOUSE",rotateVal,1*txtposx,1*txtposy,i,-1);else ctx.fillTextMultiLine(disptxt,0,0,ctx.textBaseline,Math.ceil(ctx.chartTextScale*config.crossTextFontSize[Min([i,config.crossTextFontSize.length-1])]),true,false,ctx,"CROSSTEXT_TEXTMOUSE",rotateVal,1*txtposx,1*txtposy,i,-1);ctx.restore();}}function dispCrossImage(ctx,config,posX,posY,borderX,borderY,overlay,data,animPC,cntiter){var i,disptxt,imageposx,imageposy,imageAlign,imageBaseline;for(i=0;i<config.crossImage.length;i++)if(typeof config.crossImage[i]!="undefined"&&config.crossImageOverlay[Min([i,config.crossImageOverlay.length-1])]==overlay&&((cntiter==-1&&config.crossImageIter[Min([i,config.crossImageIter.length-1])]=="background")||(cntiter==1&&config.crossImageIter[Min([i,config.crossImageIter.length-1])]=="first")||config.crossImageIter[Min([i,config.crossImageIter.length-1])]==cntiter||(cntiter!=-1&&config.crossImageIter[Min([i,config.crossImageIter.length-1])]=="all")||(animPC==1&&config.crossImageIter[Min([i,config.crossImageIter.length-1])]=="last"))){ctx.save();ctx.beginPath();imageAlign=config.crossImageAlign[Min([i,config.crossImageAlign.length-1])];imageBaseline=config.crossImageBaseline[Min([i,config.crossImageBaseline.length-1])];imageposx=1*Math.ceil(ctx.chartSpaceScale*config.crossImagePosX[Min([i,config.crossImagePosX.length-1])]);imageposy=1*Math.ceil(ctx.chartSpaceScale*config.crossImagePosY[Min([i,config.crossImagePosY.length-1])]);switch(1*config.crossImageRelativePosX[Min([i,config.crossImageRelativePosX.length-1])]){case 0:if(imageAlign=="default")imageAlign="left";break;case 1:imageposx+=borderX;if(imageAlign=="default")imageAlign="right";break;case 2:imageposx+=posX;if(imageAlign=="default")imageAlign="center";break;case -2:imageposx+=context.canvas.width/2;if(imageAlign=="default")imageAlign="center";break;case 3:imageposx+=imageposx+2*posX-borderX;if(imageAlign=="default")imageAlign="left";break;case 4:imageposx+=context.canvas.width;if(imageAlign=="default")imageAlign="right";break;default:imageposx+=posX;if(imageAlign=="default")imageAlign="center";break;}switch(1*config.crossImageRelativePosY[Min([i,config.crossImageRelativePosY.length-1])]){case 0:if(imageBaseline=="default")imageBaseline="top";break;case 3:imageposy+=borderY;if(imageBaseline=="default")imageBaseline="top";break;case 2:imageposy+=posY;if(imageBaseline=="default")imageBaseline="middle";break;case -2:imageposy+=context.canvas.height/2;if(imageBaseline=="default")imageBaseline="middle";break;case 1:imageposy+=imageposy+2*posY-borderY;if(imageBaseline=="default")imageBaseline="bottom";break;case 4:imageposy+=context.canvas.height;if(imageBaseline=="default")imageBaseline="bottom";break;default:imageposy+=posY;if(imageBaseline=="default")imageBaseline="middle";break;}var imageWidth=config.crossImage[i].width;switch(imageAlign){case "left":break;case "right":imageposx-=imageWidth;break;case "center":imageposx-=(imageWidth/2);break;default:break;}var imageHeight=config.crossImage[i].height;switch(imageBaseline){case "top":break;case "bottom":imageposy-=imageHeight;break;case "middle":imageposy-=(imageHeight/2);break;default:break;}ctx.translate(1*imageposx,1*imageposy);ctx.rotate(Math.PI*config.crossImageAngle[Min([i,config.crossImageAngle.length-1])]/180);ctx.drawImage(config.crossImage[i],0,0);ctx.restore();}}function setMeasures(data,config,ctx,canvasheight,canvaswidth,ylabels,ylabels2,reverseLegend,reverseAxis,drawAxis,legendBox,typegraph){var height=canvasheight;var width=canvaswidth;if(window.devicePixelRatio>1){height=height/window.devicePixelRatio;width=width/window.devicePixelRatio;}if(config.canvasBackgroundColor!="none")ctx.canvas.style.background=config.canvasBackgroundColor;var i,j,k;var borderHeight=0;var borderTHeight=0;var borderBHeight=0;var borderRHeight=0;var borderLHeight=0;var graphTitleHeight=0;var graphTitlePosY=0;var graphSubTitleHeight=0;var graphSubTitlePosY=0;var footNoteHeight=0;var footNotePosY=0;var currentPosition,topNotUsableHeight,bottomNotUsableHeight,leftNotUsableWidth,rightNotUsableWidth,availableWidth,availableHeight;availableWidth=width;availableHeight=height;if(config.canvasBorders&&config.canvasBordersSelection>0){borderHeight=Math.ceil(ctx.chartLineScale*config.canvasBordersWidth);if(isBorder(config.canvasBordersSelection,"TOP"))borderTHeight=borderHeight;if(isBorder(config.canvasBordersSelection,"BOTTOM"))borderBHeight=borderHeight;if(isBorder(config.canvasBordersSelection,"RIGHT"))borderRHeight=borderHeight;if(isBorder(config.canvasBordersSelection,"LEFT"))borderLHeight=borderHeight;}currentPosition=0+borderTHeight+Math.ceil(ctx.chartSpaceScale*config.spaceTop);if(config.graphTitle.trim()!=""){graphTitleHeight=(Math.ceil(ctx.chartTextScale*config.graphTitleFontSize))*(config.graphTitle.split("\n").length||1)+Math.ceil(ctx.chartSpaceScale*config.graphTitleSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.graphTitleSpaceAfter);graphTitlePosY=currentPosition+Math.ceil(ctx.chartSpaceScale*config.graphTitleSpaceBefore);if(config.graphTitleBackgroundColor!="none"||config.graphTitleBorders){graphTitleHeight+=(isBorder(config.graphTitleBordersSelection,"TOP")+isBorder(config.graphTitleBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartSpaceScale*config.graphTitleBordersYSpace));graphTitlePosY+=isBorder(config.graphTitleBordersSelection,"TOP")*Math.ceil(ctx.chartSpaceScale*config.graphTitleBordersYSpace);}if(config.graphTitleBorders){graphTitleHeight+=(isBorder(config.graphTitleBordersSelection,"TOP")+isBorder(config.graphTitleBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartLineScale*config.graphTitleBordersWidth));graphTitlePosY+=isBorder(config.graphTitleBordersSelection,"TOP")*Math.ceil(ctx.chartLineScale*config.graphTitleBordersWidth);}currentPosition+=graphTitleHeight;}if(config.graphSubTitle.trim()!=""){graphSubTitleHeight=(Math.ceil(ctx.chartTextScale*config.graphSubTitleFontSize))*(config.graphSubTitle.split("\n").length||1)+Math.ceil(ctx.chartSpaceScale*config.graphSubTitleSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.graphSubTitleSpaceAfter);graphSubTitlePosY=currentPosition+Math.ceil(ctx.chartSpaceScale*config.graphSubTitleSpaceBefore);if(config.graphSubTitleBackgroundColor!="none"||config.graphSubTitleBorders){graphSubTitleHeight+=2*(Math.ceil(ctx.chartSpaceScale*config.graphSubTitleBordersYSpace));graphSubTitlePosY+=Math.ceil(ctx.chartSpaceScale*config.graphSubTitleBordersYSpace);}if(config.graphSubTitleBorders){graphSubTitleHeight+=(isBorder(config.graphTitleBordersSelection,"TOP")+isBorder(config.graphTitleBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartLineScale*config.graphSubTitleBordersWidth));graphSubTitlePosY+=isBorder(config.graphTitleBordersSelection,"TOP")*Math.ceil(ctx.chartLineScale*config.graphSubTitleBordersWidth);}currentPosition+=graphSubTitleHeight;}topNotUsableHeight=currentPosition;availableHeight-=topNotUsableHeight;currentPosition=height-borderBHeight-Math.ceil(ctx.chartSpaceScale*config.spaceBottom);if(typeof (config.footNote)!="undefined")if(config.footNote.trim()!=""){footNoteHeight=(Math.ceil(ctx.chartTextScale*config.footNoteFontSize))*(config.footNote.split("\n").length||1)+Math.ceil(ctx.chartSpaceScale*config.footNoteSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.footNoteSpaceAfter);footNotePosY=currentPosition-Math.ceil(ctx.chartSpaceScale*config.footNoteSpaceAfter);if(config.footNoteBackgroundColor!="none"||config.footNoteBorders){footNoteHeight+=2*(Math.ceil(ctx.chartSpaceScale*config.footNoteBordersYSpace));footNotePosY-=Math.ceil(ctx.chartSpaceScale*config.footNoteBordersYSpace);}if(config.footNoteBorders){footNoteHeight+=(isBorder(config.footNoteBordersSelection,"TOP")+isBorder(config.footNoteBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartLineScale*config.footNoteBordersWidth));footNotePosY-=isBorder(config.footNoteBordersSelection,"BOTTOM")*Math.ceil(ctx.chartLineScale*config.footNoteBordersWidth);}currentPosition-=footNoteHeight;}bottomNotUsableHeight=height-currentPosition;availableHeight-=bottomNotUsableHeight;currentPosition=0+borderLHeight+Math.ceil(ctx.chartSpaceScale*config.spaceLeft);leftNotUsableWidth=currentPosition;availableWidth-=leftNotUsableWidth;currentPosition=width-borderRHeight-Math.ceil(ctx.chartSpaceScale*config.spaceRight);rightNotUsableWidth=width-currentPosition;availableWidth-=rightNotUsableWidth;topNotUsableHeight+=Math.ceil(ctx.chartSpaceScale*config.graphSpaceBefore);bottomNotUsableHeight+=Math.ceil(ctx.chartSpaceScale*config.graphSpaceAfter);availableHeight-=(Math.ceil(ctx.chartSpaceScale*config.graphSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.graphSpaceAfter));var nbeltLegend=0;var widestLegend=-99999999;var highestLegend=0;var drawLegendData;if(typeof (config.legend)!="undefined")if(config.legend==true){ctx.font=(Math.ceil(ctx.chartTextScale*config.legendFontSize)).toString()+"px "+config.legendFontFamily;var textLength;for(i=0;i<data.datasets.length;i++){if(!config.legendDrawEmptyData){drawLegendData=false;for(j=0;j<data.datasets[i].data.length;j++)if(typeof (1*data.datasets[i].data[j])=="number")if(1*data.datasets[i].data[j]!=0)drawLegendData=true;}else drawLegendData=true;if(drawLegendData&&typeof (data.datasets[i].title)=="string")if(data.datasets[i].title.trim()!=""){nbeltLegend++;textLength=ctx.measureTextMultiLine(fmtChartJS(config,data.datasets[i].title,config.fmtLegend),Math.ceil(ctx.chartTextScale*config.legendFontSize));widestLegend=Math.max(textLength.textWidth,widestLegend);highestLegend=Math.max(Math.ceil(ctx.chartTextScale*config.legendFontSize),highestLegend);}}widestLegend+=Math.ceil(ctx.chartTextScale*config.legendBlockSize)+Math.ceil(ctx.chartSpaceScale*config.legendSpaceBetweenBoxAndText);if(nbeltLegend==0||(nbeltLegend==1&&!config.showSingleLegend))widestLegend=0;}var legendBorderHeight=0;var legendBorderWidth=0;var spaceLegendHeight=0;var xLegendPos=0;var yLegendPos=0;var nbLegendLines=0;var nbLegendCols=0;var legendHeight=0;var legendWidth=0;var msrLegend;if(widestLegend>-99999998)if(config.legendPosY==0||config.legendPosY==4){var availableLegendWidth,maxLegendOnLine;if(config.legendPosX==1||config.legendPosX==2||config.legendPosX==3)availableLegendWidth=availableWidth-Math.ceil(ctx.chartSpaceScale*Math.ceil(ctx.chartSpaceScale*config.legendSpaceLeftText))-Math.ceil(ctx.chartSpaceScale*config.legendSpaceRightText);else availableLegendWidth=width-borderRHeight-borderLHeight-Math.ceil(ctx.chartSpaceScale*config.spaceLeft)-Math.ceil(ctx.chartSpaceScale*config.spaceRight)-Math.ceil(ctx.chartSpaceScale*Math.ceil(ctx.chartSpaceScale*config.legendSpaceLeftText))-Math.ceil(ctx.chartSpaceScale*config.legendSpaceRightText);if(config.legendBorders==true||config.legendFillColor!="rgba(0,0,0,0)")availableLegendWidth-=(config.legendBorders*(isBorder(config.legendBordersSelection,"RIGHT")+isBorder(config.legendBordersSelection,"LEFT"))*(Math.ceil(ctx.chartLineScale*config.legendBordersWidth))+Math.ceil(ctx.chartSpaceScale*config.legendBordersSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.legendBordersSpaceRight));maxLegendOnLine=Min([Math.floor((availableLegendWidth+Math.ceil(ctx.chartSpaceScale*config.legendSpaceBetweenTextHorizontal))/(widestLegend+Math.ceil(ctx.chartSpaceScale*config.legendSpaceBetweenTextHorizontal))),config.maxLegendCols]);nbLegendLines=Math.ceil(nbeltLegend/maxLegendOnLine);nbLegendCols=Math.ceil(nbeltLegend/nbLegendLines);msrLegend=measureLegend(data,ctx,config,widestLegend,highestLegend,nbLegendLines,nbLegendCols,availableLegendWidth);legendHeight=msrLegend.legendHeight;if(config.legendPosY==0){yLegendPos=topNotUsableHeight-Math.ceil(ctx.chartSpaceScale*config.graphSpaceBefore);topNotUsableHeight+=legendHeight;}else{yLegendPos=height-bottomNotUsableHeight-legendHeight;bottomNotUsableHeight+=legendHeight;}availableHeight-=legendHeight;}else{if(config.legendPosX==0||config.legendPosX==4){var availableLegendHeight,maxLegendOnCols;availableLegendHeight=availableHeight-Math.ceil(ctx.chartSpaceScale*Math.ceil(ctx.chartSpaceScale*config.legendSpaceBeforeText))-Math.ceil(ctx.chartSpaceScale*config.legendSpaceAfterText);availableLegendWidth=availableWidth-Math.ceil(ctx.chartSpaceScale*Math.ceil(ctx.chartSpaceScale*config.legendSpaceLeftText))-Math.ceil(ctx.chartSpaceScale*config.legendSpaceRightText);if(config.legendBorders==true||config.legendFillColor!="rgba(0,0,0,0)")availableLegendHeight-=(config.legendBorders*(isBorder(config.legendBordersSelection,"BOTTOM")+isBorder(config.legendBordersSelection,"TOP"))*(Math.ceil(ctx.chartLineScale*config.legendBordersWidth))+Math.ceil(ctx.chartSpaceScale*config.legendBordersSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.legendBordersSpaceAfter));maxLegendOnCols=Min([Math.floor((availableLegendHeight+Math.ceil(ctx.chartSpaceScale*config.legendSpaceBetweenTextVertical))/(highestLegend+Math.ceil(ctx.chartSpaceScale*config.legendSpaceBetweenTextVertical))),config.maxLegendLines]);nbLegendCols=Math.ceil(nbeltLegend/maxLegendOnCols);nbLegendLines=Math.ceil(nbeltLegend/nbLegendCols);msrLegend=measureLegend(data,ctx,config,widestLegend,highestLegend,nbLegendLines,nbLegendCols,availableLegendWidth);legendWidth=msrLegend.legendWidth;if(config.legendPosX==0){xLegendPos=leftNotUsableWidth;leftNotUsableWidth+=legendWidth;}else{xLegendPos=width-rightNotUsableWidth-legendWidth;rightNotUsableWidth+=legendWidth;}availableWidth-=legendWidth;}}var yAxisUnit2="";if(config.yAxisRight){yAxisUnit2=config.yAxisUnit2;if(yAxisUnit2=="")yAxisUnit2=config.yAxisUnit;}var yAxisUnitPosY=0;var yAxisUnitHeight=0;var yAxisUnitWidth=0;var yAxisUnit2Width=0;if(drawAxis&&((config.yAxisUnit.trim()!=""&&config.yAxisLeft)||(yAxisUnit2.trim()!=""&&config.yAxisRight))){yAxisUnitHeight=(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize))*(config.yAxisUnit.split("\n").length||1)+Math.ceil(ctx.chartSpaceScale*config.yAxisUnitSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.yAxisUnitSpaceAfter);ctx.font=config.yAxisUnitFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)).toString()+"px "+config.yAxisUnitFontFamily;var yAxisUnitSize;yAxisUnitSize=ctx.measureTextMultiLine(config.yAxisUnit,(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)));yAxisUnitWidth=yAxisUnitSize.textWidth;yAxisUnitSize=ctx.measureTextMultiLine(yAxisUnit2,(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)));yAxisUnit2Width=yAxisUnitSize.textWidth;yAxisUnitPosY=topNotUsableHeight+Math.ceil(ctx.chartSpaceScale*config.yAxisUnitSpaceBefore)+yAxisUnitSize.textHeight;if(config.yAxisUnitBackgroundColor!="none"||config.yAxisUnitBorders){yAxisUnitHeight+=2*(Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersYSpace));yAxisUnitPosY+=Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersYSpace);}if(config.yAxisUnitBorders){yAxisUnitHeight+=(isBorder(config.yAxisUnitBordersSelection,"TOP")+isBorder(config.yAxisUnitBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartLineScale*config.yAxisUnitBordersWidth));yAxisUnitPosY+=isBorder(config.yAxisUnitBordersSelection,"TOP")*Math.ceil(ctx.chartLineScale*config.yAxisUnitBordersWidth);}topNotUsableHeight+=yAxisUnitHeight;availableHeight-=yAxisUnitHeight;}var widestXLabel=0;var highestXLabel=1;var widestTXLabel=0;var highestTXLabel=1;var xAxisLabelHeight=0;var xTAxisLabelHeight=0;var xAxisLabelPos=0;var xTAxisLabelPos=0;var widestYLabel=0;var highestYLabel=1;var widestYLabel2=0;var highestYLabel2=1;var yAxisLabelWidth=0;var yAxisLabelPosLeft=0;var yAxisLabelPosRight=0;if(drawAxis){var textMsr;ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;widestXLabel=Math.max(1,Math.ceil(ctx.chartTextScale*config.xScaleLabelsMinimumWidth));widestTXLabel=widestXLabel;for(i=0;i<data.labels.length;i++)if(showLabels(ctx,data,config,i)===true){textMsr=ctx.measureTextMultiLine(fmtChartJS(config,data.labels[i],config.fmtXLabel),(Math.ceil(ctx.chartTextScale*config.scaleFontSize)));widestXLabel=Math.max(textMsr.textWidth,widestXLabel);highestXLabel=Math.max(textMsr.textHeight,highestXLabel);}if(typeof data.Labels2=="object"&&config.xAxisBottom&&config.xAxisTop){ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;for(i=0;i<data.Labels2.length;i++)if(showLabels(ctx,data,config,i)===true){textMsr=ctx.measureTextMultiLine(fmtChartJS(config,data.Labels2[i],config.fmtTopXLabel),(Math.ceil(ctx.chartTextScale*config.scaleFontSize)));widestTXLabel=Math.max(textMsr.textWidth,widestTXLabel);highestTXLabel=Math.max(textMsr.textHeight,highestTXLabel);}}else{widestTXLabel=widestXLabel;highestTXLabel=highestXLabel;}if(typeof (config.xAxisLabel)!="undefined"&&config.xAxisBottom)if(config.xAxisLabel.trim()!=""){xAxisLabelHeight=(Math.ceil(ctx.chartTextScale*config.xAxisFontSize))*(config.xAxisLabel.split("\n").length||1)+Math.ceil(ctx.chartSpaceScale*config.xAxisLabelSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.xAxisLabelSpaceAfter);xAxisLabelPos=(height-bottomNotUsableHeight)-Math.ceil(ctx.chartSpaceScale*config.xAxisLabelSpaceAfter);if(config.xAxisLabelBackgroundColor!="none"||config.footNoteBorders){xAxisLabelHeight+=2*(Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersYSpace));xAxisLabelPos-=Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersYSpace);}if(config.xAxisLabelBorders){xAxisLabelHeight+=(isBorder(config.xAxisLabelBordersSelection,"TOP")+isBorder(config.xAxisLabelBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartLineScale*config.xAxisLabelBordersWidth));xAxisLabelPos-=isBorder(config.xAxisLabelBordersSelection,"BOTTOM")*Math.ceil(ctx.chartLineScale*config.xAxisLabelBordersWidth);}}var tLabelT;tLabelT=config.xAxisLabel;if(typeof (config.xTAxisLabel)!="undefined"&&config.xAxisTop)if(config.xTAxisLabel.trim()!="")tLabelT=config.xTAxisLabel;if(typeof (tLabelT)!="undefined"&&config.xAxisTop)if(tLabelT.trim()!=""){xTAxisLabelHeight=(Math.ceil(ctx.chartTextScale*config.xAxisFontSize))*(tLabelT.split("\n").length||1)+Math.ceil(ctx.chartSpaceScale*config.xAxisLabelSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.xAxisLabelSpaceAfter);xTAxisLabelPos=topNotUsableHeight+Math.ceil(ctx.chartSpaceScale*config.xAxisLabelSpaceBefore);if(config.xAxisLabelBackgroundColor!="none"){xTAxisLabelHeight+=2*(Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersYSpace));xTAxisLabelPos+=Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersYSpace);}if(config.xAxisLabelBorders){xTAxisLabelHeight+=(isBorder(config.xAxisLabelBordersSelection,"TOP")+isBorder(config.xAxisLabelBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartLineScale*config.xAxisLabelBordersWidth));xTAxisLabelPos+=isBorder(config.xAxisLabelBordersSelection,"TOP")*Math.ceil(ctx.chartLineScale*config.xAxisLabelBordersWidth);}}widestYLabel=Math.max(1,Math.ceil(ctx.chartTextScale*config.yScaleLabelsMinimumWidth));widestYLabel2=widestYLabel;if(ylabels!=null&&ylabels!="nihil"){ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;for(i=ylabels.length-1;i>=0;i--)if(typeof (ylabels[i])=="string")if(showYLabels(ctx,data,config,i,ylabels[i]))if(ylabels[i].trim()!=""){textMsr=ctx.measureTextMultiLine(ylabels[i],(Math.ceil(ctx.chartTextScale*config.scaleFontSize)));widestYLabel=Math.max(widestYLabel,textMsr.textWidth);highestYLabel=Math.max(highestYLabel,textMsr.textHeight);}}if(ylabels2!=null&&config.yAxisRight){ctx.font=config.scaleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.scaleFontSize)).toString()+"px "+config.scaleFontFamily;for(i=ylabels2.length-1;i>=0;i--)if(typeof (ylabels2[i])=="string")if(showYLabels(ctx,data,config,i,ylabels2[i])){textMsr=ctx.measureTextMultiLine(ylabels2[i],(Math.ceil(ctx.chartTextScale*config.scaleFontSize)));widestYLabel2=Math.max(textMsr.textWidth,widestYLabel2);highestYLabel2=Math.max(textMsr.textHeight,highestYLabel2);}}else{widestYLabel2=widestYLabel;highestYLabel2=highestYLabel;}if(typeof (config.yAxisLabel)!="undefined"&&(config.yAxisRight||config.yAxisLeft))if(config.yAxisLabel.trim()!=""){yAxisFontSize=config.yAxisFontSize;if(config.yAxisRight)if(config.yAxisFontSize2>config.yAxisFontSize)yAxisFontSize=config.yAxisFontSize2;yAxisLabelWidth=(Math.ceil(ctx.chartTextScale*yAxisFontSize))*(config.yAxisLabel.split("\n").length||1)+Math.ceil(ctx.chartSpaceScale*config.yAxisLabelSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisLabelSpaceRight);yAxisLabelPosLeft=leftNotUsableWidth+Math.ceil(ctx.chartSpaceScale*config.yAxisLabelSpaceLeft)+(Math.ceil(ctx.chartTextScale*yAxisFontSize));yAxisLabelPosRight=(width-rightNotUsableWidth)-Math.ceil(ctx.chartSpaceScale*config.yAxisLabelSpaceLeft)-(Math.ceil(ctx.chartTextScale*yAxisFontSize));if(config.yAxisLabelBackgroundColor!="none"||config.yAxisLabelBorders){yAxisLabelWidth+=2*(Math.ceil(ctx.chartSpaceScale*config.yAxisLabelBordersYSpace));yAxisLabelPosLeft+=Math.ceil(ctx.chartSpaceScale*config.yAxisLabelBordersYSpace);yAxisLabelPosRight-=Math.ceil(ctx.chartSpaceScale*config.yAxisLabelBordersYSpace);}if(config.yAxisLabelBorders){yAxisLabelWidth+=(isBorder(config.yAxisLabelBordersSelection,"TOP")+isBorder(config.yAxisLabelBordersSelection,"BOTTOM"))*(Math.ceil(ctx.chartLineScale*config.yAxisLabelBordersWidth));yAxisLabelPosLeft+=isBorder(config.yAxisLabelBordersSelection,"TOP")*Math.ceil(ctx.chartLineScale*config.yAxisLabelBordersWidth);yAxisLabelPosRight-=isBorder(config.yAxisLabelBordersSelection,"TOP")*Math.ceil(ctx.chartLineScale*config.yAxisLabelBordersWidth);}}}var rotateLabels=0;var rotateTLabels=0;var xLabelWidth=0;var xTLabelWidth=0;var xLabelHeight=0;var xTLabelHeight=0;var xLabelPos=0;var xTLabelPos=0;var widestLabel,highestLabel,nblab,labelAvailableWidth;if(drawAxis&&config.xAxisBottom){labelAvailableWidth=availableWidth;if(reverseAxis==false){widestLabel=widestXLabel;highestLabel=highestXLabel;nblab=data.labels.length;if(config.yAxisLeft==true)labelAvailableWidth-=(widestYLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));if(config.yAxisRight==true)labelAvailableWidth-=(widestYLabel2+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));}else{widestLabel=widestYLabel;highestLabel=highestYLabel;nblab=ylabels.length;if(config.yAxisLeft==true)labelAvailableWidth-=(widestXLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));if(config.yAxisRight==true)labelAvailableWidth-=(widestTXLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));}if(typeof (config.yAxisLabel)!="undefined")if(config.yAxisLabel.trim()!=""){if(config.yAxisRight)labelAvailableWidth-=yAxisLabelWidth;if(config.yAxisLeft)labelAvailableWidth-=yAxisLabelWidth;}if(config.rotateLabels=="smart"){rotateLabels=0;if((labelAvailableWidth+Math.ceil(ctx.chartTextScale*config.xAxisSpaceBetweenLabels))/nblab<(widestLabel+Math.ceil(ctx.chartTextScale*config.xAxisSpaceBetweenLabels))){rotateLabels=45;if(labelAvailableWidth/nblab<Math.abs(Math.cos(rotateLabels*Math.PI/180)*widestLabel))rotateLabels=90;}}else{rotateLabels=config.rotateLabels;if(rotateLabels<0)rotateLabels=0;if(rotateLabels>180)rotateLabels=180;}if(rotateLabels>90)rotateLabels+=180;xLabelHeight=Math.abs(Math.sin(rotateLabels*Math.PI/180)*widestLabel)+Math.abs(Math.sin((rotateLabels+90)*Math.PI/180)*highestLabel);xLabelWidth=Math.abs(Math.cos(rotateLabels*Math.PI/180)*widestLabel)+Math.abs(Math.cos((rotateLabels+90)*Math.PI/180)*highestLabel);xLabelPos=height-bottomNotUsableHeight-xAxisLabelHeight-xLabelHeight-Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceAfter);}if(drawAxis&&config.xAxisTop){labelAvailableWidth=availableWidth;if(reverseAxis==false){widestLabel=widestTXLabel;highestLabel=highestTXLabel;nblab=data.labels.length;if(config.yAxisLeft==true)labelAvailableWidth-=(widestYLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));if(config.yAxisRight==true)labelAvailableWidth-=(widestYLabel2+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));}else{widestLabel=widestYLabel2;highestLabel=highestYLabel2;nblab=ylabels2.length;if(config.yAxisLeft==true)labelAvailableWidth-=(widestXLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));if(config.yAxisRight==true)labelAvailableWidth-=(widestTXLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight));}if(typeof (config.yAxisLabel)!="undefined")if(config.yAxisLabel.trim()!=""){if(config.yAxisRight)labelAvailableWidth-=yAxisLabelWidth;if(config.yAxisLeft)labelAvailableWidth-=yAxisLabelWidth;}if(config.rotateTLabels=="smart"){rotateTLabels=0;if((labelAvailableWidth+Math.ceil(ctx.chartTextScale*config.xAxisSpaceBetweenLabels))/nblab<(widestLabel+Math.ceil(ctx.chartTextScale*config.xAxisSpaceBetweenLabels))){rotateTLabels=45;if(labelAvailableWidth/nblab<Math.abs(Math.cos(rotateTLabels*Math.PI/180)*widestLabel))rotateTLabels=90;}}else{rotateTLabels=config.rotateTLabels;if(rotateTLabels<0)rotateTLabels=0;if(rotateTLabels>180)rotateTLabels=180;}if(rotateLabels>90)rotateLabels+=180;xTLabelHeight=Math.abs(Math.sin(rotateTLabels*Math.PI/180)*widestLabel)+Math.abs(Math.sin((rotateTLabels+90)*Math.PI/180)*highestLabel);xTLabelWidth=Math.abs(Math.cos(rotateTLabels*Math.PI/180)*widestLabel)+Math.abs(Math.cos((rotateTLabels+90)*Math.PI/180)*highestLabel);xTLabelPos=topNotUsableHeight+xTAxisLabelHeight+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceBefore);}var prevLeftNotUsableWidth=leftNotUsableWidth;var prevRightNotUsableWidth=rightNotUsableWidth;if(drawAxis&&config.yAxisLeft)if(reverseAxis==false)leftNotUsableWidth+=yAxisLabelWidth+widestYLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight);else leftNotUsableWidth+=yAxisLabelWidth+widestXLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight);if(drawAxis&&config.yAxisRight)if(reverseAxis==false)rightNotUsableWidth+=yAxisLabelWidth+widestYLabel2+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight);else rightNotUsableWidth+=yAxisLabelWidth+widestTXLabel+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceLeft)+Math.ceil(ctx.chartSpaceScale*config.yAxisSpaceRight);availableWidth=width-leftNotUsableWidth-rightNotUsableWidth;if(drawAxis&&config.xAxisTop)if(reverseAxis==false)topNotUsableHeight+=xTAxisLabelHeight+xTLabelHeight+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceAfter);else{var yTLabelHeight=Math.abs(Math.sin(rotateTLabels*Math.PI/180)*widestYLabel2)+Math.abs(Math.sin((rotateTLabels+90)*Math.PI/180)*highestYLabel2);topNotUsableHeight+=xAxisLabelHeight+yTLabelHeight+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceAfter);}if(drawAxis&&config.xAxisBottom)if(reverseAxis==false)bottomNotUsableHeight+=xAxisLabelHeight+xLabelHeight+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceAfter);else{var yTLabelHeight=Math.abs(Math.sin(rotateLabels*Math.PI/180)*widestYLabel)+Math.abs(Math.sin((rotateLabels+90)*Math.PI/180)*highestYLabel);bottomNotUsableHeight+=xAxisLabelHeight+yTLabelHeight+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceBefore)+Math.ceil(ctx.chartSpaceScale*config.xAxisSpaceAfter);}availableHeight=height-topNotUsableHeight-bottomNotUsableHeight;if(widestLegend>-99999998){if(nbLegendLines==0){availableLegendWidth=availableWidth-Math.ceil(ctx.chartSpaceScale*Math.ceil(ctx.chartSpaceScale*config.legendSpaceLeftText))-Math.ceil(ctx.chartSpaceScale*config.legendSpaceRightText);maxLegendOnLine=Min([Math.floor((availableLegendWidth+Math.ceil(ctx.chartSpaceScale*config.legendSpaceBetweenTextHorizontal))/(widestLegend+Math.ceil(ctx.chartSpaceScale*config.legendSpaceBetweenTextHorizontal))),config.maxLegendCols]);nbLegendLines=Math.ceil(nbeltLegend/maxLegendOnLine);nbLegendCols=Math.ceil(nbeltLegend/nbLegendLines);msrLegend=measureLegend(data,ctx,config,widestLegend,highestLegend,nbLegendLines,nbLegendCols,availableLegendWidth);}legendHeight=msrLegend.legendHeight;legendWidth=msrLegend.legendWidth;switch(config.legendPosY){case 0:break;case 1:yLegendPos=topNotUsableHeight;break;case 2:yLegendPos=topNotUsableHeight+(availableHeight/2)-legendHeight/2;break;case -2:yLegendPos=height/2-legendHeight/2;break;case 3:yLegendPos=height-bottomNotUsableHeight-legendHeight;break;case 4:break;default:yLegendPos=topNotUsableHeight;break;}switch(config.legendPosX){case 0:if(config.legendPosY==0||config.legendPosY==4)xLegendPos=prevLeftNotUsableWidth;break;case 1:xLegendPos=leftNotUsableWidth;break;case 2:xLegendPos=leftNotUsableWidth+(availableWidth)/2-legendWidth/2;break;case -2:xLegendPos=width/2-(legendWidth/2);break;case 3:xLegendPos=width-rightNotUsableWidth-legendWidth;break;case 4:if(config.legendPosY==0||config.legendPosY==4)xLegendPos=width-prevRightNotUsableWidth-legendWidth;break;default:xLegendPos=width-rightNotUsableWidth;break;}}if(drawAxis&&config.yAxisLeft&&yAxisUnitWidth>0)leftNotUsableWidth=Math.max(leftNotUsableWidth,borderLHeight+config.spaceLeft+(config.yAxisUnitBorders&&isBorder(config.yAxisUnitBordersSelection,"LEFT"))*(config.yAxisUnitBordersWidth)+(config.yAxisUnitBackgroundColor!="none"||config.yAxisUnitBorders)*Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersYSpace)+1+yAxisUnitWidth/2);if(drawAxis&&config.yAxisRight&&yAxisUnit2Width>0)rightNotUsableWidth=Math.max(rightNotUsableWidth,borderRHeight+config.spaceRight+(config.yAxisUnitBorders&&isBorder(config.yAxisUnitBordersSelection,"RIGHT"))*(config.yAxisUnitBordersWidth)+(config.yAxisUnitBackgroundColor!="none"||config.yAxisUnitBorders)*Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersYSpace)+1+yAxisUnit2Width/2);if(config.inGraphDataShow&&(typegraph=="Line"||typegraph=="HorizontalBar"||typegraph=="HorizontalStackedBar")){rightNotUsableWidth=Math.max(rightNotUsableWidth,Math.max(widestYLabel,widestYLabel2)+1+borderRHeight);leftNotUsableWidth=Math.max(leftNotUsableWidth,Math.max(widestYLabel,widestYLabel2)+1+borderLHeight);}if(typegraph=="Line"&&(config.xAxisTop||config.xAxisBottom)){rightNotUsableWidth=Math.max(rightNotUsableWidth,Math.max(config.xAxisBottom*Math.cos(rotateLabels)*widestXLabel/2,config.xAxisTop*Math.cos(rotateTLabels)*widestTXLabel/2)+1+borderRHeight);leftNotUsableWidth=Math.max(leftNotUsableWidth,Math.max(config.xAxisBottom*Math.cos(rotateLabels)*widestXLabel/2,config.xAxisTop*Math.cos(rotateTLabels)*widestTXLabel/2)+1+borderLHeight);}if((typegraph=="HorizontalBar"||typegraph=="HorizontalStackedBar")&&(config.xAxisTop||config.xAxisBottom)){rightNotUsableWidth=Math.max(rightNotUsableWidth,config.xAxisBottom*Math.cos(rotateLabels)*widestYLabel/2+1+borderRHeight);leftNotUsableWidth=Math.max(leftNotUsableWidth,config.xAxisBottom*Math.cos(rotateLabels)*widestYLabel/2+1+borderLHeight);}if(typegraph=="Line"&&config.inGraphDataShow)topNotUsableHeight=Math.max(topNotUsableHeight,Math.max(highestYLabel,highestYLabel2)+1+borderTHeight);if(typegraph=="Line"&&ctx.tpchartSub=="Bubble"){rightNotUsableWidth=Math.max(rightNotUsableWidth,availableWidth*config.bubbleMaxRadius/2+1+borderRHeight);leftNotUsableWidth=Math.max(leftNotUsableWidth,availableWidth*config.bubbleMaxRadius/2+1+borderLHeight);topNotUsableHeight+=availableHeight*config.bubbleMaxRadius/2;}availableWidth=width-rightNotUsableWidth-leftNotUsableWidth;availableHeight=height-topNotUsableHeight-bottomNotUsableHeight;dispCrossImage(ctx,config,width/2,height/2,width/2,height/2,false,data,-1,-1);if(typeof config.initFunction=="function")config.initFunction("INITFUNCTION",ctx,data,null,-1,-1,{animationValue:0,cntiter:0,config,borderX:0,borderY:0,midPosX:0,midPosY:0});if(ylabels!="nihil"){if(borderHeight>0){ctx.save();ctx.beginPath();ctx.setLineDash(lineStyleFn(config.canvasBordersStyle));ctx.strokeStyle=config.canvasBordersColor;ctx.lineWidth=borderHeight;ctx.setLineDash(lineStyleFn(config.canvasBordersStyle));ctx.strokeStyle=config.canvasBordersColor;ctx.fillStyle="rgba(0,0,0,0)";ctx.drawRectangle({x:0+borderLHeight/2,y:0+borderTHeight/2,width:width-borderRHeight/2-borderLHeight/2,height:height-borderTHeight/2-borderBHeight/2,borders:true,bordersWidth:borderHeight,borderSelection:config.canvasBordersSelection,borderRadius:config.canvasBordersRadius,fill:false,stroke:true});ctx.setLineDash([]);ctx.restore();}if(graphTitleHeight>0){ctx.save();ctx.beginPath();ctx.font=config.graphTitleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.graphTitleFontSize)).toString()+"px "+config.graphTitleFontFamily;ctx.fillStyle=config.graphTitleFontColor;ctx.textBaseline="top";var textPos;switch(config.graphTitleAlign){case "right":ctx.textAlign="right";textPos=Math.ceil(ctx.chartSpaceScale*config.spaceLeft)+(width-Math.ceil(ctx.chartSpaceScale*config.spaceLeft)-Math.ceil(ctx.chartSpaceScale*config.spaceRight))/2;textPos=width-Math.ceil(ctx.chartSpaceScale*(config.spaceRight+config.graphTitleShift))-borderRHeight;break;case "left":ctx.textAlign="left";textPos=borderLHeight+Math.ceil(ctx.chartSpaceScale*(config.spaceLeft+config.graphTitleShift));break;default:ctx.textAlign="center";textPos=borderLHeight+Math.ceil(ctx.chartSpaceScale*config.spaceLeft)+(width-borderRHeight-borderLHeight-Math.ceil(ctx.chartSpaceScale*config.spaceLeft)-Math.ceil(ctx.chartSpaceScale*config.spaceRight))/2;break;}setTextBordersAndBackground(ctx,config.graphTitle,(Math.ceil(ctx.chartTextScale*config.graphTitleFontSize)),textPos,graphTitlePosY,config.graphTitleBorders,config.graphTitleBordersSelection,config.graphTitleBordersColor,Math.ceil(ctx.chartLineScale*config.graphTitleBordersWidth),Math.ceil(ctx.chartSpaceScale*config.graphTitleBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.graphTitleBordersYSpace),config.graphTitleBordersStyle,config.graphTitleBackgroundColor,"GRAPHTITLE",config.graphTitleBordersRadius);ctx.translate(textPos,graphTitlePosY);ctx.fillTextMultiLine(config.graphTitle,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.graphTitleFontSize)),true,config.detectMouseOnText,ctx,"TITLE_TEXTMOUSE",0,textPos,graphTitlePosY,-1,-1);ctx.stroke();ctx.restore();}if(graphSubTitleHeight>0){ctx.save();ctx.beginPath();ctx.font=config.graphSubTitleFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.graphSubTitleFontSize)).toString()+"px "+config.graphSubTitleFontFamily;ctx.fillStyle=config.graphSubTitleFontColor;switch(config.graphSubTitleAlign){case "right":ctx.textAlign="right";textPos=width-Math.ceil(ctx.chartSpaceScale*(config.spaceRight+config.graphSubTitleShift))-borderRHeight;break;case "left":ctx.textAlign="left";textPos=borderLHeight+Math.ceil(ctx.chartSpaceScale*(config.spaceLeft+config.graphSubTitleShift));break;default:ctx.textAlign="center";textPos=borderLHeight+Math.ceil(ctx.chartSpaceScale*config.spaceLeft)+(width-borderRHeight-borderLHeight-Math.ceil(ctx.chartSpaceScale*config.spaceLeft)-Math.ceil(ctx.chartSpaceScale*config.spaceRight))/2;break;}ctx.textBaseline="top";setTextBordersAndBackground(ctx,config.graphSubTitle,(Math.ceil(ctx.chartTextScale*config.graphSubTitleFontSize)),textPos,graphSubTitlePosY,config.graphSubTitleBorders,config.graphSubTitleBordersSelection,config.graphSubTitleBordersColor,Math.ceil(ctx.chartLineScale*config.graphSubTitleBordersWidth),Math.ceil(ctx.chartSpaceScale*config.graphSubTitleBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.graphSubTitleBordersYSpace),config.graphSubTitleBordersStyle,config.graphSubTitleBackgroundColor,"GRAPHSUBTITLE",config.graphSubTitleBordersRadius);ctx.translate(textPos,graphSubTitlePosY);ctx.fillTextMultiLine(config.graphSubTitle,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.graphSubTitleFontSize)),true,config.detectMouseOnText,ctx,"SUBTITLE_TEXTMOUSE",0,textPos,graphSubTitlePosY,-1,-1);ctx.stroke();ctx.restore();}if(config.footNote.trim()!=""){ctx.save();ctx.font=config.footNoteFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.footNoteFontSize)).toString()+"px "+config.footNoteFontFamily;ctx.fillStyle=config.footNoteFontColor;switch(config.footNoteAlign){case "right":ctx.textAlign="right";textPos=width-Math.ceil(ctx.chartSpaceScale*(config.spaceRight+config.footNoteShift))-borderRHeight;break;case "left":ctx.textAlign="left";textPos=borderLHeight+Math.ceil(ctx.chartSpaceScale*(config.spaceLeft+config.footNoteShift));break;default:ctx.textAlign="center";textPos=leftNotUsableWidth+(availableWidth/2);break;}ctx.textBaseline="bottom";setTextBordersAndBackground(ctx,config.footNote,(Math.ceil(ctx.chartTextScale*config.footNoteFontSize)),textPos,footNotePosY,config.footNoteBorders,config.footNoteBordersSelection,config.footNoteBordersColor,Math.ceil(ctx.chartLineScale*config.footNoteBordersWidth),Math.ceil(ctx.chartSpaceScale*config.footNoteBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.footNoteBordersYSpace),config.footNoteBordersStyle,config.footNoteBackgroundColor,"FOOTNOTE",config.footNoteBordersRadius);ctx.translate(textPos,footNotePosY);ctx.fillTextMultiLine(config.footNote,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.footNoteFontSize)),true,config.detectMouseOnText,ctx,"FOOTNOTE_TEXTMOUSE",0,textPos,footNotePosY,-1,-1);ctx.stroke();ctx.restore();}if(yAxisUnitHeight>0){if(config.yAxisLeft){ctx.save();ctx.beginPath();ctx.font=config.yAxisUnitFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)).toString()+"px "+config.yAxisUnitFontFamily;ctx.fillStyle=config.yAxisUnitFontColor;ctx.textAlign="center";ctx.textBaseline="bottom";setTextBordersAndBackground(ctx,config.yAxisUnit,(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)),leftNotUsableWidth,yAxisUnitPosY,config.yAxisUnitBorders,config.yAxisUnitBordersSelection,config.yAxisUnitBordersColor,Math.ceil(ctx.chartLineScale*config.yAxisUnitBordersWidth),Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersYSpace),config.yAxisUnitBordersStyle,config.yAxisUnitBackgroundColor,"YAXISUNIT",config.yAxisUnitBordersRadius);ctx.translate(leftNotUsableWidth,yAxisUnitPosY);ctx.fillTextMultiLine(config.yAxisUnit,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)),true,config.detectMouseOnText,ctx,"YLEFTAXISUNIT_TEXTMOUSE",0,leftNotUsableWidth,yAxisUnitPosY,-1,-1);ctx.stroke();ctx.restore();}if(config.yAxisRight&&yAxisUnit2!=""){ctx.save();ctx.beginPath();ctx.font=config.yAxisUnitFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)).toString()+"px "+config.yAxisUnitFontFamily;ctx.fillStyle=config.yAxisUnitFontColor;ctx.textAlign="center";ctx.textBaseline="bottom";setTextBordersAndBackground(ctx,yAxisUnit2,(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)),width-rightNotUsableWidth,yAxisUnitPosY,config.yAxisUnitBorders,config.yAxisUnitBordersSelection,config.yAxisUnitBordersColor,Math.ceil(ctx.chartLineScale*config.yAxisUnitBordersWidth),Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.yAxisUnitBordersYSpace),config.yAxisUnitBordersStyle,config.yAxisUnitBackgroundColor,"YAXISUNIT",config.yAxisUnitBordersRadius);ctx.translate(width-rightNotUsableWidth,yAxisUnitPosY);ctx.fillTextMultiLine(yAxisUnit2,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.yAxisUnitFontSize)),true,config.detectMouseOnText,ctx,"YRIGHTAXISUNIT_TEXTMOUSE",0,width-rightNotUsableWidth,yAxisUnitPosY,-1,-1);ctx.stroke();ctx.restore();}}if(yAxisLabelWidth>0){if(config.yAxisLeft){ctx.save();ctx.beginPath();ctx.font=config.yAxisFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.yAxisFontSize)).toString()+"px "+config.yAxisFontFamily;ctx.fillStyle=config.yAxisFontColor;ctx.textAlign="center";ctx.textBaseline="bottom";ctx.translate(yAxisLabelPosLeft,topNotUsableHeight+(availableHeight/2));ctx.rotate(-(90*(Math.PI/180)));setTextBordersAndBackground(ctx,config.yAxisLabel,(Math.ceil(ctx.chartTextScale*config.yAxisFontSize)),0,0,config.yAxisLabelBorders,config.yAxisLabelBordersSelection,config.yAxisLabelBordersColor,Math.ceil(ctx.chartLineScale*config.yAxisLabelBordersWidth),Math.ceil(ctx.chartSpaceScale*config.yAxisLabelBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.yAxisLabelBordersYSpace),config.yAxisLabelBordersStyle,config.yAxisLabelBackgroundColor,"YAXISLABELLEFT",config.yAxisLabelBordersRadius);ctx.fillTextMultiLine(config.yAxisLabel,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.yAxisFontSize)),false,config.detectMouseOnText,ctx,"YLEFTAXISLABEL_TEXTMOUSE",-(90*(Math.PI/180)),yAxisLabelPosLeft,topNotUsableHeight+(availableHeight/2),-1,-1);ctx.stroke();ctx.restore();}if(config.yAxisRight){var yAxisLabel2=config.yAxisLabel2;if(yAxisLabel2=="")yAxisLabel2=config.yAxisLabel;ctx.save();ctx.beginPath();if(config.yAxisFontSize2==0)yAxisFontSize=config.yAxisFontSize;else yAxisFontSize=config.yAxisFontSize2;ctx.font=config.yAxisFontStyle+" "+(Math.ceil(ctx.chartTextScale*yAxisFontSize)).toString()+"px "+config.yAxisFontFamily;if(config.yAxisFontColor2=="")ctx.fillStyle=config.yAxisFontColor;else ctx.fillStyle=config.yAxisFontColor2;ctx.textAlign="center";ctx.textBaseline="bottom";ctx.translate(yAxisLabelPosRight,topNotUsableHeight+(availableHeight/2));ctx.rotate(+(90*(Math.PI/180)));setTextBordersAndBackground(ctx,yAxisLabel2,(Math.ceil(ctx.chartTextScale*yAxisFontSize)),0,0,config.yAxisLabelBorders,config.yAxisLabelBordersSelection,config.yAxisLabelBordersColor,Math.ceil(ctx.chartLineScale*config.yAxisLabelBordersWidth),Math.ceil(ctx.chartSpaceScale*config.yAxisLabelBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.yAxisLabelBordersYSpace),config.yAxisLabelBordersStyle,config.yAxisLabelBackgroundColor,"YAXISLABELLEFT",config.yAxisLabelBordersRadius);ctx.fillTextMultiLine(yAxisLabel2,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*yAxisFontSize)),false,config.detectMouseOnText,ctx,"YRIGHTAXISLABEL_TEXTMOUSE",+(90*(Math.PI/180)),yAxisLabelPosRight,topNotUsableHeight+(availableHeight/2),-1,-1);ctx.stroke();ctx.restore();}}if(xAxisLabelHeight>0){if(config.xAxisBottom){ctx.save();ctx.beginPath();ctx.font=config.xAxisFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.xAxisFontSize)).toString()+"px "+config.xAxisFontFamily;ctx.fillStyle=config.xAxisFontColor;ctx.textAlign="center";ctx.textBaseline="bottom";setTextBordersAndBackground(ctx,config.xAxisLabel,(Math.ceil(ctx.chartTextScale*config.xAxisFontSize)),leftNotUsableWidth+(availableWidth/2),xAxisLabelPos,config.xAxisLabelBorders,config.xAxisLabelBordersSelection,config.xAxisLabelBordersColor,Math.ceil(ctx.chartLineScale*config.xAxisLabelBordersWidth),Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersYSpace),config.xAxisLabelBordersStyle,config.xAxisLabelBackgroundColor,"XAXISLABEL",config.xAxisLabelBordersRadius);ctx.translate(leftNotUsableWidth+(availableWidth/2),xAxisLabelPos);ctx.fillTextMultiLine(config.xAxisLabel,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.xAxisFontSize)),true,config.detectMouseOnText,ctx,"XAXISLABEL_TEXTMOUSE",0,leftNotUsableWidth+(availableWidth/2),xAxisLabelPos,-1,-1);ctx.stroke();ctx.restore();}if(config.xAxisTop){var xAxisLabel2=config.xAxisLabel2;if(xAxisLabel2=="")xAxisLabel2=config.xAxisLabel;ctx.save();ctx.beginPath();ctx.font=config.xAxisFontStyle+" "+(Math.ceil(ctx.chartTextScale*config.xAxisFontSize)).toString()+"px "+config.xAxisFontFamily;ctx.fillStyle=config.xAxisFontColor;ctx.textAlign="center";ctx.textBaseline="top";setTextBordersAndBackground(ctx,xAxisLabel2,(Math.ceil(ctx.chartTextScale*config.xAxisFontSize)),leftNotUsableWidth+(availableWidth/2),xTAxisLabelPos,config.xAxisLabelBorders,config.xAxisLabelBordersSelection,config.xAxisLabelBordersColor,Math.ceil(ctx.chartLineScale*config.xAxisLabelBordersWidth),Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersXSpace),Math.ceil(ctx.chartSpaceScale*config.xAxisLabelBordersYSpace),config.xAxisLabelBordersStyle,config.xAxisLabelBackgroundColor,"XAXISLABEL",config.xAxisLabelBordersRadius);ctx.translate(leftNotUsableWidth+(availableWidth/2),xTAxisLabelPos);ctx.fillTextMultiLine(xAxisLabel2,0,0,ctx.textBaseline,(Math.ceil(ctx.chartTextScale*config.xAxisFontSize)),true,config.detectMouseOnText,ctx,"XAXISLABEL_TEXTMOUSE",0,leftNotUsableWidth+(availableWidth/2),xAxisLabelPos,-1,-1);ctx.stroke();ctx.restore();}}var legendMsr;if(nbeltLegend>1||(nbeltLegend==1&&config.showSingleLegend)){legendMsr={dispLegend:true,xLegendPos,yLegendPos,nbLegendLines,nbLegendCols,reverseLegend,legendBox,widestLegend,highestLegend,legendWidth:msrLegend.legendWidth,legendHeight:msrLegend.legendHeight,legendBackgroundColorWidth:msrLegend.legendBackgroundColorWidth,legendBackgroundColorHeight:msrLegend.legendBackgroundColorHeight,legendBorderWidth:msrLegend.legendBorderWidth,legendBorderHeight:msrLegend.legendBorderHeight,legendFirstTextXPos:msrLegend.legendFirstTextXPos,legendFirstTextYPos:msrLegend.legendFirstTextYPos,legendBackgroundColorXPos:msrLegend.legendBackgroundColorXPos,legendBackgroundColorYPos:msrLegend.legendBackgroundColorYPos,legendBorderXPos:msrLegend.legendBorderXPos,legendBorderYPos:msrLegend.legendBorderYPos,elementMsr:msrLegend.elementMsr};if(config.legendPosY==0||config.legendPosY==4||config.legendPosX==0||config.legendPosX==4){drawLegend(legendMsr,data,config,ctx,typegraph,-1);legendMsr={dispLegend:false};}}else legendMsr={dispLegend:false};}clrx=leftNotUsableWidth;clrwidth=availableWidth;clry=topNotUsableHeight;clrheight=availableHeight;return {leftNotUsableWidth,rightNotUsableWidth,availableWidth,topNotUsableHeight,bottomNotUsableHeight,availableHeight,widestXLabel,widestTXLabel,highestXLabel,highestTXLabel,widestYLabel,widestYLabel2,highestYLabel,rotateLabels,rotateTLabels,xLabelPos,xTLabelPos,clrx,clry,clrwidth,clrheight,legendMsr};}function drawBubblesDataset(animationDecimal,data,config,ctx,statData,vars){var t1,t2,t3,complementaryBar,otherBarHeight,barHeight,i,j,currentAnimPc,fullHeight,sizeTop,sizeBottom,decal;var maxBubbleRadius,markerShape,markerStrokeStyle,markerRadius,centerX,centerY,paddingTextX,paddingTextY,dispString,xRadius,yRadius;var newRadius,newX,newY;var correctedAnimationDecimal;for(i=0;i<data.datasets.length;i++){if(statData[i][0].tpchart!="Bubble")continue;for(j=0;j<data.datasets[i].data.length;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"BUBBLE");if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;ctx.save();if(!(typeof (data.datasets[i].data[j])=="undefined")){currentAnimPc=correctedAnimationDecimal.yAxis;ctx.beginPath();ctx.fillStyle=setOptionValue(true,true,1,"MARKERFILLCOLOR",ctx,data,statData,data.datasets[i].pointColor,config.defaultStrokeColor,"pointColor",i,j,{nullvalue:true});ctx.strokeStyle=setOptionValue(true,true,1,"MARKERSTROKESTYLE",ctx,data,statData,data.datasets[i].pointStrokeColor,config.defaultStrokeColor,"pointStrokeColor",i,j,{nullvalue:true});ctx.lineWidth=setOptionValue(true,true,ctx.chartLineScale,"MARKERLINEWIDTH",ctx,data,statData,data.datasets[i].pointDotStrokeWidth,config.pointDotStrokeWidth,"pointDotStrokeWidth",i,j,{nullvalue:true});markerShape=setOptionValue(true,true,1,"MARKERSHAPE",ctx,data,statData,data.datasets[i].markerShape,config.markerShape,"markerShape",i,j,{nullvalue:true});markerStrokeStyle=setOptionValue(true,true,1,"MARKERSTROKESTYLE",ctx,data,statData,data.datasets[i].pointDotStrokeStyle,config.pointDotStrokeStyle,"pointDotStrokeStyle",i,j,{nullvalue:true});maxBubbleRadius=config.bubbleMaxRadius*Math.min(statData[i][j].availableHeight,statData[i][j].availableWidth);markerRadius=setOptionValue(true,true,ctx.chartSpaceScale,"MARKERRADIUS",ctx,data,statData,data.datasets[i].pointDotRadius,config.pointDotRadius,"pointDotRadius",i,j,{nullvalue:true});markerRadius=currentAnimPc*maxBubbleRadius*(1*markerRadius-statData[0][0].bubbleMinVal)/(statData[0][0].bubbleMaxVal-statData[0][0].bubbleMinVal);markerRadius=setOptionValue(true,true,1,"MARKERRADIUS",ctx,data,statData,markerRadius,markerRadius,"pointDotRadius",i,j,{nullvalue:true});centerY=statData[i][j].xAxisPosY-statData[i][j].availableHeight/2;centerX=statData[i][j].yAxisPosX+statData[i][j].availableWidth/2;drawMarker(ctx,centerX+currentAnimPc*(statData[i][j].xPos-centerX),centerY+currentAnimPc*(statData[i][j].yAxisPos-centerY-statData[i][j].yPosOffset),markerShape,markerRadius,markerStrokeStyle);}ctx.restore();}}if(currentAnimPc>=config.animationStopValue)for(i=0;i<data.datasets.length;i++)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if(typeof (data.datasets[i].data[j])=="undefined")continue;if(statData[i][0].tpchart!="Bubble")continue;maxBubbleRadius=config.bubbleMaxRadius*Math.min(statData[i][j].availableHeight,statData[i][j].availableWidth);markerRadius=setOptionValue(true,true,ctx.chartSpaceScale,"MARKERRADIUS",ctx,data,statData,data.datasets[i].pointDotRadius,config.pointDotRadius,"pointDotRadius",i,j,{nullvalue:true});markerRadius=currentAnimPc*maxBubbleRadius*(1*markerRadius-statData[0][0].bubbleMinVal)/(statData[0][0].bubbleMaxVal-statData[0][0].bubbleMinVal);statData[i][j].markerRadius=markerRadius;if(!(data.datasets[i].mouseDetection==false))jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["POINT",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){ctx.save();ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});paddingTextX=setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true});paddingTextY=setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);if(paddingTextY==0){newY=0;if(paddingTextX==0)newX=0;else{newX=markerRadius;if(paddingTextX<0)newX=-newX;}newY=0;}else{newRadius=markerRadius+Math.sqrt(paddingTextX*paddingTextX+paddingTextY*paddingTextY);newY=Math.sqrt(newRadius*newRadius/(Math.pow(paddingTextX/paddingTextY,2)+1));if(paddingTextY<0)newY=-newY;newX=newY*paddingTextX/paddingTextY;}ctx.translate(statData[i][j].xPos+newX,statData[i][j].yAxisPos-currentAnimPc*statData[i][j].yPosOffset-newY);var rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,statData[i][j].xPos+paddingTextX,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset-paddingTextY,i,j);ctx.restore();}}if(animationDecimal.animationGlobal>=1&&typeof drawMath=="function")drawMath(ctx,config,data,msr,{xAxisPosY,yAxisPosX,valueHop,scaleHop,zeroY,calculatedScale,calculateOffset,additionalSpaceBetweenBars,barWidth});}function drawLinesDataset(animationDecimal,data,config,ctx,statData,vars){var y1,y2,y3,diffnb,diffnbj,fact,currentAnimPc;var prevypos;var pts=[];var correctedAnimationDecimal;for(var i=0;i<data.datasets.length;i++)if(setOptionValue(true,true,1,"ANIMATION",ctx,data,statData,data.datasets[i].animation,config.animation,"animation",i,-1,{nullvalue:null})==true||animationDecimal.animationGlobal>=1){prevypos="undefined";if(statData[i][0].tpchart!="Line")continue;if(statData[i].length==0)continue;if(statData[i][0].firstNotMissing==-1)continue;ctx.save();ctx.beginPath();prevAnimPc={mainVal:0,subVal:0,animVal:0};var firstpt=-1;var lastxPos=-1;for(var j=statData[i][0].firstNotMissing;j<=statData[i][0].lastNotMissing;j++){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"LINE");todisplay=true;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)todisplay=false;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)todisplay=false;if(typeof (data.datasets[i].data[j])=="undefined")todisplay=false;if(prevAnimPc.animVal==0&&j>statData[i][0].firstNotMissing)continue;currentAnimPc={mainVal:correctedAnimationDecimal.yAxis,subVal:correctedAnimationDecimal.subYAxis,animVal:correctedAnimationDecimal.yAxis+correctedAnimationDecimal.subYAxis};if(currentAnimPc.mainVal==0&&(prevAnimPc.mainVal>0&&firstpt!=-1)){ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);if(config.extrapolateMissingData){y1=statData[i][statData[i][j].prevNotMissing].yAxisPos-prevAnimPc.mainVal*statData[i][statData[i][j].prevNotMissing].yPosOffset;y2=statData[i][j].yAxisPos-prevAnimPc.mainVal*statData[i][statData[i][j-1].nextNotMissing].yPosOffset;diffnb=statData[i][j-1].nextNotMissing-statData[i][j].prevNotMissing;diffnbj=(j-1)-statData[i][j].prevNotMissing;fact=(diffnbj+prevAnimPc.subVal)/diffnb;y3=y1+fact*(y2-y1);traceLine(pts,ctx,statData[i][statData[i][j].prevNotMissing].xPos+fact*(statData[i][statData[i][j-1].nextNotMissing].xPos-statData[i][statData[i][j].prevNotMissing].xPos),y3,config,data,statData,i,setYposOrigin(i,j,data,statData));closebz(pts,ctx,config,i);ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);ctx.strokeStyle="rgba(0,0,0,0)";if(config.datasetFill&&setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})!=1){ctx.lineTo(statData[i][statData[i][j].prevNotMissing].xPos+fact*(statData[i][statData[i][j-1].nextNotMissing].xPos-statData[i][statData[i][j].prevNotMissing].xPos),statData[i][j].yAxisPos);ctx.lineTo(statData[i][firstpt].xPos,statData[i][firstpt].xAxisPosY-statData[i][0].zeroY);ctx.closePath();ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationValue:currentAnimPc.mainVal,xPosLeft:statData[i][0].xPos,yPosBottom:Math.max(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lminvalue_offset),xPosRight:statData[i][data.datasets[i].data.length-1].xPos,yPosTop:Math.min(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lmaxvalue_offset)});ctx.fill();firstpt=-1;}}else{if(todisplay==true){traceLine(pts,ctx,statData[i][j-1].xPos+prevAnimPc.subVal*(statData[i][j].xPos-statData[i][j-1].xPos),statData[i][j].yAxisPos-prevAnimPc.mainVal*statData[i][statData[i][j-1].nextNotMissing].yPosOffset,config,data,statData,i,setYposOrigin(i,j,data,statData));closebz(pts,ctx,config,i);ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);ctx.strokeStyle="rgba(0,0,0,0)";if(config.datasetFill&&setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})!=1){ctx.lineTo(statData[i][j-1].xPos+prevAnimPc.subVal*(statData[i][j].xPos-statData[i][j-1].xPos),statData[i][j].yAxisPos);ctx.lineTo(statData[i][firstpt].xPos,statData[i][firstpt].xAxisPosY-statData[i][0].zeroY);ctx.closePath();ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationValue:currentAnimPc.mainVal,xPosLeft:statData[i][0].xPos,yPosBottom:Math.max(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lminvalue_offset),xPosRight:statData[i][data.datasets[i].data.length-1].xPos,yPosTop:Math.min(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lmaxvalue_offset)});ctx.fill();}}}prevAnimPc=currentAnimPc;continue;}else if(currentAnimPc.totVal==0){ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);ctx.strokeStyle="rgba(0,0,0,0)";}else{ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);ctx.strokeStyle=setOptionValue(true,true,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,j,{nullvalue:null});}prevAnimPc=currentAnimPc;switch(todisplay){case false:if(!config.extrapolateMissingData){if(firstpt==-1)continue;closebz(pts,ctx,config,i);ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);if(config.datasetFill&&firstpt!=-1&&setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})!=1){lastxPos=-1;ctx.strokeStyle="rgba(0,0,0,0)";ctx.lineTo(statData[i][j-1].xPos,statData[i][j-1].yAxisPos);ctx.lineTo(statData[i][firstpt].xPos,statData[i][firstpt].yAxisPos);ctx.closePath();ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,j,{animationValue:currentAnimPc.mainVal,xPosLeft:statData[i][0].xPos,yPosBottom:Math.max(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lminvalue_offset),xPosRight:statData[i][data.datasets[i].data.length-1].xPos,yPosTop:Math.min(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lmaxvalue_offset)});ctx.fill();}ctx.beginPath();prevAnimPc={mainVal:0,subVal:0};firstpt=-1;}else{if(currentAnimPc.subVal>0){lastxPos=statData[i][j].xPos+currentAnimPc.subVal*(statData[i][j+1].xPos-statData[i][j].xPos);y1=statData[i][statData[i][j+1].prevNotMissing].yAxisPos-statData[i][statData[i][j+1].prevNotMissing].yPosOffset;y2=statData[i][statData[i][j].nextNotMissing].yAxisPos-statData[i][statData[i][j].nextNotMissing].yPosOffset;diffnb=statData[i][j].nextNotMissing-statData[i][j+1].prevNotMissing;diffnbj=(j)-statData[i][j+1].prevNotMissing;fact=(diffnbj+prevAnimPc.subVal)/diffnb;y3=y1+fact*(y2-y1);traceLine(pts,ctx,statData[i][statData[i][j].prevNotMissing].xPos+fact*(statData[i][statData[i][j-1].nextNotMissing].xPos-statData[i][statData[i][j].prevNotMissing].xPos),y3,config,data,statData,i,setYposOrigin(i,j,data,statData));}}break;default:ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"LINEWIDTH",ctx,data,statData,data.datasets[i].datasetStrokeWidth,config.datasetStrokeWidth,"datasetStrokeWidth",i,j,{nullvalue:null}));if(firstpt==-1){firstpt=j;ctx.beginPath();if(setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})==1){if(typeof statData[i][j].yPosOffsetOrigin!="undefined")ctx.moveTo(statData[i][j].xPos,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffsetOrigin);else ctx.moveTo(statData[i][firstpt].xPos,statData[i][firstpt].xAxisPosY-statData[i][0].zeroY);ctx.lineTo(statData[i][j].xPos,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset);}else ctx.moveTo(statData[i][j].xPos,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset);initbz(pts,statData[i][j].xPos,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset,i);lastxPos=statData[i][j].xPos;}else{lastxPos=statData[i][j].xPos;traceLine(pts,ctx,statData[i][j].xPos,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset,config,data,statData,i,setYposOrigin(i,j,data,statData));}if(currentAnimPc.subVal>0&&statData[i][j].nextNotMissing!=-1&&(config.extrapolateMissing||statData[i][j].nextNotMissing==j+1)){lastxPos=statData[i][j].xPos+currentAnimPc.subVal*(statData[i][j+1].xPos-statData[i][j].xPos);y1=statData[i][statData[i][j+1].prevNotMissing].yAxisPos-statData[i][statData[i][j+1].prevNotMissing].yPosOffset;y2=statData[i][statData[i][j].nextNotMissing].yAxisPos-statData[i][statData[i][j].nextNotMissing].yPosOffset;y3=y1+currentAnimPc.subVal*(y2-y1);traceLine(pts,ctx,statData[i][j].xPos+currentAnimPc.subVal*(statData[i][statData[i][j].nextNotMissing].xPos-statData[i][j].xPos),y3,config,data,statData,i,setYposOrigin(i,j,data,statData));}break;}if(todisplay&&animationDecimal.animationGlobal>=config.animationStopValue){ctx.pieces_drawn.points++;ctx.pieces_drawn.total_drawn++;}}closebz(pts,ctx,config,i);ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));ctx.stroke();ctx.setLineDash([]);if(config.datasetFill&&setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})!=1)if(firstpt>=0){ctx.strokeStyle="rgba(0,0,0,0)";ctx.lineTo(lastxPos,statData[i][0].xAxisPosY-statData[i][0].zeroY);ctx.lineTo(statData[i][firstpt].xPos,statData[i][firstpt].xAxisPosY-statData[i][0].zeroY);ctx.closePath();ctx.fillStyle=setOptionValue(true,true,1,"COLOR",ctx,data,statData,data.datasets[i].fillColor,config.defaultFillColor,"fillColor",i,-1,{animationValue:currentAnimPc.mainVal,xPosLeft:statData[i][0].xPos,yPosBottom:Math.max(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lminvalue_offset),xPosRight:statData[i][data.datasets[i].data.length-1].xPos,yPosTop:Math.min(statData[i][0].yAxisPos,statData[i][0].yAxisPos-((config.animationLeftToRight)?1:1*currentAnimPc.mainVal)*statData[i][0].lmaxvalue_offset)});ctx.fill();}ctx.restore();if(animationDecimal.animationGlobal>=1)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if(!(typeof (data.datasets[i].data[j])=="undefined")){correctedAnimationDecimal=correctAnimation(animationDecimal,data,config,i,j,statData,"LINE");currentAnimPc={mainVal:correctedAnimationDecimal.yAxis,subVal:correctedAnimationDecimal.subYAxis,animVal:correctedAnimationDecimal.yAxis+correctedAnimationDecimal.subYAxis};if(currentAnimPc.mainVal>0||!config.animationLeftToRight)if(setOptionValue(true,true,1,"POINTDOT",ctx,data,statData,undefined,config.pointDot,"pointDot",i,j,{nullvalue:null})){ctx.beginPath();ctx.fillStyle=setOptionValue(true,true,1,"MARKERFILLCOLOR",ctx,data,statData,data.datasets[i].pointColor,config.defaultStrokeColor,"pointColor",i,j,{nullvalue:true});ctx.strokeStyle=setOptionValue(true,true,1,"MARKERSTROKESTYLE",ctx,data,statData,data.datasets[i].pointStrokeColor,config.defaultStrokeColor,"pointStrokeColor",i,j,{nullvalue:true});ctx.lineWidth=setOptionValue(true,true,ctx.chartLineScale,"MARKERLINEWIDTH",ctx,data,statData,data.datasets[i].pointDotStrokeWidth,config.pointDotStrokeWidth,"pointDotStrokeWidth",i,j,{nullvalue:true});var markerShape=setOptionValue(true,true,1,"MARKERSHAPE",ctx,data,statData,data.datasets[i].markerShape,config.markerShape,"markerShape",i,j,{nullvalue:true});var markerRadius=setOptionValue(true,true,ctx.chartSpaceScale,"MARKERRADIUS",ctx,data,statData,data.datasets[i].pointDotRadius,config.pointDotRadius,"pointDotRadius",i,j,{nullvalue:true});var markerStrokeStyle=setOptionValue(true,true,1,"MARKERSTROKESTYLE",ctx,data,statData,data.datasets[i].pointDotStrokeStyle,config.pointDotStrokeStyle,"pointDotStrokeStyle",i,j,{nullvalue:true});drawMarker(ctx,statData[i][j].xPos,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset,markerShape,markerRadius,markerStrokeStyle);}}}if(animationDecimal.animationGlobal>=config.animationStopValue)for(j=0;j<data.datasets[i].data.length;j++){if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.datasets[i].displayData,config.displayData,"displayData",i,j,{nullvalue:null})==false)continue;if(setOptionValue(true,true,1,"DISPLAYDATA",ctx,data,statData,data.displayData,config.displayData,"displayData",j,-1,{nullvalue:null})==false)continue;if(typeof (data.datasets[i].data[j])=="undefined")continue;if(!(data.datasets[i].mouseDetection==false))jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["POINT",i,j,statData,setOptionValue(true,true,1,"ANNOTATEDISPLAY",ctx,data,statData,data.datasets[i].annotateDisplay,config.annotateDisplay,"annotateDisplay",i,j,{nullValue:true})];if(setOptionValue(true,true,1,"INGRAPHDATASHOW",ctx,data,statData,data.datasets[i].inGraphDataShow,config.inGraphDataShow,"inGraphDataShow",i,j,{nullValue:true})){ctx.save();ctx.textAlign=setOptionValue(true,true,1,"INGRAPHDATAALIGN",ctx,data,statData,undefined,config.inGraphDataAlign,"inGraphDataAlign",i,j,{nullValue:true});ctx.textBaseline=setOptionValue(true,true,1,"INGRAPHDATAVALIGN",ctx,data,statData,undefined,config.inGraphDataVAlign,"inGraphDataVAlign",i,j,{nullValue:true});ctx.font=setOptionValue(true,true,1,"INGRAPHDATAFONTSTYLE",ctx,data,statData,undefined,config.inGraphDataFontStyle,"inGraphDataFontStyle",i,j,{nullValue:true})+" "+setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true})+"px "+setOptionValue(true,true,1,"INGRAPHDATAFONTFAMILY",ctx,data,statData,undefined,config.inGraphDataFontFamily,"inGraphDataFontFamily",i,j,{nullValue:true});ctx.fillStyle=setOptionValue(true,true,1,"INGRAPHDATAFONTCOLOR",ctx,data,statData,undefined,config.inGraphDataFontColor,"inGraphDataFontColor",i,j,{nullValue:true});var paddingTextX=setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGX",ctx,data,statData,undefined,config.inGraphDataPaddingX,"inGraphDataPaddingX",i,j,{nullValue:true}),paddingTextY=setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATAPADDINGY",ctx,data,statData,undefined,config.inGraphDataPaddingY,"inGraphDataPaddingY",i,j,{nullValue:true});var dispString=tmplbis(setOptionValue(true,true,1,"INGRAPHDATATMPL",ctx,data,statData,undefined,config.inGraphDataTmpl,"inGraphDataTmpl",i,j,{nullValue:true}),statData[i][j],config);ctx.translate(statData[i][j].xPos+paddingTextX,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset-paddingTextY);var rotateVal=setOptionValue(true,true,1,"INGRAPHDATAROTATE",ctx,data,statData,undefined,config.inGraphDataRotate,"inGraphDataRotate",i,j,{nullValue:true})*(Math.PI/180);ctx.rotate(rotateVal);setTextBordersAndBackground(ctx,dispString,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),0,0,setOptionValue(true,true,1,"INGRAPHDATABORDERS",ctx,data,statData,undefined,config.inGraphDataBorders,"inGraphDataBorders",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSELECTION",ctx,data,statData,undefined,config.inGraphDataBordersSelection,"inGraphDataBordersSelection",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSCOLOR",ctx,data,statData,undefined,config.inGraphDataBordersColor,"inGraphDataBordersColor",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartLineScale,"INGRAPHDATABORDERSWIDTH",ctx,data,statData,undefined,config.inGraphDataBordersWidth,"inGraphDataBordersWidth",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSXSPACE",ctx,data,statData,undefined,config.inGraphDataBordersXSpace,"inGraphDataBordersXSpace",i,j,{nullValue:true}),setOptionValue(true,true,ctx.chartSpaceScale,"INGRAPHDATABORDERSYSPACE",ctx,data,statData,undefined,config.inGraphDataBordersYSpace,"inGraphDataBordersYSpace",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABORDERSSTYLE",ctx,data,statData,undefined,config.inGraphDataBordersStyle,"inGraphDataBordersStyle",i,j,{nullValue:true}),setOptionValue(true,true,1,"INGRAPHDATABACKGROUNDCOLOR",ctx,data,statData,undefined,config.inGraphDataBackgroundColor,"inGraphDataBackgroundColor",i,j,{nullValue:true}),"INGRAPHDATA",config.inGraphDataBordersRadius);ctx.fillTextMultiLine(dispString,0,0,ctx.textBaseline,setOptionValue(true,true,ctx.chartTextScale,"INGRAPHDATAFONTSIZE",ctx,data,statData,undefined,config.inGraphDataFontSize,"inGraphDataFontSize",i,j,{nullValue:true}),true,config.detectMouseOnText,ctx,"INGRAPHDATA_TEXTMOUSE",rotateVal,statData[i][j].xPos+paddingTextX,statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffset-paddingTextY,i,j);ctx.restore();}}}function initbz(pts,xpos,ypos,i){if(setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})==0&&setOptionValue(true,true,1,"BEZIERCURVE",ctx,data,statData,undefined,config.bezierCurve,"bezierCurve",i,-1,{nullValue:true})){pts.length=0;pts.push(xpos);pts.push(ypos);}prevypos=ypos;}function setYposOrigin(i,j,data,statData){yposOrigin="undefined";if(typeof statData[i][j].yPosOffsetOrigin!="undefined")yposOrigin=statData[i][j].yAxisPos-currentAnimPc.mainVal*statData[i][j].yPosOffsetOrigin;return (yposOrigin);}function traceLine(pts,ctx,xpos,ypos,config,data,statData,i,yposOrigin){if(setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})==0&&setOptionValue(true,true,1,"BEZIERCURVE",ctx,data,statData,undefined,config.bezierCurve,"bezierCurve",i,-1,{nullValue:true})){pts.push(xpos);pts.push(ypos);}else if(setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})==0)ctx.lineTo(xpos,ypos);else if(setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})==1){if(yposOrigin!="undefined")ctx.moveTo(xpos,yposOrigin);else ctx.moveTo(xpos,statData[i][0].xAxisPosY-statData[i][0].zeroY);ctx.lineTo(xpos,ypos);}else{if(setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})==2&&typeof prevypos!="undefined"){ctx.lineTo(xpos,prevypos);ctx.lineTo(xpos,ypos);prevypos=ypos;}}}function closebz(pts,ctx,config,i){if(setOptionValue(true,true,1,"LINKTYPE",ctx,data,statData,data.datasets[i].linkType,config.linkType,"linkType",i,j,{nullvalue:null})==0&&setOptionValue(true,true,1,"BEZIERCURVE",ctx,data,statData,undefined,config.bezierCurve,"bezierCurve",i,-1,{nullValue:true})){minimumpos=statData[i][0].xAxisPosY;maximumpos=statData[i][0].xAxisPosY-statData[i][0].calculatedScale.steps*statData[i][0].scaleHop;drawSpline(ctx,pts,setOptionValue(true,true,1,"BEZIERCURVETENSION",ctx,data,statData,undefined,config.bezierCurveTension,"bezierCurveTension",i,-1,{nullValue:true}),minimumpos,maximumpos);pts.length=0;}prevypos=undefined;}function getControlPoints(x0,y0,x1,y1,x2,y2,t){var d01=Math.sqrt(Math.pow(x1-x0,2)+Math.pow(y1-y0,2));var d12=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));var fa=t*d01/(d01+d12);var fb=t-fa;var p1x=x1+fa*(x0-x2);var p1y=y1+fa*(y0-y2);var p2x=x1-fb*(x0-x2);var p2y=y1-fb*(y0-y2);return [p1x,p1y,p2x,p2y];}function drawSpline(ctx,pts,t,minimumpos,maximumpos){var cp=[];var n=pts.length;pts.push(2*pts[n-2]-pts[n-4]);pts.push(2*pts[n-1]-pts[n-3]);if(n==4){ctx.moveTo(pts[0],pts[1]);ctx.lineTo(pts[2],pts[3]);return;}for(var ti=0;ti<n-2;ti+=2)cp=cp.concat(getControlPoints(pts[ti],pts[ti+1],pts[ti+2],pts[ti+3],pts[ti+4],pts[ti+5],t));ctx.beginPath();ctx.strokeStyle=setOptionValue(true,true,1,"STROKECOLOR",ctx,data,statData,data.datasets[i].strokeColor,config.defaultStrokeColor,"strokeColor",i,j,{nullvalue:null});ctx.lineWidth=Math.ceil(ctx.chartLineScale*setOptionValue(true,true,1,"LINEWIDTH",ctx,data,statData,data.datasets[i].datasetStrokeWidth,config.datasetStrokeWidth,"datasetStrokeWidth",i,j,{nullvalue:null}));ctx.moveTo(pts[0],pts[1]);ctx.quadraticCurveTo(cp[0],Math.max(Math.min(cp[1],minimumpos),maximumpos),pts[2],pts[3]);ctx.setLineDash(lineStyleFn(setOptionValue(true,true,1,"LINEDASH",ctx,data,statData,data.datasets[i].datasetStrokeStyle,config.datasetStrokeStyle,"datasetStrokeStyle",i,j,{nullvalue:null})));for(ti=2;ti<pts.length-4;ti+=2){y1=Math.max(Math.min(cp[2*ti-1],minimumpos),maximumpos);y2=Math.max(Math.min(cp[2*ti+1],minimumpos),maximumpos);ctx.bezierCurveTo(cp[2*ti-2],y1,cp[2*ti],y2,pts[ti+2],pts[ti+3]);}ctx.stroke();}ctx.setLineDash([]);}function log10(val){return Math.log(val)/Math.LN10;}function setRect(ctx,config){if(config.clearRect){if(!config.multiGraph){clear(ctx);ctx.clearRect(0,0,width,height);}}else{clear(ctx);ctx.clearRect(0,0,width,height);ctx.fillStyle=config.savePngBackgroundColor;ctx.strokeStyle=config.savePngBackgroundColor;ctx.beginPath();ctx.moveTo(0,0);ctx.lineTo(0,ctx.canvas.height);ctx.lineTo(ctx.canvas.width,ctx.canvas.height);ctx.lineTo(ctx.canvas.width,0);ctx.lineTo(0,0);ctx.stroke();ctx.fill();}}function defMouse(ctx,data,config){if(typeof ctx.addListener!="undefined")if(ctx.addListener==false){mouseActionData[ctx.ChartNewId]={data,config,prevShow:-1};return;}var mousewheelevt=(/Firefox/i.test(navigator.userAgent))?"DOMMouseScroll":"mousewheel";if(typeof ctx.mouseAction=="undefined")ctx.mouseAction=[];else{for(var i=0;i<ctx.mouseAction;i++)if(ctx.mouseAction.substring(0,1)!="/")ctx.mouseAction[i]="/"+ctx.mouseAction[i];}function setAction(ctx,action){if(ctx.mouseAction.indexOf("/"+action)>=0)ctx.mouseAction[ctx.mouseAction.indexOf("/"+action)]=action;else{if(ctx.mouseAction.indexOf(action)<0)ctx.mouseAction[ctx.mouseAction.length]=action;}}function add_listener(ctx,action){if(isIE()<9&&isIE()!=false)ctx.canvas.attachEvent("on"+action.split(" ")[0],function(event){doMouseAction(event,ctx.ChartNewId,action.split(" ")[0]);});else ctx.canvas.addEventListener(action.split(" ")[0],function(event){doMouseAction(event,ctx,action.split(" ")[0]);},false);}if(config.savePng==true)if(config.savePngFunction=="mousedown left")setAction(ctx,"mousedown 1");else if(config.savePngFunction=="mousedown middle")setAction(ctx,"mousedown 2");else{if(config.savePngFunction=="mousedown right")setAction(ctx,"mousedown 3");}if(config.annotateDisplay||typeof config.annotateDisplay=="function"){if(cursorDivCreated==false)oCursor=new makeCursorObj(config,annotate_shape);if(config.annotateFunction=="mousedown left")setAction(ctx,"mousedown 1");else if(config.annotateFunction=="mousedown middle")setAction(ctx,"mousedown 2");else if(config.annotateFunction=="mousedown right")setAction(ctx,"mousedown 3");else{if(config.annotateFunction=="mousemove")setAction(ctx,"mousemove");}}if(config.highLight==true)if(config.highLightMouseFunction=="mousedown left")setAction(ctx,"mousedown 1");else if(config.highLightMouseFunction=="mousedown middle")setAction(ctx,"mousedown 2");else if(config.highLightMouseFunction=="mousedown right")setAction(ctx,"mousedown 3");else{if(config.highLightMouseFunction=="mousemove")setAction(ctx,"mousemove");}if(typeof config.mouseMove=="function")setAction(ctx,"mousemove");if(typeof config.mouseDownLeft=="function")setAction(ctx,"mousedown 1");if(typeof config.mouseDownMiddle=="function")setAction(ctx,"mousedown 2");if(typeof config.mouseDownRight=="function")setAction(ctx,"mousedown 3");if(typeof config.mouseWheel=="function")setAction(ctx,mousewheelevt);if(typeof config.mouseOut=="function")setAction(ctx,"mouseout");if(typeof config.mouseDblClick=="function")setAction(ctx,"dblclick");var mouseAction=false;if((ctx.mouseAction.indexOf("mousemove")>=0&&ctx.mouseAction.indexOf("/mousemove")<0)||(ctx.mouseAction.indexOf("mouseout")>=0&&ctx.mouseAction.indexOf("/mouseout")<0)){setAction(ctx,"mouseout");mouseAction=true;add_listener(ctx,"mouseout");}if((ctx.mouseAction.indexOf("mousemove")>=0&&ctx.mouseAction.indexOf("/mousemove")<0)||(ctx.mouseAction.indexOf(mousewheelevt)>=0&&ctx.mouseAction.indexOf("/"+mousewheelevt)<0)){setAction(ctx,mousewheelevt);mouseAction=true;add_listener(ctx,mousewheelevt);}if(ctx.mouseAction.indexOf("mousemove")>=0&&ctx.mouseAction.indexOf("/mousemove")<0){mouseAction=true;add_listener(ctx,"mousemove");}if(ctx.mouseAction.indexOf("dblclick")>=0&&ctx.mouseAction.indexOf("/dblclick")<0){mouseAction=true;add_listener(ctx,"dblclick");}if((ctx.mouseAction.indexOf("mousedown 1")>=0&&ctx.mouseAction.indexOf("/mousedown 1")<0)||(ctx.mouseAction.indexOf("mousedown 2")>=0&&ctx.mouseAction.indexOf("/mousedown 2")<0)||(ctx.mouseAction.indexOf("mousedown 3")>=0&&ctx.mouseAction.indexOf("/mousedown 3")<0)){mouseAction=true;add_listener(ctx,"mousedown");}if((config.contextMenu==false||ctx.mouseAction.indexOf("mousedown 3")>=0)&&ctx.mouseAction.indexOf("/removeContextMenu")<0){ctx.mouseAction[ctx.mouseAction.length]="removeContextMenu";ctx.canvas.oncontextmenu=function(e){e.preventDefault();};}inMouseAction[ctx.ChartNewId]=false;mouseActionData[ctx.ChartNewId]={data,config,prevShow:-1};}};function showLabels(a,e,c,d){var b=setOptionValue(true,true,1,"SHOWLABEL",a,e,undefined,undefined,c.showXLabels,"showXLabels",d,-1,undefined,{labelValue:fmtChartJS(c,e.labels[d],c.fmtXLabel),unformatedLabelValue:e.labels[d]});if(typeof b=="number")if(d>=c.firstLabelToShow-1)b=((d+c.firstLabelToShow-1)%parseInt(b)==0?true:false);else b=false;return b;}function showYLabels(a,e,c,d,f){var b=setOptionValue(true,true,1,"SHOWYLABEL",a,e,undefined,undefined,c.showYLabels,"showYLabels",-1,d,undefined,{labelValue:f});if(typeof b=="number")if(d>=c.firstYLabelToShow-1)b=((d+c.firstYLabelToShow-1)%parseInt(b)==0?true:false);else b=false;return b;}function drawLegend(p,z,u,q,n,v){if(u.legendPosY==0||u.legendPosY==4||u.legendPosX==0||u.legendPosX==4){if(v!=-1)return;}else if(v==-1)return;else{if(u.animation==true)if(typeof u.legendWhenToDraw=="number"){if(v!=u.legendWhenToDraw)return;}else if(v!=1&&u.legendWhenToDraw=="first")return;else{if(v!=u.animationSteps&&u.legendWhenToDraw=="last")return;}}q.save();if(u.legendFillColor!="rgba(0,0,0,0)"){q.setLineDash([]);q.lineWidth=0;q.fillStyle=u.legendFillColor;q.drawRectangle({x:p.xLegendPos+p.legendBackgroundColorXPos,y:p.yLegendPos+p.legendBackgroundColorYPos,width:p.legendBackgroundColorWidth,height:p.legendBackgroundColorHeight,borders:u.legendBorders,bordersWidth:Math.ceil(q.chartLineScale*u.legendBordersWidth),borderSelection:u.legendBordersSelection,borderRadius:u.legendBordersRadius,fill:true,stroke:false});}if(u.legendBorders){q.fillStyle=u.legendFillColor;q.setLineDash(lineStyleFn(u.legendBordersStyle));q.lineWidth=Math.ceil(q.chartLineScale*u.legendBordersWidth);q.strokeStyle=u.legendBordersColors;q.drawRectangle({x:p.xLegendPos+p.legendBorderXPos,y:p.yLegendPos+p.legendBorderYPos,width:p.legendBorderWidth,height:p.legendBorderHeight,borders:true,bordersWidth:Math.ceil(q.chartLineScale*u.legendBordersWidth),borderSelection:u.legendBordersSelection,borderRadius:u.legendBordersRadius,fill:false,stroke:true});}q.setLineDash([]);q.restore();var d,g,e,f,s,t,o,m;var h;var b=p.legendBox;m=p.nbLegendCols-1;var w=p.yLegendPos+p.legendFirstTextYPos+p.highestLegend;var l=p.xLegendPos+p.legendFirstTextXPos;g=w-((Math.ceil(q.chartTextScale*u.legendFontSize))+Math.ceil(q.chartSpaceScale*u.legendSpaceBetweenTextVertical));d=0;e=z.datasets.length;for(s=e-1;s>=0;s--){f=s;if(p.reverseLegend)f=z.datasets.length-s-1;t=typeof (z.datasets[f].title);if(t=="string"){if(!u.legendDrawEmptyData){h=false;for(j=0;j<z.datasets[f].data.length;j++)if(typeof (1*z.datasets[f].data[j])=="number")if(1*z.datasets[f].data[j]!=0)h=true;}else h=true;o=fmtChartJS(u,z.datasets[f].title,u.fmtLegend).trim();if(h&&o!=""){m++;if(m==p.nbLegendCols){m=0;d=l;g+=(Math.ceil(q.chartTextScale*u.legendFontSize))+Math.ceil(q.chartSpaceScale*u.legendSpaceBetweenTextVertical);}else d+=p.widestLegend+Math.ceil(q.chartSpaceScale*u.legendSpaceBetweenTextHorizontal);q.save();q.beginPath();if(q.tpchart=="Bar"||q.tpchart=="StackedBar")if(z.datasets[f].type=="Line"&&(!u.datasetFill||setOptionValue(true,false,1,"LINKTYPE",q,z,undefined,z.datasets[f].linkType,u.linkType,"linkType",f,-1,{nullvalue:null})==1))b=false;if(q.tpchart=="Line"&&q.tpchartSub=="Bubble")if(z.datasets[f].type=="Line"&&(!u.datasetFill||setOptionValue(true,false,1,"LINKTYPE",q,z,undefined,z.datasets[f].linkType,u.linkType,"linkType",f,-1,{nullvalue:null})==1))b=false;if(b){q.lineWidth=Math.ceil(q.chartLineScale*setOptionValue(true,false,1,"LINEWIDTH",q,z,undefined,z.datasets[f].datasetStrokeWidth,u.datasetStrokeWidth,"datasetStrokeWidth",f,-1,{nullvalue:null}));q.beginPath();if(q.tpchartSub=="Bubble"&&z.datasets[f].type!="Line")q.strokeStyle=setOptionValue(true,true,1,"LEGENDSTROKECOLOR",q,z,undefined,z.datasets[f].pointStrokeColor,u.defaultStrokeColor,"pointStrokeColor",f,-1,{animationValue:1,xPosLeft:d,yPosBottom:g,xPosRight:d+Math.ceil(q.chartTextScale*u.legendBlockSize),yPosTop:g-(Math.ceil(q.chartTextScale*u.legendFontSize))});else q.strokeStyle=setOptionValue(true,false,1,"LEGENDSTROKECOLOR",q,z,undefined,z.datasets[f].strokeColor,u.defaultFillColor,"strokeColor",f,-1,{animationValue:1,xPosLeft:d,yPosBottom:g,xPosRight:d+Math.ceil(q.chartTextScale*u.legendBlockSize),yPosTop:g-(Math.ceil(q.chartTextScale*u.legendFontSize))});q.setLineDash(lineStyleFn(setOptionValue(true,false,1,"LEGENDLINEDASH",q,z,undefined,z.datasets[f].datasetStrokeStyle,u.datasetStrokeStyle,"datasetStrokeStyle",f,-1,{animationValue:1,xPosLeft:d,yPosBottom:g,xPosRight:d+Math.ceil(q.chartTextScale*u.legendBlockSize),yPosTop:g-(Math.ceil(q.chartTextScale*u.legendFontSize))})));q.moveTo(d,g);q.lineTo(d+Math.ceil(q.chartTextScale*u.legendBlockSize),g);q.lineTo(d+Math.ceil(q.chartTextScale*u.legendBlockSize),g-(Math.ceil(q.chartTextScale*u.legendFontSize)));q.lineTo(d,g-(Math.ceil(q.chartTextScale*u.legendFontSize)));q.lineTo(d,g);q.stroke();q.closePath();if(q.tpchartSub=="Bubble"&&z.datasets[f].type!="Line")q.fillStyle=setOptionValue(true,true,1,"LEGENDFILLCOLOR",q,z,undefined,z.datasets[f].pointColor,u.defaultStrokeColor,"pointColor",f,-1,{animationValue:1,xPosLeft:d,yPosBottom:g,xPosRight:d+Math.ceil(q.chartTextScale*u.legendBlockSize),yPosTop:g-(Math.ceil(q.chartTextScale*u.legendFontSize))});else q.fillStyle=setOptionValue(true,false,1,"LEGENDFILLCOLOR",q,z,undefined,z.datasets[f].fillColor,u.defaultFillColor,"fillColor",f,-1,{animationValue:1,xPosLeft:d,yPosBottom:g,xPosRight:d+Math.ceil(q.chartTextScale*u.legendBlockSize),yPosTop:g-(Math.ceil(q.chartTextScale*u.legendFontSize))});q.fill();}else{q.lineWidth=u.legendColorIndicatorStrokeWidth?u.legendColorIndicatorStrokeWidth:Math.ceil(q.chartLineScale*setOptionValue(true,false,1,"LINEWIDTH",q,z,undefined,z.datasets[f].datasetStrokeWidth,u.datasetStrokeWidth,"datasetStrokeWidth",f,-1,{nullvalue:null}));if(u.legendColorIndicatorStrokeWidth&&u.legendColorIndicatorStrokeWidth>(Math.ceil(q.chartTextScale*u.legendFontSize)))q.lineWidth=(Math.ceil(q.chartTextScale*u.legendFontSize));q.strokeStyle=setOptionValue(true,false,1,"LEGENDSTROKECOLOR",q,z,undefined,z.datasets[f].strokeColor,u.defaultFillColor,"strokeColor",f,-1,{animationValue:1,xPosLeft:d,yPosBottom:g,xPosRight:d+Math.ceil(q.chartTextScale*u.legendBlockSize),yPosTop:g-(Math.ceil(q.chartTextScale*u.legendFontSize))});q.setLineDash(lineStyleFn(setOptionValue(true,false,1,"LEGENDLINEDASH",q,z,undefined,z.datasets[f].datasetStrokeStyle,u.datasetStrokeStyle,"datasetStrokeStyle",f,-1,{animationValue:1,xPosLeft:d,yPosBottom:g,xPosRight:d+Math.ceil(q.chartTextScale*u.legendBlockSize),yPosTop:g-(Math.ceil(q.chartTextScale*u.legendFontSize))})));q.moveTo(d+2,g-((Math.ceil(q.chartTextScale*u.legendFontSize))/2));q.lineTo(d+2+Math.ceil(q.chartTextScale*u.legendBlockSize),g-((Math.ceil(q.chartTextScale*u.legendFontSize))/2));q.stroke();q.fill();if(u.pointDot){q.beginPath();q.fillStyle=setOptionValue(true,false,1,"LEGENDMARKERFILLCOLOR",q,z,undefined,z.datasets[f].pointColor,u.defaultStrokeColor,"pointColor",f,-1,{nullvalue:true});q.strokeStyle=setOptionValue(true,false,1,"LEGENDMARKERSTROKESTYLE",q,z,undefined,z.datasets[f].pointStrokeColor,u.defaultStrokeColor,"pointStrokeColor",f,-1,{nullvalue:true});q.lineWidth=setOptionValue(true,false,q.chartLineScale,"LEGENDMARKERLINEWIDTH",q,z,undefined,z.datasets[f].pointDotStrokeWidth,u.pointDotStrokeWidth,"pointDotStrokeWidth",f,-1,{nullvalue:true});var c=setOptionValue(true,false,1,"LEGENDMARKERSHAPE",q,z,undefined,z.datasets[f].markerShape,u.markerShape,"markerShape",f,-1,{nullvalue:true});var r=setOptionValue(true,false,q.chartSpaceScale,"LEGENDMARKERRADIUS",q,z,undefined,z.datasets[f].pointDotRadius,u.pointDotRadius,"pointDotRadius",f,-1,{nullvalue:true});var a=setOptionValue(true,false,1,"LEGENDMARKERSTROKESTYLE",q,z,undefined,z.datasets[f].pointDotStrokeStyle,u.pointDotStrokeStyle,"pointDotStrokeStyle",f,-1,{nullvalue:true});drawMarker(q,d+2+Math.ceil(q.chartTextScale*u.legendBlockSize)/2,g-((Math.ceil(q.chartTextScale*u.legendFontSize))/2),c,r,a);}q.fill();}q.restore();q.save();q.beginPath();q.font=setOptionValue(true,false,1,"LEGENDFONTSTYLE",q,z,undefined,u.legendFontStyle,u.legendFontStyle,"config.legendFontStyle",f,-1,{nullvalue:true})+" "+(Math.ceil(q.chartTextScale*u.legendFontSize)).toString()+"px "+u.legendFontFamily;q.fillStyle=setOptionValue(true,false,1,"LEGENDFONTCOLOR",q,z,undefined,u.legendFontColor,u.legendFontColor,"legendFontColor",f,-1,{nullvalue:true});q.textAlign="left";q.textBaseline="bottom";q.translate(d+Math.ceil(q.chartTextScale*u.legendBlockSize)+Math.ceil(q.chartSpaceScale*u.legendSpaceBetweenBoxAndText),g);q.fillTextMultiLine(o,0,0,q.textBaseline,Math.ceil(q.chartTextScale*u.legendFontSize),true,u.detectMouseOnText,q,"LEGEND_TEXTMOUSE",0,d+Math.ceil(q.chartTextScale*u.legendBlockSize)+Math.ceil(q.chartSpaceScale*u.legendSpaceBetweenBoxAndText),g,f,-1);q.restore();}}}}function measureLegend(u,n,s,a,f,v,p,g){var l=0;var e=0;var h=0;var o=0;var i=0;var q=0;var m=0;var r=0;var b=0;var d=0;var t=0;var c=0;o=v*(f+Math.ceil(n.chartSpaceScale*s.legendSpaceBetweenTextVertical))-Math.ceil(n.chartSpaceScale*s.legendSpaceBetweenTextVertical)+Math.ceil(n.chartSpaceScale*s.legendSpaceBeforeText)+Math.ceil(n.chartSpaceScale*s.legendSpaceAfterText);h=p*(a+Math.ceil(n.chartSpaceScale*s.legendSpaceBetweenTextHorizontal))-Math.ceil(n.chartSpaceScale*s.legendSpaceBetweenTextHorizontal)+Math.ceil(n.chartSpaceScale*s.legendSpaceLeftText)+Math.ceil(n.chartSpaceScale*s.legendSpaceRightText);e=o;l=h;m=Math.ceil(n.chartSpaceScale*s.legendSpaceLeftText);r=Math.ceil(n.chartSpaceScale*s.legendSpaceBeforeText);if(s.legendBorders==true){i=l;q=e;if(isBorder(s.legendBordersSelection,"LEFT")){i+=Math.ceil(n.chartLineScale*s.legendBordersWidth)/2;l+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);m+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);t+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft)+Math.ceil(n.chartLineScale*s.legendBordersWidth)/2;b+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);}else{if(s.legendFillColor!="rgba(0,0,0,0)"){l+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);m+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);b+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);t+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);}}if(isBorder(s.legendBordersSelection,"RIGHT")){i+=Math.ceil(n.chartLineScale*s.legendBordersWidth)/2;l+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceRight);}else{if(s.legendFillColor!="rgba(0,0,0,0)")l+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceRight);}if(isBorder(s.legendBordersSelection,"TOP")){q+=Math.ceil(n.chartLineScale*s.legendBordersWidth)/2;e+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);r+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);d+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);c+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore)+Math.ceil(n.chartLineScale*s.legendBordersWidth)/2;}else{if(s.legendFillColor!="rgba(0,0,0,0)"){e+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);r+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);d+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);c+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);}}if(isBorder(s.legendBordersSelection,"BOTTOM")){q+=Math.ceil(n.chartLineScale*s.legendBordersWidth)/2;e+=Math.ceil(n.chartLineScale*s.legendBordersWidth)+Math.ceil(n.chartSpaceScale*s.legendBordersSpaceAfter);}else{if(s.legendFillColor!="rgba(0,0,0,0)")e+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceAfter);}}else{if(s.legendFillColor!="rgba(0,0,0,0)"){l+=Math.ceil(n.chartSpaceScale*(s.legendBordersSpaceRight+s.legendBordersSpaceLeft));e+=Math.ceil(n.chartSpaceScale*(s.legendBordersSpaceBefore+s.legendBordersSpaceAfter));b+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);d+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);m+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceLeft);r+=Math.ceil(n.chartSpaceScale*s.legendBordersSpaceBefore);}}return {legendWidth:l,legendHeight:e,legendBackgroundColorWidth:h,legendBackgroundColorHeight:o,legendBorderWidth:i,legendBorderHeight:q,legendFirstTextXPos:m,legendFirstTextYPos:r,legendBackgroundColorXPos:b,legendBackgroundColorYPos:d,legendBorderXPos:t,legendBorderYPos:c,elementMsr:null};}function drawMarker(b,d,f,a,c,e){b.setLineDash(lineStyleFn(e));switch(a){case "square":b.rect(d-c,f-c,2*c,2*c);b.stroke();b.fill();b.setLineDash([]);break;case "triangle":pointA_x=0;pointA_y=2/3*c;b.moveTo(d,f-pointA_y);b.lineTo(d+pointA_y*Math.sin(4/3),f+pointA_y*Math.cos(4/3));b.lineTo(d-pointA_y*Math.sin(4/3),f+pointA_y*Math.cos(4/3));b.lineTo(d,f-pointA_y);b.stroke();b.fill();b.setLineDash([]);break;case "diamond":b.moveTo(d,f+c);b.lineTo(d+c,f);b.lineTo(d,f-c);b.lineTo(d-c,f);b.lineTo(d,f+c);b.stroke();b.fill();b.setLineDash([]);break;case "plus":b.moveTo(d,f-c);b.lineTo(d,f+c);b.moveTo(d-c,f);b.lineTo(d+c,f);b.stroke();b.setLineDash([]);break;case "cross":b.moveTo(d-c,f-c);b.lineTo(d+c,f+c);b.moveTo(d-c,f+c);b.lineTo(d+c,f-c);b.stroke();b.setLineDash([]);break;case "circle":default:b.arc(d,f,c,0,2*Math.PI*1,true);b.stroke();b.fill();b.setLineDash([]);break;}}function initPassVariableData_part1(Q,D,p){var O,M,o,W,G,b,X,t,n,P,N,T,s,K,l,J,h,a;var f,c,H,u;var E,I,S;var e,v;var F=-Number.MAX_VALUE;var m=Number.MAX_VALUE;var q;o=[];W=[];W[0]=[];W[1]=[];G=[];G[0]=[];G[1]=[];b=[];b[0]=[];b[1]=[];X=[];X[0]=[];X[1]=[];t=[];t[0]=[];t[1]=[];n=[];n[0]=[];n[1]=[];s=[];K=[];l=[];J=[];h=[];s[0]=[];s[1]=[];a=0;E=[];I=[];S=[];e=[];v=[];switch(p.tpchart){case "PolarArea":var R,V;R=[];V=[];for(O=0;O<Q.datasets.length;O++)for(M=0;M<Q.labels.length;M++){if(O==0)R[M]=0;if(typeof Q.datasets[O].data[M]!="undefined")R[M]++;}var d=0;var L=0;for(M=0;M<Q.labels.length;M++){V[M]=L;d=Math.max(R[M],d);if(R[M]>0)L++;e[M]=0;v[M]=1;}var C=1;break;case "Doughnut":case "Pie":var C=0;var r=0;var z,w;for(M=0;M<Q.labels.length;M++){z=setOptionValue(true,true,1,"RADIUSSPACEWEIGHT",p,Q,null,Q.radiusSpaceWeight,D.radiusSpaceWeight,"radiusSpaceWeight",M,-1,{nullvalue:null});w=setOptionValue(true,true,1,"RADIUSDATAWEIGHT",p,Q,null,Q.radiusDataWeight,D.radiusDataWeight,"radiusDataWeight",M,-1,{nullvalue:null});if(M!=0){r+=z;C+=z;}e[M]=r;C+=w;v[M]=C;r+=w;}break;default:break;}for(O=0;O<Q.datasets.length;O++){if(typeof Q.datasets[O].xPos!="undefined"&&tpdraw(p,Q.datasets[O])=="Line")for(M=Q.datasets[O].data.length;M<Q.datasets[O].xPos.length;M++)Q.datasets[O].data.push(undefined);else for(M=Q.datasets[O].data.length;M<Q.labels.length;M++)Q.datasets[O].data.push(undefined);if(Q.datasets[O].axis==2)q=0;else q=1;o[O]=[];t[0][O]=-Number.MAX_VALUE;t[1][O]=-Number.MAX_VALUE;n[0][O]=Number.MAX_VALUE;n[1][O]=Number.MAX_VALUE;K[O]=-1;l[O]=-1;for(M=0;M<Q.datasets[O].data.length;M++){if(typeof J[M]=="undefined"){J[M]=-1;h[M]=-1;X[0][M]=0;W[0][M]=-Number.MAX_VALUE;G[0][M]=Number.MAX_VALUE;X[1][M]=0;W[1][M]=-Number.MAX_VALUE;G[1][M]=Number.MAX_VALUE;}var B=true;if(p.tpchart=="Doughnut"){if(setOptionValue(false,true,1,"DISPLAYDATA",p,Q,null,Q.datasets[O].displayData,D.displayData,"displayData",O,M,{nullvalue:null})==false)B=false;if(setOptionValue(false,true,1,"DISPLAYDATA",p,Q,null,Q.displayData,D.displayData,"displayData",-1,M,{nullvalue:null})==false)B=false;}else{if(setOptionValue(true,true,1,"DISPLAYDATA",p,Q,null,Q.datasets[O].displayData,D.displayData,"displayData",O,M,{nullvalue:null})==false)B=false;if(setOptionValue(true,true,1,"DISPLAYDATA",p,Q,null,Q.displayData,D.displayData,"displayData",M,-1,{nullvalue:null})==false)B=false;}if(typeof Q.datasets[O].data[M]=="undefined")B=false;if(B==true){a+=1*Q.datasets[O].data[M];if(K[O]==-1)K[O]=M;l[O]=M;if(J[M]==-1)J[M]=O;h[M]=O;X[q][M]+=1*Q.datasets[O].data[M];W[q][M]=Math.max(W[q][M],1*Q.datasets[O].data[M]);G[q][M]=Math.min(G[q][M],1*Q.datasets[O].data[M]);t[q][O]=Math.max(t[q][O],1*Q.datasets[O].data[M]);n[q][O]=Math.min(n[q][O],1*Q.datasets[O].data[M]);}}}for(O=0;O<Q.datasets.length;O++){if(Q.datasets[O].axis==2)q=0;else q=1;if(typeof (Q.datasets[O].title)=="string")P=Q.datasets[O].title.trim();else P="";var A=-1;var g=-1;for(M=0;M<Q.datasets[O].data.length;M++){if(typeof b[0][M]=="undefined"){b[0][M]=0;s[0][M]=-1;b[1][M]=0;s[1][M]=-1;}N="";if(typeof Q.datasets[O].xPos!="undefined")if(!(typeof Q.datasets[O].xPos[M]=="undefined"))N=Q.datasets[O].xPos[M];if(N==""&&!(typeof (Q.labels[M])=="undefined"))N=Q.labels[M];if(typeof N=="string")N=N.trim();var B=true;if(tpdraw(p,Q.datasets[O])=="Line"){if(setOptionValue(true,true,1,"DISPLAYDATA",p,Q,null,Q.datasets[O].displayData,D.displayData,"displayData",O,M,{nullvalue:null})==false)B=false;if(setOptionValue(true,true,1,"DISPLAYDATA",p,Q,null,Q.displayData,D.displayData,"displayData",M,-1,{nullvalue:null})==false)B=false;}if(typeof Q.datasets[O].data[M]=="undefined")B=false;if(B){b[q][M]+=1*Q.datasets[O].data[M];switch(tpdraw(p,Q.datasets[O])){case "PolarArea":case "Doughnut":case "Pie":if(O==0){if(M==0){var U=(((D.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(U<=D.zeroValue)U=2*Math.PI;}I[M]=(((-D.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);S[M]=(((D.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(p.tpchart=="PolarArea"){I[M]+=V[M]*(U/L);S[M]-=V[M]*(U/L);}E[M]=I[M];}if(p.tpchart=="PolarArea")if(R[M]>0)c=(U/L)/R[M];else c=0;else c=(1*Q.datasets[O].data[M]/X[q][M])*U;if(c>=Math.PI*2)c=Math.PI*2-0.001;o[O][M]={config:D,v1:fmtChartJS(D,P,D.fmtV1),v2:fmtChartJS(D,N,D.fmtV2),v3:fmtChartJS(D,1*Q.datasets[O].data[M],D.fmtV3),v4:fmtChartJS(D,b[q][M],D.fmtV4),v5:fmtChartJS(D,X[q][M],D.fmtV5),v6:roundToWithThousands(D,fmtChartJS(D,100*Q.datasets[O].data[M]/X[q][M],D.fmtV6),D.roundPct),v6T:roundToWithThousands(D,fmtChartJS(D,100*Q.datasets[O].data[M]/a,D.fmtV6T),D.roundPct),v7:0,v8:0,v9:0,v10:0,v11:fmtChartJS(D,O,D.fmtV11),v12:fmtChartJS(D,M,D.fmtV12),v13:fmtChartJS(D,c,D.fmtV13),v14:fmtChartJS(D,I[M],D.fmtV14),v15:fmtChartJS(D,I[M]+c,D.fmtV15),lgtxt:P,lgtxt2:N,datavalue:1*Q.datasets[O].data[M],cumvalue:b[q][M],totvalue:X[q][M],pctvalue:100*Q.datasets[O].data[M]/X[q][M],pctvalueT:100*Q.datasets[O].data[M]/a,maxvalue:W[q][M],minvalue:G[q][M],lmaxvalue:t[q][O],lminvalue:n[q][O],grandtotal:a,firstNotMissing:J[M],lastNotMissing:h[M],prevNotMissing:A,prevMissing:g,nextNotMissing:-1,segmentAngle:c,firstAngle:E[M],startAngle:I[M],realStartAngle:S[M],endAngle:I[M]+c,radiusOffset:0,midPosX:0,midPosY:0,int_radius:0,ext_radius:0,startRadius:e[M]/C,stopRadius:v[M]/C,totRadiusWeight:C,j:M,i:O,data:Q};I[M]=I[M]+c;S[M]=S[M]-c;break;case "Bar":case "StackedBar":case "HorizontalBar":case "HorizontalStackedBar":o[O][M]={config:D,v1:fmtChartJS(D,P,D.fmtV1),v2:fmtChartJS(D,N,D.fmtV2),v3:fmtChartJS(D,1*Q.datasets[O].data[M],D.fmtV3),v4:fmtChartJS(D,b[q][M],D.fmtV4),v5:fmtChartJS(D,X[q][M],D.fmtV5),v6:roundToWithThousands(D,fmtChartJS(D,100*Q.datasets[O].data[M]/X[q][M],D.fmtV6),D.roundPct),v6T:roundToWithThousands(D,fmtChartJS(D,100*Q.datasets[O].data[M]/a,D.fmtV6T),D.roundPct),v11:fmtChartJS(D,O,D.fmtV11),v12:fmtChartJS(D,M,D.fmtV12),lgtxt:P,lgtxt2:N,datavalue:1*Q.datasets[O].data[M],cumvalue:b[q][M],totvalue:X[q][M],pctvalue:100*Q.datasets[O].data[M]/X[q][M],pctvalueT:100*Q.datasets[O].data[M]/a,maxvalue:W[q][M],minvalue:G[q][M],lmaxvalue:t[q][O],lminvalue:n[q][O],grandtotal:a,firstNotMissing:J[M],lastNotMissing:h[M],prevNotMissing:A,prevMissing:g,nextNotMissing:-1,j:M,i:O,data:Q};if(1*Q.datasets[O].data[M]==0&&(tpdraw(p,Q.datasets[O])=="HorizontalStackedBar"||tpdraw(p,Q.datasets[O])=="StackedBar"))o[O][M].v3="";break;case "Line":if(p.tpchartSub=="Bubble")if(Q.datasets[O].type!="Line"){markerRadius=setOptionValue(true,true,p.chartSpaceScale,"MARKERRADIUS",p,Q,null,Q.datasets[O].pointDotRadius,D.pointDotRadius,"pointDotRadius",O,M,{nullvalue:true});F=Math.max(1*markerRadius,F);m=Math.min(1*markerRadius,m);}case "Radar":o[O][M]={config:D,v1:fmtChartJS(D,P,D.fmtV1),v2:fmtChartJS(D,N,D.fmtV2),v3:fmtChartJS(D,1*Q.datasets[O].data[M],D.fmtV3),v5:fmtChartJS(D,1*Q.datasets[O].data[M],D.fmtV5),v6:fmtChartJS(D,W[q][M],D.fmtV6),v7:fmtChartJS(D,X[q][M],D.fmtV7),v8:roundToWithThousands(D,fmtChartJS(D,100*Q.datasets[O].data[M]/X[q][M],D.fmtV8),D.roundPct),v8T:roundToWithThousands(D,fmtChartJS(D,100*Q.datasets[O].data[M]/a,D.fmtV8T),D.roundPct),v11:fmtChartJS(D,O,D.fmtV11),v12:fmtChartJS(D,M,D.fmtV12),lgtxt:P,lgtxt2:N,datavalue:1*Q.datasets[O].data[M],diffnext:1*Q.datasets[O].data[M],pctvalue:100*Q.datasets[O].data[M]/X[q][M],pctvalueT:100*Q.datasets[O].data[M]/a,totvalue:X[q][M],cumvalue:b[q][M],maxvalue:W[q][M],minvalue:G[q][M],lmaxvalue:t[q][O],lminvalue:n[q][O],grandtotal:a,firstNotMissing:K[O],lastNotMissing:l[O],prevNotMissing:A,prevMissing:g,nextNotMissing:-1,j:M,i:O,data:Q};if(p.tpchartSub=="Bubble"){if(Q.datasets[O].type!="Line")o[O][M].vbubble=setOptionValue(true,true,p.chartSpaceScale,"MARKERRADIUS",p,Q,null,Q.datasets[O].pointDotRadius,D.pointDotRadius,"pointDotRadius",O,M,{nullvalue:true});else o[O][M].vbubble="";o[O][M].vbubble=fmtChartJS(D,o[O][M].vbubble,D.fmtVbubble);}if(s[q][M]>=0){o[O][M].v4=fmtChartJS(D,(s[q][M]!=-1?1*Q.datasets[O].data[M]-o[s[q][M]][M].datavalue:1*Q.datasets[O].data[M]),D.fmtV4);o[O][M].diffprev=(s[q][M]!=-1?1*Q.datasets[O].data[M]-o[s[q][M]][M].datavalue:1*Q.datasets[O].data[M]);o[s[q][M]][M].diffnext=Q.datasets[s[q][M]].data[M]-Q.datasets[O].data[M];o[s[q][M]][M].v5=o[s[q][M]][M].diffnext;}else o[O][M].v4=1*Q.datasets[O].data[M];s[q][M]=O;break;default:break;}if(A!=-1)for(k=A;k<M;k++)o[O][k].nextNotMissing=M;A=M;}else{g=M;switch(tpdraw(p,Q.datasets[O])){case "PolarArea":case "Doughnut":case "Pie":if(O==0){if(M==0){var U=(((D.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(U<=D.zeroValue)U=2*Math.PI;}I[M]=(((-D.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);S[M]=(((D.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(p.tpchart=="PolarArea"){I[M]+=V[M]*(U/L);S[M]-=V[M]*(U/L);}E[M]=I[M];}case "Bar":case "StackedBar":case "HorizontalBar":case "HorizontalStackedBar":o[O][M]={v1:P,lmaxvalue:t[q][O],lminvalue:n[q][O],firstNotMissing:J[M],lastNotMissing:h[M],prevNotMissing:A,prevMissing:g,grandtotal:a};break;case "Line":case "Radar":o[O][M]={v1:P,lmaxvalue:t[q][O],lminvalue:n[q][O],firstNotMissing:K[O],lastNotMissing:l[O],prevNotMissing:A,prevMissing:g,grandtotal:a};break;}}}}if(D.bubbleMaxVal=="max")o[0][0].bubbleMaxVal=F;else o[0][0].bubbleMaxVal=1*D.bubbleMaxVal;if(D.bubbleMinVal=="min")o[0][0].bubbleMinVal=m;else o[0][0].bubbleMinVal=1*D.bubbleMinVal;return o;}function initPassVariableData_part2(l,w,v,n,e,d,a){var h=0;var r,p;var m=new Array(w.datasets.length);var o=new Array(w.datasets.length);l[0][0].GrandTotExtent=0;l[0][0].cumulValTotExtentI=0;l[0][0].cumExtent=0;l[0][0].cumExtentJ=[];l[0][0].totExtentJ=[];var t=0;for(r=0;r<w.datasets.length;r++){l[r][0].totExtentI=0;l[r][0].cumExtentI=0;if(r>0)l[r][0].cumulValTotExtentI=l[r-1][0].cumulValTotExtentI+l[r-1][0].totExtentI;switch(tpdraw(n,w.datasets[r])){case "PolarArea":case "Pie":case "Doughnut":for(p=0;p<w.datasets[r].data.length;p++){if(p>=t){t++;l[0][0].totExtentJ[p]=0;}l[r][p].v7=fmtChartJS(v,a.midPosX,v.fmtV7);l[r][p].v8=fmtChartJS(v,a.midPosY,v.fmtV8),l[r][p].v9=fmtChartJS(v,a.int_radius+(a.ext_radius-a.int_radius)*l[r][p].startRadius,v.fmtV9);l[r][p].v10=fmtChartJS(v,a.int_radius+(a.ext_radius-a.int_radius)*l[r][p].stopRadius,v.fmtV10);if(n.tpchart=="PolarArea"){l[r][p].radiusOffset=g(e,1*w.datasets[r].data[p],a.calculatedScale,a.scaleHop);l[r][p].v10=fmtChartJS(v,l[r].radiusOffset,v.fmtV10);}else{l[r][p].v10=fmtChartJS(v,a.ext_radius,v.fmtV10);l[r][p].radiusOffset=a.int_radius+(a.ext_radius-a.int_radius)*l[r][p].stopRadius;}l[r][p].outerVal=a.outerVal;l[r][p].midPosX=a.midPosX;l[r][p].midPosY=a.midPosY;l[r][p].calculatedScale=a.calculatedScale;l[r][p].scaleHop=a.scaleHop;l[r][p].int_radius=a.int_radius+(a.ext_radius-a.int_radius)*l[r][p].startRadius;l[r][p].ext_radius=a.int_radius+(a.ext_radius-a.int_radius)*l[r][p].stopRadius;l[r][p].extent=Math.abs(l[r][p].stopRadius-l[r][p].startRadius);if(!isNumber(l[r][p].extent))l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;}break;case "Line":for(p=0;p<w.datasets[r].data.length;p++){if(p>=t){t++;l[0][0].totExtentJ[p]=0;}l[r][p].xAxisPosY=a.xAxisPosY;l[r][p].yAxisPosX=a.yAxisPosX;l[r][p].valueHop=a.valueHop;l[r][p].nbValueHop=a.nbValueHop;if(w.datasets[r].axis==2){l[r][p].scaleHop=a.scaleHop2;l[r][p].zeroY=a.zeroY2;l[r][p].calculatedScale=a.calculatedScale2;l[r][p].logarithmic=a.logarithmic2;}else{l[r][p].scaleHop=a.scaleHop;l[r][p].zeroY=a.zeroY;l[r][p].calculatedScale=a.calculatedScale;l[r][p].logarithmic=a.logarithmic;}l[r][p].xPos=f(r,p,w,a.yAxisPosX,a.valueHop,a.nbValueHop);l[r][p].yAxisPos=a.xAxisPosY-l[r][p].zeroY;if(n.tpchart=="Bar"||n.tpchart=="StackedBar"){l[r][p].xPos+=(a.valueHop/2);l[r][p].yAxisPosX+=(a.valueHop/2);}if(p==0){l[r][p].lmaxvalue_offset=g(l[r][p].logarithmic,l[r][p].lmaxvalue,l[r][p].calculatedScale,l[r][p].scaleHop)-l[r][p].zeroY;l[r][p].lminvalue_offset=g(l[r][p].logarithmic,l[r][p].lminvalue,l[r][p].calculatedScale,l[r][p].scaleHop)-l[r][p].zeroY;}else{l[r][p].lmaxvalue_offset=l[r][0].lmaxvalue_offset;l[r][p].lminvalue_offset=l[r][0].lminvalue_offset;}if(!(typeof (w.datasets[r].data[p])=="undefined")){l[r][p].yPosOffset=g(l[r][p].logarithmic,w.datasets[r].data[p],l[r][p].calculatedScale,l[r][p].scaleHop)-l[r][p].zeroY;l[r][p].posY=l[r][p].yAxisPos-l[r][p].yPosOffset;}if(typeof (w.datasets[r].origin)=="object")if(!(typeof (w.datasets[r].origin[p])=="undefined")){l[r][p].yPosOffsetOrigin=g(l[r][p].logarithmic,w.datasets[r].origin[p],l[r][p].calculatedScale,l[r][p].scaleHop)-l[r][p].zeroY;l[r][p].posYOrigin=l[r][p].yAxisPos-l[r][p].yPosOffsetOrigin;}l[r][p].posX=l[r][p].xPos;l[r][p].v9=l[r][p].xPos;l[r][p].v10=l[r][p].posY;l[r][p].graphMin=a.graphMin;l[r][p].graphMax=a.graphMax;l[r][p].graphMin2=a.graphMin;l[r][p].graphMax2=a.graphMax;l[r][p].annotateStartPosX=l[r][p].xPos;l[r][p].annotateEndPosX=l[r][p].xPos;l[r][p].annotateStartPosY=a.xAxisPosY;l[r][p].annotateEndPosY=a.xAxisPosY-a.msr.availableHeight;l[r][p].D1A=undefined;l[r][p].D1B=undefined;l[r][p].availableHeight=a.msr.availableHeight;l[r][p].availableWidth=a.msr.availableWidth;if(!v.animationLeftToRight){l[r][p].extent=Math.abs(l[r][p].yPosOffset);if(!isNumber(l[r][p].extent))l[r][p].extent=0;}else l[r][p].extent=1;l[r][0].totExtentI+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r-1].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;}break;case "Radar":var u=(2*Math.PI)/w.datasets[0].data.length;for(p=0;p<w.datasets[r].data.length;p++){if(p>=t){t++;l[0][0].totExtentJ[p]=0;}l[r][p].midPosX=a.midPosX;l[r][p].midPosY=a.midPosY;l[r][p].int_radius=0;l[r][p].ext_radius=a.maxSize;l[r][p].radiusOffset=a.maxSize;l[r][p].calculatedScale=a.calculatedScale;l[r][p].scaleHop=a.scaleHop;l[r][p].calculated_offset=g(e,w.datasets[r].data[p],a.calculatedScale,a.scaleHop);l[r][p].offsetX=Math.cos(v.startAngle*Math.PI/180-p*u)*l[r][p].calculated_offset;l[r][p].offsetY=Math.sin(v.startAngle*Math.PI/180-p*u)*l[r][p].calculated_offset;l[r][p].v9=l[r][p].midPosX+l[r][p].offsetX;l[r][p].v10=l[r][p].midPosY-l[r][p].offsetY;l[r][p].posX=l[r][p].midPosX+l[r][p].offsetX;l[r][p].posY=l[r][p].midPosY-l[r][p].offsetY;if(p==0)l[r][p].calculated_offset_max=g(e,l[r][p].lmaxvalue,a.calculatedScale,a.scaleHop);else l[r][p].calculated_offset_max=l[0][p].calculated_offset_max;l[r][p].annotateStartPosX=a.midPosX;l[r][p].annotateEndPosX=a.midPosX+Math.cos(v.startAngle*Math.PI/180-p*u)*a.maxSize;l[r][p].annotateStartPosY=a.midPosY;l[r][p].annotateEndPosY=a.midPosY-Math.sin(v.startAngle*Math.PI/180-p*u)*a.maxSize;if(Math.abs(l[r][p].annotateStartPosX-l[r][p].annotateEndPosX)<v.zeroValue){l[r][p].D1A=undefined;l[r][p].D1B=undefined;l[r][p].D2A=0;}else{l[r][p].D1A=(l[r][p].annotateStartPosY-l[r][p].annotateEndPosY)/(l[r][p].annotateStartPosX-l[r][p].annotateEndPosX);l[r][p].D1B=-l[r][p].D1A*l[r][p].annotateStartPosX+l[r][p].annotateStartPosY;if(Math.abs(l[r][p].D1A)>=v.zeroValue)l[r][p].D2A=-(1/l[r][p].D1A);else l[r][p].D2A=undefined;}l[r][p].extent=Math.sqrt(Math.pow(l[r][p].offsetX-l[r][p].midPosX,2)+Math.pow(l[r][p].offsetY-l[r][p].midPosY,2));if(!isNumber(l[r][p].extent))l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;}break;case "Bar":for(p=0;p<w.datasets[r].data.length;p++){if(p>=t){t++;l[0][0].totExtentJ[p]=0;}l[r][p].xAxisPosY=a.xAxisPosY;l[r][p].yAxisPosX=a.yAxisPosX;l[r][p].valueHop=a.valueHop;l[r][p].barWidth=a.barWidth;l[r][p].additionalSpaceBetweenBars=a.additionalSpaceBetweenBars;l[r][p].nbValueHop=a.nbValueHop;l[r][p].calculatedScale=a.calculatedScale;l[r][p].scaleHop=a.scaleHop;l[r][p].xPosLeft=a.yAxisPosX+Math.ceil(n.chartSpaceScale*v.barValueSpacing)+a.valueHop*p+a.additionalSpaceBetweenBars+a.barWidth*h+Math.ceil(n.chartSpaceScale*v.barDatasetSpacing)*h+Math.ceil(n.chartLineScale*v.barStrokeWidth)*h;l[r][p].xPosRight=l[r][p].xPosLeft+a.barWidth;if(w.datasets[r].axis==2){l[r][p].yPosBottom=a.xAxisPosY-a.zeroY2;l[r][p].barHeight=g(d,1*w.datasets[r].data[p],a.calculatedScale2,a.scaleHop2)-a.zeroY2;}else{l[r][p].yPosBottom=a.xAxisPosY-a.zeroY;l[r][p].barHeight=g(e,1*w.datasets[r].data[p],a.calculatedScale,a.scaleHop)-a.zeroY;}l[r][p].yPosTop=l[r][p].yPosBottom-l[r][p].barHeight+(Math.ceil(n.chartLineScale*v.barStrokeWidth)/2);l[r][p].v7=l[r][p].xPosLeft;l[r][p].v8=l[r][p].yPosBottom;l[r][p].v9=l[r][p].xPosRight;l[r][p].v10=l[r][p].yPosTop;l[r][p].graphMin=a.graphMin;l[r][p].graphMax=a.graphMax;l[r][p].graphMin2=a.graphMin;l[r][p].graphMax2=a.graphMax;l[r][p].extent=Math.abs(1*l[r][p].yPosBottom-1*l[r][p].yPosTop);if(!isNumber(l[r][p].extent))l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;}h++;break;case "StackedBar":for(p=0;p<w.datasets[r].data.length;p++){if(p>=t){t++;l[0][0].totExtentJ[p]=0;}l[r][p].xAxisPosY=a.xAxisPosY;l[r][p].yAxisPosX=a.yAxisPosX;l[r][p].valueHop=a.valueHop;l[r][p].barWidth=a.barWidth;l[r][p].additionalSpaceBetweenBars=a.additionalSpaceBetweenBars;l[r][p].nbValueHop=a.nbValueHop;l[r][p].calculatedScale=a.calculatedScale;l[r][p].scaleHop=a.scaleHop;if(typeof m[p]=="undefined"){m[p]=0;o[p]=0;zeroY=g(e,0,a.calculatedScale,a.scaleHop);}if((typeof w.datasets[r].data[p]=="undefined")){l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;continue;}l[r][p].xPosLeft=a.yAxisPosX+Math.ceil(n.chartSpaceScale*v.barValueSpacing)+a.valueHop*p+a.additionalSpaceBetweenBars;if(1*w.datasets[r].data[p]<0){l[r][p].botval=o[p];l[r][p].topval=o[p]+1*w.datasets[r].data[p];o[p]=o[p]+1*w.datasets[r].data[p];}else{l[r][p].botval=m[p];l[r][p].topval=m[p]+1*w.datasets[r].data[p];m[p]=m[p]+1*w.datasets[r].data[p];}l[r][p].xPosRight=l[r][p].xPosLeft+a.barWidth;l[r][p].botOffset=g(e,l[r][p].botval,a.calculatedScale,a.scaleHop);l[r][p].topOffset=g(e,l[r][p].topval,a.calculatedScale,a.scaleHop);l[r][p].yPosBottom=a.xAxisPosY-l[r][p].botOffset;l[r][p].yPosTop=a.xAxisPosY-l[r][p].topOffset;if(Math.ceil(n.chartSpaceScale*v.spaceBetweenBar)>0)if(1*w.datasets[r].data[p]<0){l[r][p].yPosBottom+=Math.ceil(n.chartSpaceScale*v.spaceBetweenBar);if(o[p]==1*w.datasets[r].data[p])l[r][p].yPosBottom-=(Math.ceil(n.chartSpaceScale*v.spaceBetweenBar)/2);if(l[r][p].yPosTop<l[r][p].yPosBottom)l[r][p].yPosBottom=l[r][p].yPosTop;}else{if(1*w.datasets[r].data[p]>0){l[r][p].yPosBottom-=Math.ceil(n.chartSpaceScale*v.spaceBetweenBar);if(m[p]==1*w.datasets[r].data[p])l[r][p].yPosBottom+=(Math.ceil(n.chartSpaceScale*v.spaceBetweenBar)/2);if(l[r][p].yPosTop>l[r][p].yPosBottom)l[r][p].yPosBottom=l[r][p].yPosTop;}}l[r][p].v7=l[r][p].xPosLeft;l[r][p].v8=l[r][p].yPosBottom;l[r][p].v9=l[r][p].xPosRight;l[r][p].v10=l[r][p].yPosTop;l[r][p].graphMin=a.graphMin;l[r][p].graphMax=a.graphMax;l[r][p].graphMin2=a.graphMin;l[r][p].graphMax2=a.graphMax;l[r][p].extent=Math.abs(l[r][p].yPosBottom-l[r][p].yPosTop);if(!isNumber(l[r][p].extent))l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;}break;case "HorizontalBar":for(p=0;p<w.datasets[r].data.length;p++){if(p>=t){t++;l[0][0].totExtentJ[p]=0;}l[r][p].xAxisPosY=a.xAxisPosY;l[r][p].yAxisPosX=a.yAxisPosX;l[r][p].valueHop=a.valueHop;l[r][p].barWidth=a.barWidth;l[r][p].additionalSpaceBetweenBars=a.additionalSpaceBetweenBars;l[r][p].nbValueHop=a.nbValueHop;l[r][p].calculatedScale=a.calculatedScale;l[r][p].scaleHop=a.scaleHop;l[r][p].xPosLeft=a.yAxisPosX+a.zeroY;l[r][p].yPosTop=a.xAxisPosY+Math.ceil(n.chartSpaceScale*v.barValueSpacing)-a.scaleHop*(p+1)+a.additionalSpaceBetweenBars+a.barWidth*r+Math.ceil(n.chartSpaceScale*v.barDatasetSpacing)*r+Math.ceil(n.chartLineScale*v.barStrokeWidth)*r;l[r][p].yPosBottom=l[r][p].yPosTop+a.barWidth;l[r][p].barWidth=g(e,1*w.datasets[r].data[p],a.calculatedScale,a.valueHop)-a.zeroY;l[r][p].xPosRight=l[r][p].xPosLeft+l[r][p].barWidth;l[r][p].v7=l[r][p].xPosLeft;l[r][p].v8=l[r][p].yPosBottom;l[r][p].v9=l[r][p].xPosRight;l[r][p].v10=l[r][p].yPosTop;l[r][p].graphMin=a.graphMin;l[r][p].graphMax=a.graphMax;l[r][p].extent=Math.abs(l[r][p].xPosLeft-l[r][p].xPosRight);if(!isNumber(l[r][p].extent))l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;}break;case "HorizontalStackedBar":for(p=0;p<w.datasets[r].data.length;p++){if(p>=t){t++;l[0][0].totExtentJ[p]=0;}l[r][p].xAxisPosY=a.xAxisPosY;l[r][p].yAxisPosX=a.yAxisPosX;l[r][p].valueHop=a.valueHop;l[r][p].barWidth=a.barWidth;l[r][p].additionalSpaceBetweenBars=a.additionalSpaceBetweenBars;l[r][p].nbValueHop=a.nbValueHop;l[r][p].calculatedScale=a.calculatedScale;l[r][p].scaleHop=a.scaleHop;if(r==0){m[p]=0;o[p]=0;}if((typeof w.datasets[r].data[p]=="undefined")){l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;continue;}l[r][p].xPosLeft=a.yAxisPosX+Math.ceil(n.chartSpaceScale*v.barValueSpacing)+a.valueHop*p;if(1*w.datasets[r].data[p]<0){l[r][p].leftval=o[p];l[r][p].rightval=o[p]+1*w.datasets[r].data[p];o[p]=o[p]+1*w.datasets[r].data[p];}else{l[r][p].leftval=m[p];l[r][p].rightval=m[p]+1*w.datasets[r].data[p];m[p]=m[p]+1*w.datasets[r].data[p];}l[r][p].rightOffset=c(l[r][p].rightval,a.calculatedScale,a.valueHop);l[r][p].leftOffset=c(l[r][p].leftval,a.calculatedScale,a.valueHop);l[r][p].xPosRight=a.yAxisPosX+l[r][p].rightOffset;l[r][p].xPosLeft=a.yAxisPosX+l[r][p].leftOffset;l[r][p].yPosTop=a.xAxisPosY+Math.ceil(n.chartSpaceScale*v.barValueSpacing)-a.scaleHop*(p+1)+a.additionalSpaceBetweenBars;l[r][p].yPosBottom=l[r][p].yPosTop+a.barWidth;if(Math.ceil(n.chartSpaceScale*v.spaceBetweenBar)>0)if(1*w.datasets[r].data[p]<0){l[r][p].xPosLeft-=Math.ceil(n.chartSpaceScale*v.spaceBetweenBar);if(o[p]==1*w.datasets[r].data[p])l[r][p].xPosLeft+=(Math.ceil(n.chartSpaceScale*v.spaceBetweenBar)/2);if(l[r][p].xPosLeft<l[r][p].xPosRight)l[r][p].xPosLeft=l[r][p].xPosRight;}else{if(1*w.datasets[r].data[p]>0){l[r][p].xPosLeft+=Math.ceil(n.chartSpaceScale*v.spaceBetweenBar);if(m[p]==1*w.datasets[r].data[p])l[r][p].xPosLeft-=(Math.ceil(n.chartSpaceScale*v.spaceBetweenBar)/2);if(l[r][p].xPosLeft>l[r][p].xPosRight)l[r][p].xPosLeft=l[r][p].xPosRight;}}l[r][p].v7=l[r][p].xPosLeft;l[r][p].v8=l[r][p].yPosBottom;l[r][p].v9=l[r][p].xPosRight;l[r][p].v10=l[r][p].yPosTop;l[r][p].graphMin=a.graphMin;l[r][p].graphMax=a.graphMax;l[r][p].extent=Math.abs(l[r][p].xPosLeft-l[r][p].xPosRight);if(!isNumber(l[r][p].extent))l[r][p].extent=0;l[r][0].totExtentI+=l[r][p].extent;l[0][0].totExtentJ[p]+=l[r][p].extent;l[0][0].GrandTotExtent+=l[r][p].extent;l[r][p].allCumExtent=l[0][0].GrandTotExtent;if(p>0)l[r][p].cumExtentI=l[r][p-1].cumExtentI+l[r][p-1].extent;if(r>0||p>0)if(p==0)l[r][p].cumExtent=l[r-1][w.datasets[r].data.length-1].cumExtent;else l[r][p].cumExtent=l[r][p-1].cumExtent;}break;default:break;}l[0][0].cumExtentJ[0]=0;for(p=1;p<t;p++)l[0][0].cumExtentJ[p]=l[0][0].cumExtentJ[p-1]+l[0][0].totExtentJ[p-1];}function f(F,z,D,B,A,E){if(typeof D.datasets[F].xPos=="object")if(!(typeof D.datasets[F].xPos[Math.floor(z+v.zeroValue)]=="undefined")){var i=A*E;var C=(typeof D.xBegin!="undefined")?D.xBegin:(typeof (1*D.labels[0])=="number"&&!isNaN(1*D.labels[0])?1*D.labels[0]:0);var H=(typeof D.xEnd!="undefined")?D.xEnd:((typeof (1*D.labels[D.labels.length-1])=="number")&&!isNaN(1*D.labels[D.labels.length-1])?1*D.labels[D.labels.length-1]:D.labels.length-1);if(H<=C)H=C+100;if(1*D.datasets[F].xPos[Math.floor(z+v.zeroValue)]>=C&&D.datasets[F].xPos[Math.floor(z+v.zeroValue)]<=H){var I=B+i*((1*D.datasets[F].xPos[Math.floor(z+v.zeroValue)]-C)/(H-C));var G=I;if(Math.abs(z-Math.floor(z+v.zeroValue))>v.zeroValue)G=f(F,Math.ceil(z-v.zeroValue),D);return I+(z-Math.floor(z+v.zeroValue))*(G-I);}}return B+(A*z);}function q(i){return Math.floor(Math.log(i)/Math.LN10);}function g(A,C,z,E){if(!A){var D=z.steps*z.stepValue;var B=C-z.graphMin;var i=b(B/D,1,0);return (E*z.steps)*i;}else return b(s(C)*E-s(z.graphMin)*E,undefined,0);}function c(B,z,D){var C=z.steps*z.stepValue;var A=B-z.graphMin;var i=b(A/C,1,0);return (D*z.steps)*i;}function b(i,A,z){if(isNumber(A))if(i>A)return A;if(isNumber(z))if(i<z)return z;return i;}function s(i){return Math.log(i)/Math.LN10;}}function isBooleanOptionTrue(a,c){var b;if(typeof optionvar=="undefined")if(typeof c=="function")return true;else if(typeof c=="object"){for(b=0;b<c.length;b++)if(c[b])return true;return false;}else return c;if(typeof optionvar=="function")return true;else if(typeof optionvar=="object"){for(b=0;b<optionvar.length;b++)if(optionvar[b])return true;return false;}else return optionvar;}function setOptionValue(n,i,b,e,q,h,m,l,o,a,f,d,g){var c;if(i==true)if(typeof (h.special)=="object")for(var p=h.special.length-1;p>=0;p--){if(typeof h.special[p].posi=="undefined"||typeof h.special[p].posj=="undefined")continue;if(h.special[p].posi!=f||h.special[p].posj!=d||f==-1||d==-1)continue;if(typeof h.special[p][a]!="undefined")return h.special[p][a];}if(typeof l=="undefined"){if(typeof o=="function")return o(e,q,h,m,f,d,g);else if(typeof o=="object")if(n)c=o[Math.min(o.length-1,Math.max(0,f))];else c=o[Math.min(o.length-1,Math.max(0,d))];else c=o;if(b!=1)c=Math.ceil(c*b);return c;}if(typeof l=="function")c=l(e,q,h,m,f,d,g);else if(typeof l=="object")if(d==-1)c=l[Math.min(l.length-1,Math.max(0,f))];else c=l[Math.min(l.length-1,Math.max(0,d))];else c=l;if(b!=1)c=Math.ceil(c*b);return c;}function tpdraw(a,b){switch(a.tpchart){case "Bar":case "StackedBar":if(b.type=="Line")tp="Line";else tp=a.tpchart;break;default:tp=a.tpchart;break;}return tp;}function setTextBordersAndBackground(s,n,v,e,l,f,d,i,g,u,z,m,w,b,t){var a,c;if(typeof n!="string"){var p=n.toString();a=v*(p.split("\n").length||1);c=s.measureText(p).width;}else{a=v*(n.split("\n").length||1);c=s.measureText(n).width;}var r,h,q,o;if(s.textAlign=="center"){r=-c/2;h=c/2;}else if(s.textAlign=="left"){r=0;h=c;}else{if(s.textAlign=="right"){r=-c;h=0;}}if(s.textBaseline=="top"){q=0;ybottom=a;}else if(s.textBaseline=="center"||s.textBaseline=="middle"){q=-a/2;ybottom=a/2;}else{if(s.textBaseline=="bottom"){q=-a;ybottom=0;}}s.save();s.beginPath();s.translate(e,l);if(w!="none"){this.lineWidth=0;s.strokeStyle="rgba(0,0,0,0)";s.fillStyle=w;s.drawRectangle({x:r-u,y:ybottom+z,width:h-r+2*u,height:q-ybottom-2*z,borders:f,bordersWidth:g,borderSelection:d,borderRadius:t,fill:true,stroke:false});}if(f){s.lineWidth=g;s.strokeStyle=i;if(w!="none")s.fillStyle=w;else s.fillStyle="rgba(0,0,0,0)";s.setLineDash(lineStyleFn(m));s.drawRectangle({x:r-u-isBorder(d,"LEFT")*g/2,y:ybottom+z+isBorder(d,"BOTTOM")*g/2,width:h-r+2*u+(isBorder(d,"LEFT")+isBorder(d,"RIGHT"))*g/2,height:-a-2*z-(isBorder(d,"BOTTOM")+isBorder(d,"TOP"))*g/2,borders:f,bordersWidth:g,borderSelection:d,borderRadius:t,fill:false,stroke:true});s.setLineDash([]);}s.beginPath();s.restore();}function calculatePieDrawingSize(p,a,u,w,m){var b=(((u.startAngle*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);var e=(((u.totalAmplitude*(Math.PI/180)+2*Math.PI)%(2*Math.PI))+2*Math.PI)%(2*Math.PI);if(e<=u.zeroValue)e=2*Math.PI;var v=((b-e)+4*Math.PI)%(2*Math.PI);var r=v+e;var c=Math.floor(((v+u.zeroValue)/(Math.PI/2))%4);var d=Math.floor(((r-u.zeroValue)/(Math.PI/2))%4);var n=[0,0,0,0];if(c<=d)for(var t=c;t<=d;t++)n[t]=1;else{for(var t=c;t<4;t++)n[t]=1;for(var t=0;t<=d;t++)n[t]=1;}if(n[0]==0&&n[1]==0){midPieY=a.topNotUsableHeight+5;doughnutRadius=a.availableHeight-5;}else if(n[2]==0&&n[3]==0){midPieY=a.topNotUsableHeight+a.availableHeight;doughnutRadius=a.availableHeight-5;}else{midPieY=a.topNotUsableHeight+(a.availableHeight/2);doughnutRadius=a.availableHeight/2-5;}var o;if(n[0]==0&&n[3]==0){midPieX=a.leftNotUsableWidth+a.availableWidth-5;doughnutRadius=Math.min(doughnutRadius,a.availableWidth-5);o=a.availableWidth-5;}else if(n[1]==0&&n[2]==0){midPieX=a.leftNotUsableWidth+5;doughnutRadius=Math.min(doughnutRadius,a.availableWidth-5);o=a.availableWidth-5;}else{midPieX=a.leftNotUsableWidth+(a.availableWidth/2);doughnutRadius=Math.min(doughnutRadius,(a.availableWidth/2)-5);o=(a.availableWidth/2)-5;}var s=w.labels.length-1;if(isBooleanOptionTrue(undefined,u.inGraphDataShow)&&setOptionValue(false,true,1,"INGRAPHDATARADIUSPOSITION",p,w,m,undefined,u.inGraphDataRadiusPosition,"inGraphDataRadiusPosition",0,s,{nullValue:true})==3&&setOptionValue(false,true,1,"INGRAPHDATAALIGN",p,w,m,undefined,u.inGraphDataAlign,"inGraphDataAlign",0,s,{nullValue:true})=="off-center"&&setOptionValue(false,true,1,"INGRAPHDATAROTATE",p,w,m,undefined,u.inGraphDataRotate,"inGraphDataRotate",0,s,{nullValue:true})==0){doughnutRadius=doughnutRadius-setOptionValue(false,true,p.chartTextScale,"INGRAPHDATAFONTSIZE",p,w,m,undefined,u.inGraphDataFontSize,"inGraphDataFontSize",0,s,{nullValue:true})-setOptionValue(false,true,1,"INGRAPHDATAPADDINGRADIUS",p,w,m,undefined,u.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",0,s,{nullValue:true})-5;var g;for(var t=0;t<w.datasets.length;t++)if(!(typeof (w.datasets[t].data[s])=="undefined")&&1*w.datasets[t].data[s]>=0){p.font=setOptionValue(false,true,1,"INGRAPHDATAFONTSTYLE",p,w,m,undefined,u.inGraphDataFontStyle,"inGraphDataFontStyle",t,s,{nullValue:true})+" "+setOptionValue(false,true,p.chartTextScale,"INGRAPHDATAFONTSIZE",p,w,m,undefined,u.inGraphDataFontSize,"inGraphDataFontSize",t,s,{nullValue:true})+"px "+setOptionValue(false,true,1,"INGRAPHDATAFONTFAMILY",p,w,m,undefined,u.inGraphDataFontFamily,"inGraphDataFontFamily",t,s,{nullValue:true});if(setOptionValue(false,true,1,"INGRAPHDATAANGLEPOSITION",p,w,m,undefined,u.inGraphDataAnglePosition,"inGraphDataAnglePosition",t,s,{nullValue:true})==1)g=b+setOptionValue(false,true,1,"INGRAPHDATAPADDINANGLE",p,w,m,undefined,u.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",t,s,{nullValue:true})*(Math.PI/180);else if(setOptionValue(false,true,1,"INGRAPHDATAANGLEPOSITION",p,w,m,undefined,u.inGraphDataAnglePosition,"inGraphDataAnglePosition",t,s,{nullValue:true})==2)g=b-m[t][s].segmentAngle/2+setOptionValue(false,true,1,"INGRAPHDATAPADDINANGLE",p,w,m,undefined,u.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",t,s,{nullValue:true})*(Math.PI/180);else{if(setOptionValue(false,true,1,"INGRAPHDATAANGLEPOSITION",p,w,m,undefined,u.inGraphDataAnglePosition,"inGraphDataAnglePosition",t,s,{nullValue:true})==3)g=b-m[t][s].segmentAngle+setOptionValue(false,true,1,"INGRAPHDATAPADDINANGLE",p,w,m,undefined,u.inGraphDataPaddingAngle,"inGraphDataPaddingAngle",t,s,{nullValue:true})*(Math.PI/180);}b-=m[t][s].segmentAngle;var l=tmplbis(setOptionValue(false,true,1,"INGRAPHDATATMPL",p,w,m,undefined,u.inGraphDataTmpl,"inGraphDataTmpl",t,s,{nullValue:true}),m[t][s],u);var f=p.measureTextMultiLine(l).textWidth;var h=Math.abs((o-f)/Math.cos(g))-setOptionValue(false,true,1,"INGRAPHDATAPADDINGRADIUS",p,w,m,undefined,u.inGraphDataPaddingRadius,"inGraphDataPaddingRadius",t,s,{nullValue:true})-5;if(h<doughnutRadius)doughnutRadius=h;}}doughnutRadius=doughnutRadius*u.radiusScale;return {radius:doughnutRadius,midPieX,midPieY};}function drawGridScale(q,z,w,a,h,u,f,l,g,m,o){var t,r,p;var d;var b;var c=false;var e=false;if(w.drawXScaleLine!==false)for(var n=0;n<w.drawXScaleLine.length;n++){var v;switch(w.drawXScaleLine[n].position){case "bottom":v=u;c=true;break;case "top":v=u-(m*g);e=true;break;case "0":case 0:v=u;if(f!=0)v=u-f;else c=true;if(Math.abs(v-(u-(m*g)))<w.zeroValue)e=true;break;}drawScaleLine(q,h-Math.ceil(q.chartLineScale*w.scaleTickSizeLeft),v,h+a.availableWidth+Math.ceil(q.chartLineScale*w.scaleTickSizeRight),v,w.drawXScaleLine[n].lineWidth?w.drawXScaleLine[n].lineWidth:Math.ceil(q.chartLineScale*w.scaleLineWidth),w.drawXScaleLine[n].lineColor?w.drawXScaleLine[n].lineColor:w.scaleLineColor,w.scaleGridLineStyle);}for(t=-1+(c==true);t<m;t++){if(t<m-(e==true))if((t==-1&&w.xAxisBottom)||(t==m-1&&w.xAxisTop)||w.scaleShowGridLines&&(t+1)%w.scaleYGridLinesStep==0){drawFirst=false;if(w.scaleTickSizeLeft>0)drawScaleLine(q,h-Math.ceil(q.chartLineScale*w.scaleTickSizeLeft),u-((t+1)*g),h,u-((t+1)*g),Math.ceil(q.chartLineScale*w.scaleGridLineWidth),w.tickColor!="gridLine"&&w.yAxisLeft?w.scaleLineColor:w.scaleGridLineColor,w.scaleGridLineStyle);drawScaleLine(q,h,u-((t+1)*g),h+a.availableWidth,u-((t+1)*g),Math.ceil(q.chartLineScale*w.scaleGridLineWidth),w.scaleGridLineColor,w.scaleGridLineStyle);if(w.scaleTickSizeRight>0)drawScaleLine(q,h+a.availableWidth,u-((t+1)*g),h+a.availableWidth+Math.ceil(q.chartLineScale*w.scaleTickSizeRight),u-((t+1)*g),Math.ceil(q.chartLineScale*w.scaleGridLineWidth),w.tickColor!="gridLine"&&w.yAxisRight?w.scaleLineColor:w.scaleGridLineColor,w.scaleGridLineStyle);}else{if(w.scaleTickSizeLeft>0)drawScaleLine(q,h-Math.ceil(q.chartLineScale*w.scaleTickSizeLeft),u-((t+1)*g),h,u-((t+1)*g),Math.ceil(q.chartLineScale*w.scaleGridLineWidth),w.tickColor!="gridLine"&&w.yAxisLeft?w.scaleLineColor:w.scaleGridLineColor,w.scaleGridLineStyle);if(w.scaleTickSizeRight>0)drawScaleLine(q,h+a.availableWidth,u-((t+1)*g),h+a.availableWidth+Math.ceil(q.chartLineScale*w.scaleTickSizeRight),u-((t+1)*g),Math.ceil(q.chartLineScale*w.scaleGridLineWidth),w.tickColor!="gridLine"&&w.yAxisRight?w.scaleLineColor:w.scaleGridLineColor,w.scaleGridLineStyle);}if(w.scaleMinorTickVerticalCount>0&&t!=-1){p=g/(w.scaleMinorTickVerticalCount+1);for(r=1;r<w.scaleMinorTickVerticalCount+1;r++)if(w.scaleMinorTickHorizontalLines){if(w.scaleMinorTickSizeLeft>0)drawScaleLine(q,h-Math.ceil(q.chartLineScale*w.scaleMinorTickSizeLeft),u-((t+1)*g)+r*p,h,u-((t+1)*g)+r*p,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&w.yAxisLeft?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);drawScaleLine(q,h,u-((t+1)*g)+r*p,h+a.availableWidth,u-((t+1)*g)+r*p,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.scaleMinorTickColor,w.scaleMinorTickStyle);if(w.scaleMinorTickSizeRight>0)drawScaleLine(q,h+a.availableWidth,u-((t+1)*g)+r*p,h+a.availableWidth+Math.ceil(q.chartLineScale*w.scaleMinorTickSizeRight),u-((t+1)*g)+r*p,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&w.yAxisRight?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);}else{if(w.scaleMinorTickSizeLeft>0)drawScaleLine(q,h-Math.ceil(q.chartLineScale*w.scaleMinorTickSizeLeft),u-((t+1)*g)+r*p,h,u-((t+1)*g)+r*p,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&w.yAxisLeft?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);if(w.scaleMinorTickSizeRight>0)drawScaleLine(q,h+a.availableWidth,u-((t+1)*g)+r*p,h+a.availableWidth+Math.ceil(q.chartLineScale*w.scaleMinorTickSizeRight),u-((t+1)*g)+r*p,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&w.yAxisRight?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);}}}var d;var b;for(t=0;t<o;t++){q.beginPath();if((t==0&&w.yAxisLeft)||(t==(o-1)&&w.yAxisRight)){d=w.scaleLineColor;b=w.scaleLineWidth;}else{d=w.scaleGridLineColor;b=w.scaleGridLineWidth;}if((t==0&&w.yAxisLeft)||(t==(o-1)&&w.yAxisRight)||(t==o-1&&w.scaleTickSizeRight>0)||(w.scaleShowGridLines&&t%w.scaleXGridLinesStep==0)){if(w.scaleTickSizeBottom>0)drawScaleLine(q,h+t*l,u+Math.ceil(q.chartLineScale*w.scaleTickSizeBottom),h+t*l,u,Math.ceil(q.chartLineScale*b),w.tickColor!="gridLine"&&c?w.scaleLineColor:d,w.scaleGridLineStyle);drawScaleLine(q,h+t*l,u,h+t*l,u-a.availableHeight,Math.ceil(q.chartLineScale*b),d,w.scaleGridLineStyle);if(w.scaleTickSizeTop>0)drawScaleLine(q,h+t*l,u-a.availableHeight,h+t*l,u-a.availableHeight-Math.ceil(q.chartLineScale*w.scaleTickSizeTop),Math.ceil(q.chartLineScale*b),w.tickColor!="gridLine"&&e?w.scaleLineColor:d,w.scaleGridLineStyle);}else{if(w.scaleTickSizeBottom>0)drawScaleLine(q,h+t*l,u,h+t*l,u+Math.ceil(q.chartLineScale*w.scaleTickSizeBottom),Math.ceil(q.chartLineScale*w.scaleGridLineWidth),w.tickColor!="gridLine"&&c?w.scaleLineColor:w.scaleGridLineColor,w.scaleGridLineStyle);if(w.scaleTickSizeTop>0)drawScaleLine(q,h+t*l,u-a.availableHeight,h+t*l,u-a.availableHeight-Math.ceil(q.chartLineScale*w.scaleTickSizeTop),Math.ceil(q.chartLineScale*w.scaleGridLineWidth),w.tickColor!="gridLine"&&e?w.scaleLineColor:w.scaleGridLineColor,w.scaleGridLineStyle);}if(t<o-1)if(w.scaleMinorTickHorizontalCount>0){p=l/(w.scaleMinorTickHorizontalCount+1);for(r=1;r<w.scaleMinorTickHorizontalCount+1;r++)if(w.scaleMinorTickVerticalLines){if(w.scaleMinorTickSizeTop>0)drawScaleLine(q,h+t*l+r*p,u-a.availableHeight-Math.ceil(q.chartLineScale*w.scaleMinorTickSizeTop),h+t*l+r*p,u-a.availableHeight,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&c?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);drawScaleLine(q,h+t*l+r*p,u-a.availableHeight,h+t*l+r*p,u,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.scaleMinorTickColor,w.scaleMinorTickStyle);if(w.scaleMinorTickSizeBottom>0)drawScaleLine(q,h+t*l+r*p,u,h+t*l+r*p,u+Math.ceil(q.chartLineScale*w.scaleMinorTickSizeBottom),Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&c?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);}else{if(w.scaleMinorTickSizeBottom>0)drawScaleLine(q,h+t*l+r*p,u,h+t*l+r*p,u+Math.ceil(q.chartLineScale*w.scaleMinorTickSizeBottom),Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&c?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);if(w.scaleMinorTickSizeTop>0)drawScaleLine(q,h+t*l+r*p,u-a.availableHeight-Math.ceil(q.chartLineScale*w.scaleMinorTickSizeTop),h+t*l+r*p,u-a.availableHeight,Math.ceil(q.chartLineScale*w.scaleMinorTickWidth),w.minorTickColor!="gridLine"&&e?w.scaleLineColor:w.scaleMinorTickColor,w.scaleMinorTickStyle);}}}}function drawScaleLine(c,e,f,g,d,b,h,a){c.beginPath();c.moveTo(e,f);c.lineWidth=b;c.strokeStyle=h;c.lineTo(g,d);c.setLineDash(lineStyleFn(a));c.stroke();c.setLineDash([]);}function drawTick(p,l,d,c,o,a,b,f,h,n,g){var m,e;if(l==0)m=(c-d)/(b+1);else m=(a-o)/(b+1);for(e=1;e<=b;e++){p.beginPath();p.moveTo(d+e*m*(l==0),o+e*m*(l==1));p.lineWidth=Math.ceil(p.chartLineScale*h);p.strokeStyle=n;p.lineTo(d+e*m*(l==0)+f*(l==1),o+e*m*(l==1)-f*(l==0));p.setLineDash(lineStyleFn(g));p.stroke();p.setLineDash([]);}}function isBorder(b,a){var c=b;if(c>=8)if(a=="RIGHT")return (true);else c-=8;if(c>=4)if(a=="TOP")return (true);else c-=4;if(c>=2)if(a=="LEFT")return (true);else c-=2;if(c>=1)if(a=="BOTTOM")return (true);else c-=1;return (false);}var animationOptions={linear:function(a){return a;},easeInQuad:function(a){return a*a;},easeOutQuad:function(a){return -1*a*(a-2);},easeInOutQuad:function(a){if((a/=1/2)<1)return 1/2*a*a;return -1/2*((--a)*(a-2)-1);},easeInCubic:function(a){return a*a*a;},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1);},easeInOutCubic:function(a){if((a/=1/2)<1)return 1/2*a*a*a;return 1/2*((a-=2)*a*a+2);},easeInQuart:function(a){return a*a*a*a;},easeOutQuart:function(a){return -1*((a=a/1-1)*a*a*a-1);},easeInOutQuart:function(a){if((a/=1/2)<1)return 1/2*a*a*a*a;return -1/2*((a-=2)*a*a*a-2);},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a;},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1);},easeInOutQuint:function(a){if((a/=1/2)<1)return 1/2*a*a*a*a*a;return 1/2*((a-=2)*a*a*a*a+2);},easeInSine:function(a){return -1*Math.cos(a/1*(Math.PI/2))+1;},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2));},easeInOutSine:function(a){return -1/2*(Math.cos(Math.PI*a/1)-1);},easeInExpo:function(a){return (a==0)?1:1*Math.pow(2,10*(a/1-1));},easeOutExpo:function(a){return (a==1)?1:1*(-Math.pow(2,-10*a/1)+1);},easeInOutExpo:function(a){if(a==0)return 0;if(a==1)return 1;if((a/=1/2)<1)return 1/2*Math.pow(2,10*(a-1));return 1/2*(-Math.pow(2,-10*--a)+2);},easeInCirc:function(a){if(a>=1)return a;return -1*(Math.sqrt(1-(a/=1)*a)-1);},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a);},easeInOutCirc:function(a){if((a/=1/2)<1)return -1/2*(Math.sqrt(1-a*a)-1);return 1/2*(Math.sqrt(1-(a-=2)*a)+1);},easeInElastic:function(c){var d=1.70158;var e=0;var b=1;if(c==0)return 0;if((c/=1)==1)return 1;if(!e)e=1*0.3;if(b<Math.abs(1)){b=1;d=e/4;}else d=e/(2*Math.PI)*Math.asin(1/b);return -(b*Math.pow(2,10*(c-=1))*Math.sin((c*1-d)*(2*Math.PI)/e));},easeOutElastic:function(c){var d=1.70158;var e=0;var b=1;if(c==0)return 0;if((c/=1)==1)return 1;if(!e)e=1*0.3;if(b<Math.abs(1)){b=1;d=e/4;}else d=e/(2*Math.PI)*Math.asin(1/b);return b*Math.pow(2,-10*c)*Math.sin((c*1-d)*(2*Math.PI)/e)+1;},easeInOutElastic:function(c){var d=1.70158;var e=0;var b=1;if(c==0)return 0;if((c/=1/2)==2)return 1;if(!e)e=1*(0.3*1.5);if(b<Math.abs(1)){b=1;d=e/4;}else d=e/(2*Math.PI)*Math.asin(1/b);if(c<1)return -0.5*(b*Math.pow(2,10*(c-=1))*Math.sin((c*1-d)*(2*Math.PI)/e));return b*Math.pow(2,-10*(c-=1))*Math.sin((c*1-d)*(2*Math.PI)/e)*0.5+1;},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b);},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1);},easeInOutBack:function(a){var b=1.70158;if((a/=1/2)<1)return 1/2*(a*a*(((b*=(1.525))+1)*a-b));return 1/2*((a-=2)*a*(((b*=(1.525))+1)*a+b)+2);},easeInBounce:function(a){return 1-animationOptions.easeOutBounce(1-a);},easeOutBounce:function(a){if((a/=1)<(1/2.75))return 1*(7.5625*a*a);else if(a<(2/2.75))return 1*(7.5625*(a-=(1.5/2.75))*a+0.75);else if(a<(2.5/2.75))return 1*(7.5625*(a-=(2.25/2.75))*a+0.9375);else return 1*(7.5625*(a-=(2.625/2.75))*a+0.984375);},easeInOutBounce:function(a){if(a<1/2)return animationOptions.easeInBounce(a*2)*0.5;return animationOptions.easeOutBounce(a*2-1)*0.5+1*0.5;}};function computeAnimation(o,b,s,c,l,g,h,p,n){var e=0;var d=0;var a=1;var f=1;var m=1;var r;while(3*e<s.length&&typeof (1*s[3*e])==="number"&&d+Math.abs(1*s[3*e])<o){d+=Math.min(Math.abs(1*s[3*e]),1);e++;}if(3*e<s.length&&typeof (1*s[3*e])==="number")a=Math.min(d+Math.abs(1*s[3*e]),1);if(3*e+1<s.length&&typeof (1*s[3*e+1])==="number")f=Math.min(Math.abs(1*s[3*e+1]),1);if(3*e+2<s.length&&typeof (1*s[3*e+2])==="number")m=Math.min(Math.abs(1*s[3*e+2]),1);if(a!=d)newAnimValue=f+((o-d)/(a-d))*(m-f);else newAnimValue=1;if(l!=-1&&g!=-1)if(l<b.animationStartWithDataset-1)newAnimValue=1;else if(l<=b.animationStartWithDataset-1&&g<b.animationStartWithData-1)newAnimValue=1;else switch(b.animationByDataset){case true:if(newAnimValue<p[l][0].cumulValTotExtentI/p[0][0].GrandTotExtent)newAnimValue=0;else if(newAnimValue<(p[l][0].cumulValTotExtentI+p[l][0].totExtentI)/p[0][0].GrandTotExtent){newAnimValue=(newAnimValue-p[l][0].cumulValTotExtentI/p[0][0].GrandTotExtent);newAnimValue=newAnimValue/(p[l][0].totExtentI/p[0][0].GrandTotExtent);if(b.animationLeftToRight)if(newAnimValue<p[l][g].cumExtentI/p[l][0].totExtentI)newAnimValue=0;else if(newAnimValue<(p[l][g].cumExtentI+p[l][g].extent)/p[l][0].totExtentI){newAnimValue=newAnimValue-p[l][g].cumExtentI/p[l][0].totExtentI;newAnimValue=newAnimValue/(p[l][g].extent/p[l][0].totExtentI);}else newAnimValue=1;}else newAnimValue=1;break;case false:default:switch(b.animationLeftToRight){case true:if(newAnimValue<p[0][0].cumExtentJ[g]/p[0][0].GrandTotExtent)newAnimValue=0;else if(newAnimValue<(p[0][0].cumExtentJ[g]+p[0][0].totExtentJ[g])/p[0][0].GrandTotExtent){newAnimValue=newAnimValue-p[0][0].cumExtentJ[g]/p[0][0].GrandTotExtent;newAnimValue=newAnimValue/(p[0][0].totExtentJ[g]/p[0][0].GrandTotExtent);}else newAnimValue=1;break;case false:default:break;}break;}var q=animationOptions[c[Math.min(e,c.length-1)]];if(typeof q==="function")r=(b.animation)?q(newAnimValue):1;else r=o;return r;}function valAnimation(p,c,h,e,l,g,n,f,d,b,o,m){var a=undefined;var q=undefined;if(typeof b==="object")if(typeof b[g]==="object")a=b[g];if(typeof o==="object")if(typeof o[g]==="object")q=o[g];if(typeof a=="undefined")a=f;if(typeof q=="undefined")q=d;p=computeAnimation(c,e,a,q,l,g,h,n,m);return p;}function correctAnimation(g,f,c,d,b,h,e){var a={animationGlobal:g.animationGlobal,yAxis:valAnimation(g.yAxis,g.animationGlobal,f,c,d,b,h,c.animationYAxis,c.animationYAxisEasing,f.datasets[d].animationYAxis,f.datasets[d].animationYAxisEasing,e),subYAxis:0,radius:valAnimation(g.radius,g.animationGlobal,f,c,d,b,h,c.animationRadius,c.animationRadiusEasing,f.datasets[d].animationRadius,f.datasets[d].animationRadiusEasing,e),rotate:valAnimation(g.rotate,g.animationGlobal,f,c,d,b,h,c.animationRotate,c.animationRotateEasing,f.datasets[d].animationRotate,f.datasets[d].animationRotateEasing,e)};if(e=="LINE"&&c.animationLeftToRight&&a.yAxis>0&&a.yAxis<1){a.subYAxis=a.yAxis;a.yAxis=1;}return a;}function convertData(d,a){console.log("GENERATE:"+a);if(a)console.log("var data = {");if(a)console.log('     labels : [""],');if(a)console.log("     datasets : [");var c={labels:[""],datasets:[]};for(var b=0;b<d.length;b++){if(a)console.log("           {");c.datasets[b]={data:[]};if(typeof d[b].value!="undefined"){if(a)console.log("      data : ["+d[b].value+"],");c.datasets[b].data=[d[b].value];}else{if(a)console.log("      data : ["+d[b].value+"],");c.datasets[b].data=[];}if(typeof d[b].color!="undefined"){if(a)console.log('      fillColor : "'+d[b].color+'",');c.datasets[b].fillColor=d[b].color;}if(typeof d[b].title!="undefined"){if(a)console.log('      title : "'+d[b].title+'",');c.datasets[b].title=d[b].title;}if(typeof d[b].link!="undefined"){if(a)console.log('      link : "'+d[b].link+'",');c.datasets[b].link=d[b].link;}if(typeof d[b].imageLoad!="undefined"){if(a)console.log("      imageLoad : <image>,");c.datasets[b].imageLoad=d[b].imageLoad;}if(typeof d[b].imagePos!="undefined"){if(a)console.log("      imagePos : "+d[b].imagePos+",");c.datasets[b].imagePos=d[b].imagePos;}if(typeof d[b].imageHeight!="undefined"){if(a)console.log("      imageHeight : "+d[b].imageHeight+",");c.datasets[b].imageHeight=d[b].imageHeight;}if(typeof d[b].imageWidth!="undefined"){if(a)console.log("      imageWidth : "+d[b].imageWidth+",");c.datasets[b].imageWidth=d[b].imageWidth;}if(typeof d[b].text!="undefined"){if(a)console.log('      text : "'+d[b].text+'",');c.datasets[b].text=d[b].text;}if(typeof d[b].fontStyle!="undefined"){if(a)console.log('      fontStyle : "'+d[b].fontStyle+'",');c.datasets[b].fontStyle=d[b].fontStyle;}if(typeof d[b].fontSize!="undefined"){if(a)console.log("      fontSize : "+d[b].fontSize+",");c.datasets[b].fontSize=d[b].fontSize;}if(typeof d[b].expandOutRadius!="undefined"){if(a)console.log("      expandOutRadius : "+d[b].expandOutRadius+",");c.datasets[b].expandOutRadius=d[b].expandOutRadius;}if(typeof d[b].expandInRadius!="undefined"){if(a)console.log("      expandInRadius : "+d[b].expandInRadius+",");c.datasets[b].expandInRadius=d[b].expandInRadius;}if(typeof d[b].gradientColors!="undefined"){if(a)console.log("      gradientColors : < put here the gradient Colors definitions> "+d[b].gradientColors+",");c.datasets[b].gradientColors=d[b].gradientColors;}if(a){console.log("      nothing : true    // line added to avoid a comma after last line");if(b==d.length-1)console.log("           }");else console.log("           },");}}if(a)console.log("]");if(d.length>0){if(typeof d[0].shapesInChart!="undefined")c.shapesInChart=d[0].shapesInChart;if(a){console.log("     ,");console.log("     <   put here the shapesInChart    >");}}if(a)console.log("};");return c;};;
